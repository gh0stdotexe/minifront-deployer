import{e as vt,x as Rt,d as x,k as Ze,p as It,y as Le,D as St,z as Ne,A as gt,B as Lt,C as Nt}from"./index-CgQbWf4X.js";var Je={};const wt=vt(Rt);(function(r){r.__esModule=!0;var t=wt,e=5;function n(c){var m=x.Buffer.alloc(2);return m.writeUInt16BE(c,0),m}var o={data:x.Buffer.alloc(0),dataLength:0,sequence:0},i=function(c,m){return{makeBlocks:function(a){var s=x.Buffer.concat([n(a.length),a]),l=m-5,f=Math.ceil(s.length/l);s=x.Buffer.concat([s,x.Buffer.alloc(f*l-s.length+1).fill(0)]);for(var S=[],h=0;h<f;h++){var d=x.Buffer.alloc(5);d.writeUInt16BE(c,0),d.writeUInt8(e,2),d.writeUInt16BE(h,3);var A=s.slice(h*l,(h+1)*l);S.push(x.Buffer.concat([d,A]))}return S},reduceResponse:function(a,s){var l=a||o,f=l.data,S=l.dataLength,h=l.sequence;if(s.readUInt16BE(0)!==c)throw new t.TransportError("Invalid channel","InvalidChannel");if(s.readUInt8(2)!==e)throw new t.TransportError("Invalid tag","InvalidTag");if(s.readUInt16BE(3)!==h)throw new t.TransportError("Invalid sequence","InvalidSequence");a||(S=s.readUInt16BE(5)),h++;var d=s.slice(a?5:7);return f=x.Buffer.concat([f,d]),f.length>S&&(f=f.slice(0,S)),{data:f,dataLength:S,sequence:h}},getReducedResult:function(a){if(a&&a.dataLength===a.data.length)return a.data}}};r.default=i})(Je);const Ot=Ze(Je);var fe={exports:{}};const Tt="2.0.0",Qe=256,At=Number.MAX_SAFE_INTEGER||9007199254740991,yt=16,Pt=Qe-6,_t=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Z={MAX_LENGTH:Qe,MAX_SAFE_COMPONENT_LENGTH:yt,MAX_SAFE_BUILD_LENGTH:Pt,MAX_SAFE_INTEGER:At,RELEASE_TYPES:_t,SEMVER_SPEC_VERSION:Tt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ne={};const Ct=typeof It=="object"&&ne&&ne.NODE_DEBUG&&/\bsemver\b/i.test(ne.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var J=Ct;(function(r,t){const{MAX_SAFE_COMPONENT_LENGTH:e,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:o}=Z,i=J;t=r.exports={};const c=t.re=[],m=t.safeRe=[],a=t.src=[],s=t.t={};let l=0;const f="[a-zA-Z0-9-]",S=[["\\s",1],["\\d",o],[f,n]],h=A=>{for(const[P,_]of S)A=A.split(`${P}*`).join(`${P}{0,${_}}`).split(`${P}+`).join(`${P}{1,${_}}`);return A},d=(A,P,_)=>{const re=h(P),w=l++;i(A,w,P),s[A]=w,a[w]=P,c[w]=new RegExp(P,_?"g":void 0),m[w]=new RegExp(re,_?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","\\d+"),d("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),d("MAINVERSION",`(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})`),d("MAINVERSIONLOOSE",`(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASEIDENTIFIER",`(?:${a[s.NUMERICIDENTIFIER]}|${a[s.NONNUMERICIDENTIFIER]})`),d("PRERELEASEIDENTIFIERLOOSE",`(?:${a[s.NUMERICIDENTIFIERLOOSE]}|${a[s.NONNUMERICIDENTIFIER]})`),d("PRERELEASE",`(?:-(${a[s.PRERELEASEIDENTIFIER]}(?:\\.${a[s.PRERELEASEIDENTIFIER]})*))`),d("PRERELEASELOOSE",`(?:-?(${a[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[s.PRERELEASEIDENTIFIERLOOSE]})*))`),d("BUILDIDENTIFIER",`${f}+`),d("BUILD",`(?:\\+(${a[s.BUILDIDENTIFIER]}(?:\\.${a[s.BUILDIDENTIFIER]})*))`),d("FULLPLAIN",`v?${a[s.MAINVERSION]}${a[s.PRERELEASE]}?${a[s.BUILD]}?`),d("FULL",`^${a[s.FULLPLAIN]}$`),d("LOOSEPLAIN",`[v=\\s]*${a[s.MAINVERSIONLOOSE]}${a[s.PRERELEASELOOSE]}?${a[s.BUILD]}?`),d("LOOSE",`^${a[s.LOOSEPLAIN]}$`),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE",`${a[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),d("XRANGEIDENTIFIER",`${a[s.NUMERICIDENTIFIER]}|x|X|\\*`),d("XRANGEPLAIN",`[v=\\s]*(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:${a[s.PRERELEASE]})?${a[s.BUILD]}?)?)?`),d("XRANGEPLAINLOOSE",`[v=\\s]*(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:${a[s.PRERELEASELOOSE]})?${a[s.BUILD]}?)?)?`),d("XRANGE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAIN]}$`),d("XRANGELOOSE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAINLOOSE]}$`),d("COERCEPLAIN",`(^|[^\\d])(\\d{1,${e}})(?:\\.(\\d{1,${e}}))?(?:\\.(\\d{1,${e}}))?`),d("COERCE",`${a[s.COERCEPLAIN]}(?:$|[^\\d])`),d("COERCEFULL",a[s.COERCEPLAIN]+`(?:${a[s.PRERELEASE]})?(?:${a[s.BUILD]})?(?:$|[^\\d])`),d("COERCERTL",a[s.COERCE],!0),d("COERCERTLFULL",a[s.COERCEFULL],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM",`(\\s*)${a[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",d("TILDE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAIN]}$`),d("TILDELOOSE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAINLOOSE]}$`),d("LONECARET","(?:\\^)"),d("CARETTRIM",`(\\s*)${a[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",d("CARET",`^${a[s.LONECARET]}${a[s.XRANGEPLAIN]}$`),d("CARETLOOSE",`^${a[s.LONECARET]}${a[s.XRANGEPLAINLOOSE]}$`),d("COMPARATORLOOSE",`^${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]})$|^$`),d("COMPARATOR",`^${a[s.GTLT]}\\s*(${a[s.FULLPLAIN]})$|^$`),d("COMPARATORTRIM",`(\\s*)${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]}|${a[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE",`^\\s*(${a[s.XRANGEPLAIN]})\\s+-\\s+(${a[s.XRANGEPLAIN]})\\s*$`),d("HYPHENRANGELOOSE",`^\\s*(${a[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[s.XRANGEPLAINLOOSE]})\\s*$`),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(fe,fe.exports);var M=fe.exports;const bt=Object.freeze({loose:!0}),Dt=Object.freeze({}),Ut=r=>r?typeof r!="object"?bt:r:Dt;var pe=Ut;const we=/^[0-9]+$/,et=(r,t)=>{const e=we.test(r),n=we.test(t);return e&&n&&(r=+r,t=+t),r===t?0:e&&!n?-1:n&&!e?1:r<t?-1:1},xt=(r,t)=>et(t,r);var tt={compareIdentifiers:et,rcompareIdentifiers:xt};const H=J,{MAX_LENGTH:Oe,MAX_SAFE_INTEGER:q}=Z,{safeRe:Te,t:Ae}=M,Ft=pe,{compareIdentifiers:X}=tt;let Gt=class U{constructor(t,e){if(e=Ft(e),t instanceof U){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Oe)throw new TypeError(`version is longer than ${Oe} characters`);H("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const n=t.trim().match(e.loose?Te[Ae.LOOSE]:Te[Ae.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>q||this.major<0)throw new TypeError("Invalid major version");if(this.minor>q||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>q||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(o=>{if(/^[0-9]+$/.test(o)){const i=+o;if(i>=0&&i<q)return i}return o}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(H("SemVer.compare",this.version,this.options,t),!(t instanceof U)){if(typeof t=="string"&&t===this.version)return 0;t=new U(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof U||(t=new U(t,this.options)),X(this.major,t.major)||X(this.minor,t.minor)||X(this.patch,t.patch)}comparePre(t){if(t instanceof U||(t=new U(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const n=this.prerelease[e],o=t.prerelease[e];if(H("prerelease compare",e,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return X(n,o)}while(++e)}compareBuild(t){t instanceof U||(t=new U(t,this.options));let e=0;do{const n=this.build[e],o=t.build[e];if(H("build compare",e,n,o),n===void 0&&o===void 0)return 0;if(o===void 0)return 1;if(n===void 0)return-1;if(n===o)continue;return X(n,o)}while(++e)}inc(t,e,n){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e,n),this.inc("pre",e,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",e,n),this.inc("pre",e,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const o=Number(n)?1:0;if(!e&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[o];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(e===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(o)}}if(e){let i=[e,o];n===!1&&(i=[e]),X(this.prerelease[0],e)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var y=Gt;const ye=y,jt=(r,t,e=!1)=>{if(r instanceof ye)return r;try{return new ye(r,t)}catch(n){if(!e)return null;throw n}};var V=jt;const Xt=V,Vt=(r,t)=>{const e=Xt(r,t);return e?e.version:null};var kt=Vt;const Bt=V,Mt=(r,t)=>{const e=Bt(r.trim().replace(/^[=v]+/,""),t);return e?e.version:null};var Ht=Mt;const Pe=y,qt=(r,t,e,n,o)=>{typeof e=="string"&&(o=n,n=e,e=void 0);try{return new Pe(r instanceof Pe?r.version:r,e).inc(t,n,o).version}catch{return null}};var zt=qt;const _e=V,Yt=(r,t)=>{const e=_e(r,null,!0),n=_e(t,null,!0),o=e.compare(n);if(o===0)return null;const i=o>0,c=i?e:n,m=i?n:e,a=!!c.prerelease.length;if(!!m.prerelease.length&&!a)return!m.patch&&!m.minor?"major":c.patch?"patch":c.minor?"minor":"major";const l=a?"pre":"";return e.major!==n.major?l+"major":e.minor!==n.minor?l+"minor":e.patch!==n.patch?l+"patch":"prerelease"};var Wt=Yt;const Kt=y,Zt=(r,t)=>new Kt(r,t).major;var Jt=Zt;const Qt=y,er=(r,t)=>new Qt(r,t).minor;var tr=er;const rr=y,nr=(r,t)=>new rr(r,t).patch;var sr=nr;const ir=V,ar=(r,t)=>{const e=ir(r,t);return e&&e.prerelease.length?e.prerelease:null};var or=ar;const Ce=y,cr=(r,t,e)=>new Ce(r,e).compare(new Ce(t,e));var b=cr;const lr=b,ur=(r,t,e)=>lr(t,r,e);var fr=ur;const hr=b,Er=(r,t)=>hr(r,t,!0);var dr=Er;const be=y,pr=(r,t,e)=>{const n=new be(r,e),o=new be(t,e);return n.compare(o)||n.compareBuild(o)};var $e=pr;const $r=$e,mr=(r,t)=>r.sort((e,n)=>$r(e,n,t));var vr=mr;const Rr=$e,Ir=(r,t)=>r.sort((e,n)=>Rr(n,e,t));var Sr=Ir;const gr=b,Lr=(r,t,e)=>gr(r,t,e)>0;var Q=Lr;const Nr=b,wr=(r,t,e)=>Nr(r,t,e)<0;var me=wr;const Or=b,Tr=(r,t,e)=>Or(r,t,e)===0;var rt=Tr;const Ar=b,yr=(r,t,e)=>Ar(r,t,e)!==0;var nt=yr;const Pr=b,_r=(r,t,e)=>Pr(r,t,e)>=0;var ve=_r;const Cr=b,br=(r,t,e)=>Cr(r,t,e)<=0;var Re=br;const Dr=rt,Ur=nt,xr=Q,Fr=ve,Gr=me,jr=Re,Xr=(r,t,e,n)=>{switch(t){case"===":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r===e;case"!==":return typeof r=="object"&&(r=r.version),typeof e=="object"&&(e=e.version),r!==e;case"":case"=":case"==":return Dr(r,e,n);case"!=":return Ur(r,e,n);case">":return xr(r,e,n);case">=":return Fr(r,e,n);case"<":return Gr(r,e,n);case"<=":return jr(r,e,n);default:throw new TypeError(`Invalid operator: ${t}`)}};var st=Xr;const Vr=y,kr=V,{safeRe:z,t:Y}=M,Br=(r,t)=>{if(r instanceof Vr)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;t=t||{};let e=null;if(!t.rtl)e=r.match(t.includePrerelease?z[Y.COERCEFULL]:z[Y.COERCE]);else{const a=t.includePrerelease?z[Y.COERCERTLFULL]:z[Y.COERCERTL];let s;for(;(s=a.exec(r))&&(!e||e.index+e[0].length!==r.length);)(!e||s.index+s[0].length!==e.index+e[0].length)&&(e=s),a.lastIndex=s.index+s[1].length+s[2].length;a.lastIndex=-1}if(e===null)return null;const n=e[2],o=e[3]||"0",i=e[4]||"0",c=t.includePrerelease&&e[5]?`-${e[5]}`:"",m=t.includePrerelease&&e[6]?`+${e[6]}`:"";return kr(`${n}.${o}.${i}${c}${m}`,t)};var Mr=Br;class Hr{constructor(){this.max=1e3,this.map=new Map}get(t){const e=this.map.get(t);if(e!==void 0)return this.map.delete(t),this.map.set(t,e),e}delete(t){return this.map.delete(t)}set(t,e){if(!this.delete(t)&&e!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(t,e)}return this}}var qr=Hr,se,De;function D(){if(De)return se;De=1;const r=/\s+/g;class t{constructor(u,v){if(v=o(v),u instanceof t)return u.loose===!!v.loose&&u.includePrerelease===!!v.includePrerelease?u:new t(u.raw,v);if(u instanceof i)return this.raw=u.value,this.set=[[u]],this.formatted=void 0,this;if(this.options=v,this.loose=!!v.loose,this.includePrerelease=!!v.includePrerelease,this.raw=u.trim().replace(r," "),this.set=this.raw.split("||").map(p=>this.parseRange(p.trim())).filter(p=>p.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const p=this.set[0];if(this.set=this.set.filter(R=>!A(R[0])),this.set.length===0)this.set=[p];else if(this.set.length>1){for(const R of this.set)if(R.length===1&&P(R[0])){this.set=[R];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let u=0;u<this.set.length;u++){u>0&&(this.formatted+="||");const v=this.set[u];for(let p=0;p<v.length;p++)p>0&&(this.formatted+=" "),this.formatted+=v[p].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(u){const p=((this.options.includePrerelease&&h)|(this.options.loose&&d))+":"+u,R=n.get(p);if(R)return R;const $=this.options.loose,I=$?a[s.HYPHENRANGELOOSE]:a[s.HYPHENRANGE];u=u.replace(I,$t(this.options.includePrerelease)),c("hyphen replace",u),u=u.replace(a[s.COMPARATORTRIM],l),c("comparator trim",u),u=u.replace(a[s.TILDETRIM],f),c("tilde trim",u),u=u.replace(a[s.CARETTRIM],S),c("caret trim",u);let L=u.split(" ").map(O=>re(O,this.options)).join(" ").split(/\s+/).map(O=>pt(O,this.options));$&&(L=L.filter(O=>(c("loose invalid filter",O,this.options),!!O.match(a[s.COMPARATORLOOSE])))),c("range list",L);const g=new Map,N=L.map(O=>new i(O,this.options));for(const O of N){if(A(O))return[O];g.set(O.value,O)}g.size>1&&g.has("")&&g.delete("");const C=[...g.values()];return n.set(p,C),C}intersects(u,v){if(!(u instanceof t))throw new TypeError("a Range is required");return this.set.some(p=>_(p,v)&&u.set.some(R=>_(R,v)&&p.every($=>R.every(I=>$.intersects(I,v)))))}test(u){if(!u)return!1;if(typeof u=="string")try{u=new m(u,this.options)}catch{return!1}for(let v=0;v<this.set.length;v++)if(mt(this.set[v],u,this.options))return!0;return!1}}se=t;const e=qr,n=new e,o=pe,i=ee(),c=J,m=y,{safeRe:a,t:s,comparatorTrimReplace:l,tildeTrimReplace:f,caretTrimReplace:S}=M,{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:d}=Z,A=E=>E.value==="<0.0.0-0",P=E=>E.value==="",_=(E,u)=>{let v=!0;const p=E.slice();let R=p.pop();for(;v&&p.length;)v=p.every($=>R.intersects($,u)),R=p.pop();return v},re=(E,u)=>(c("comp",E,u),E=ut(E,u),c("caret",E),E=ct(E,u),c("tildes",E),E=ht(E,u),c("xrange",E),E=dt(E,u),c("stars",E),E),w=E=>!E||E.toLowerCase()==="x"||E==="*",ct=(E,u)=>E.trim().split(/\s+/).map(v=>lt(v,u)).join(" "),lt=(E,u)=>{const v=u.loose?a[s.TILDELOOSE]:a[s.TILDE];return E.replace(v,(p,R,$,I,L)=>{c("tilde",E,p,R,$,I,L);let g;return w(R)?g="":w($)?g=`>=${R}.0.0 <${+R+1}.0.0-0`:w(I)?g=`>=${R}.${$}.0 <${R}.${+$+1}.0-0`:L?(c("replaceTilde pr",L),g=`>=${R}.${$}.${I}-${L} <${R}.${+$+1}.0-0`):g=`>=${R}.${$}.${I} <${R}.${+$+1}.0-0`,c("tilde return",g),g})},ut=(E,u)=>E.trim().split(/\s+/).map(v=>ft(v,u)).join(" "),ft=(E,u)=>{c("caret",E,u);const v=u.loose?a[s.CARETLOOSE]:a[s.CARET],p=u.includePrerelease?"-0":"";return E.replace(v,(R,$,I,L,g)=>{c("caret",E,R,$,I,L,g);let N;return w($)?N="":w(I)?N=`>=${$}.0.0${p} <${+$+1}.0.0-0`:w(L)?$==="0"?N=`>=${$}.${I}.0${p} <${$}.${+I+1}.0-0`:N=`>=${$}.${I}.0${p} <${+$+1}.0.0-0`:g?(c("replaceCaret pr",g),$==="0"?I==="0"?N=`>=${$}.${I}.${L}-${g} <${$}.${I}.${+L+1}-0`:N=`>=${$}.${I}.${L}-${g} <${$}.${+I+1}.0-0`:N=`>=${$}.${I}.${L}-${g} <${+$+1}.0.0-0`):(c("no pr"),$==="0"?I==="0"?N=`>=${$}.${I}.${L}${p} <${$}.${I}.${+L+1}-0`:N=`>=${$}.${I}.${L}${p} <${$}.${+I+1}.0-0`:N=`>=${$}.${I}.${L} <${+$+1}.0.0-0`),c("caret return",N),N})},ht=(E,u)=>(c("replaceXRanges",E,u),E.split(/\s+/).map(v=>Et(v,u)).join(" ")),Et=(E,u)=>{E=E.trim();const v=u.loose?a[s.XRANGELOOSE]:a[s.XRANGE];return E.replace(v,(p,R,$,I,L,g)=>{c("xRange",E,p,R,$,I,L,g);const N=w($),C=N||w(I),O=C||w(L),k=O;return R==="="&&k&&(R=""),g=u.includePrerelease?"-0":"",N?R===">"||R==="<"?p="<0.0.0-0":p="*":R&&k?(C&&(I=0),L=0,R===">"?(R=">=",C?($=+$+1,I=0,L=0):(I=+I+1,L=0)):R==="<="&&(R="<",C?$=+$+1:I=+I+1),R==="<"&&(g="-0"),p=`${R+$}.${I}.${L}${g}`):C?p=`>=${$}.0.0${g} <${+$+1}.0.0-0`:O&&(p=`>=${$}.${I}.0${g} <${$}.${+I+1}.0-0`),c("xRange return",p),p})},dt=(E,u)=>(c("replaceStars",E,u),E.trim().replace(a[s.STAR],"")),pt=(E,u)=>(c("replaceGTE0",E,u),E.trim().replace(a[u.includePrerelease?s.GTE0PRE:s.GTE0],"")),$t=E=>(u,v,p,R,$,I,L,g,N,C,O,k)=>(w(p)?v="":w(R)?v=`>=${p}.0.0${E?"-0":""}`:w($)?v=`>=${p}.${R}.0${E?"-0":""}`:I?v=`>=${v}`:v=`>=${v}${E?"-0":""}`,w(N)?g="":w(C)?g=`<${+N+1}.0.0-0`:w(O)?g=`<${N}.${+C+1}.0-0`:k?g=`<=${N}.${C}.${O}-${k}`:E?g=`<${N}.${C}.${+O+1}-0`:g=`<=${g}`,`${v} ${g}`.trim()),mt=(E,u,v)=>{for(let p=0;p<E.length;p++)if(!E[p].test(u))return!1;if(u.prerelease.length&&!v.includePrerelease){for(let p=0;p<E.length;p++)if(c(E[p].semver),E[p].semver!==i.ANY&&E[p].semver.prerelease.length>0){const R=E[p].semver;if(R.major===u.major&&R.minor===u.minor&&R.patch===u.patch)return!0}return!1}return!0};return se}var ie,Ue;function ee(){if(Ue)return ie;Ue=1;const r=Symbol("SemVer ANY");class t{static get ANY(){return r}constructor(l,f){if(f=e(f),l instanceof t){if(l.loose===!!f.loose)return l;l=l.value}l=l.trim().split(/\s+/).join(" "),c("comparator",l,f),this.options=f,this.loose=!!f.loose,this.parse(l),this.semver===r?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(l){const f=this.options.loose?n[o.COMPARATORLOOSE]:n[o.COMPARATOR],S=l.match(f);if(!S)throw new TypeError(`Invalid comparator: ${l}`);this.operator=S[1]!==void 0?S[1]:"",this.operator==="="&&(this.operator=""),S[2]?this.semver=new m(S[2],this.options.loose):this.semver=r}toString(){return this.value}test(l){if(c("Comparator.test",l,this.options.loose),this.semver===r||l===r)return!0;if(typeof l=="string")try{l=new m(l,this.options)}catch{return!1}return i(l,this.operator,this.semver,this.options)}intersects(l,f){if(!(l instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new a(l.value,f).test(this.value):l.operator===""?l.value===""?!0:new a(this.value,f).test(l.semver):(f=e(f),f.includePrerelease&&(this.value==="<0.0.0-0"||l.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||l.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&l.operator.startsWith(">")||this.operator.startsWith("<")&&l.operator.startsWith("<")||this.semver.version===l.semver.version&&this.operator.includes("=")&&l.operator.includes("=")||i(this.semver,"<",l.semver,f)&&this.operator.startsWith(">")&&l.operator.startsWith("<")||i(this.semver,">",l.semver,f)&&this.operator.startsWith("<")&&l.operator.startsWith(">")))}}ie=t;const e=pe,{safeRe:n,t:o}=M,i=st,c=J,m=y,a=D();return ie}const zr=D(),Yr=(r,t,e)=>{try{t=new zr(t,e)}catch{return!1}return t.test(r)};var te=Yr;const Wr=D(),Kr=(r,t)=>new Wr(r,t).set.map(e=>e.map(n=>n.value).join(" ").trim().split(" "));var Zr=Kr;const Jr=y,Qr=D(),en=(r,t,e)=>{let n=null,o=null,i=null;try{i=new Qr(t,e)}catch{return null}return r.forEach(c=>{i.test(c)&&(!n||o.compare(c)===-1)&&(n=c,o=new Jr(n,e))}),n};var tn=en;const rn=y,nn=D(),sn=(r,t,e)=>{let n=null,o=null,i=null;try{i=new nn(t,e)}catch{return null}return r.forEach(c=>{i.test(c)&&(!n||o.compare(c)===1)&&(n=c,o=new rn(n,e))}),n};var an=sn;const ae=y,on=D(),xe=Q,cn=(r,t)=>{r=new on(r,t);let e=new ae("0.0.0");if(r.test(e)||(e=new ae("0.0.0-0"),r.test(e)))return e;e=null;for(let n=0;n<r.set.length;++n){const o=r.set[n];let i=null;o.forEach(c=>{const m=new ae(c.semver.version);switch(c.operator){case">":m.prerelease.length===0?m.patch++:m.prerelease.push(0),m.raw=m.format();case"":case">=":(!i||xe(m,i))&&(i=m);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${c.operator}`)}}),i&&(!e||xe(e,i))&&(e=i)}return e&&r.test(e)?e:null};var ln=cn;const un=D(),fn=(r,t)=>{try{return new un(r,t).range||"*"}catch{return null}};var hn=fn;const En=y,it=ee(),{ANY:dn}=it,pn=D(),$n=te,Fe=Q,Ge=me,mn=Re,vn=ve,Rn=(r,t,e,n)=>{r=new En(r,n),t=new pn(t,n);let o,i,c,m,a;switch(e){case">":o=Fe,i=mn,c=Ge,m=">",a=">=";break;case"<":o=Ge,i=vn,c=Fe,m="<",a="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if($n(r,t,n))return!1;for(let s=0;s<t.set.length;++s){const l=t.set[s];let f=null,S=null;if(l.forEach(h=>{h.semver===dn&&(h=new it(">=0.0.0")),f=f||h,S=S||h,o(h.semver,f.semver,n)?f=h:c(h.semver,S.semver,n)&&(S=h)}),f.operator===m||f.operator===a||(!S.operator||S.operator===m)&&i(r,S.semver))return!1;if(S.operator===a&&c(r,S.semver))return!1}return!0};var Ie=Rn;const In=Ie,Sn=(r,t,e)=>In(r,t,">",e);var gn=Sn;const Ln=Ie,Nn=(r,t,e)=>Ln(r,t,"<",e);var wn=Nn;const je=D(),On=(r,t,e)=>(r=new je(r,e),t=new je(t,e),r.intersects(t,e));var Tn=On;const An=te,yn=b;var Pn=(r,t,e)=>{const n=[];let o=null,i=null;const c=r.sort((l,f)=>yn(l,f,e));for(const l of c)An(l,t,e)?(i=l,o||(o=l)):(i&&n.push([o,i]),i=null,o=null);o&&n.push([o,null]);const m=[];for(const[l,f]of n)l===f?m.push(l):!f&&l===c[0]?m.push("*"):f?l===c[0]?m.push(`<=${f}`):m.push(`${l} - ${f}`):m.push(`>=${l}`);const a=m.join(" || "),s=typeof t.raw=="string"?t.raw:String(t);return a.length<s.length?a:t};const Xe=D(),Se=ee(),{ANY:oe}=Se,B=te,ge=b,_n=(r,t,e={})=>{if(r===t)return!0;r=new Xe(r,e),t=new Xe(t,e);let n=!1;e:for(const o of r.set){for(const i of t.set){const c=bn(o,i,e);if(n=n||c!==null,c)continue e}if(n)return!1}return!0},Cn=[new Se(">=0.0.0-0")],Ve=[new Se(">=0.0.0")],bn=(r,t,e)=>{if(r===t)return!0;if(r.length===1&&r[0].semver===oe){if(t.length===1&&t[0].semver===oe)return!0;e.includePrerelease?r=Cn:r=Ve}if(t.length===1&&t[0].semver===oe){if(e.includePrerelease)return!0;t=Ve}const n=new Set;let o,i;for(const h of r)h.operator===">"||h.operator===">="?o=ke(o,h,e):h.operator==="<"||h.operator==="<="?i=Be(i,h,e):n.add(h.semver);if(n.size>1)return null;let c;if(o&&i){if(c=ge(o.semver,i.semver,e),c>0)return null;if(c===0&&(o.operator!==">="||i.operator!=="<="))return null}for(const h of n){if(o&&!B(h,String(o),e)||i&&!B(h,String(i),e))return null;for(const d of t)if(!B(h,String(d),e))return!1;return!0}let m,a,s,l,f=i&&!e.includePrerelease&&i.semver.prerelease.length?i.semver:!1,S=o&&!e.includePrerelease&&o.semver.prerelease.length?o.semver:!1;f&&f.prerelease.length===1&&i.operator==="<"&&f.prerelease[0]===0&&(f=!1);for(const h of t){if(l=l||h.operator===">"||h.operator===">=",s=s||h.operator==="<"||h.operator==="<=",o){if(S&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===S.major&&h.semver.minor===S.minor&&h.semver.patch===S.patch&&(S=!1),h.operator===">"||h.operator===">="){if(m=ke(o,h,e),m===h&&m!==o)return!1}else if(o.operator===">="&&!B(o.semver,String(h),e))return!1}if(i){if(f&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===f.major&&h.semver.minor===f.minor&&h.semver.patch===f.patch&&(f=!1),h.operator==="<"||h.operator==="<="){if(a=Be(i,h,e),a===h&&a!==i)return!1}else if(i.operator==="<="&&!B(i.semver,String(h),e))return!1}if(!h.operator&&(i||o)&&c!==0)return!1}return!(o&&s&&!i&&c!==0||i&&l&&!o&&c!==0||S||f)},ke=(r,t,e)=>{if(!r)return t;const n=ge(r.semver,t.semver,e);return n>0?r:n<0||t.operator===">"&&r.operator===">="?t:r},Be=(r,t,e)=>{if(!r)return t;const n=ge(r.semver,t.semver,e);return n<0?r:n>0||t.operator==="<"&&r.operator==="<="?t:r};var Dn=_n;const ce=M,Me=Z,Un=y,He=tt,xn=V,Fn=kt,Gn=Ht,jn=zt,Xn=Wt,Vn=Jt,kn=tr,Bn=sr,Mn=or,Hn=b,qn=fr,zn=dr,Yn=$e,Wn=vr,Kn=Sr,Zn=Q,Jn=me,Qn=rt,es=nt,ts=ve,rs=Re,ns=st,ss=Mr,is=ee(),as=D(),os=te,cs=Zr,ls=tn,us=an,fs=ln,hs=hn,Es=Ie,ds=gn,ps=wn,$s=Tn,ms=Pn,vs=Dn;var Rs={parse:xn,valid:Fn,clean:Gn,inc:jn,diff:Xn,major:Vn,minor:kn,patch:Bn,prerelease:Mn,compare:Hn,rcompare:qn,compareLoose:zn,compareBuild:Yn,sort:Wn,rsort:Kn,gt:Zn,lt:Jn,eq:Qn,neq:es,gte:ts,lte:rs,cmp:ns,coerce:ss,Comparator:is,Range:as,satisfies:os,toComparators:cs,maxSatisfying:ls,minSatisfying:us,minVersion:fs,validRange:hs,outside:Es,gtr:ds,ltr:ps,intersects:$s,simplifyRange:ms,subset:vs,SemVer:Un,re:ce.re,src:ce.src,tokens:ce.t,SEMVER_SPEC_VERSION:Me.SEMVER_SPEC_VERSION,RELEASE_TYPES:Me.RELEASE_TYPES,compareIdentifiers:He.compareIdentifiers,rcompareIdentifiers:He.rcompareIdentifiers};const qe=Ze(Rs);var he=function(){return he=Object.assign||function(r){for(var t,e=1,n=arguments.length;e<n;e++){t=arguments[e];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=t[o])}return r},he.apply(this,arguments)},j,T;(function(r){r.blue="blue",r.nanoS="nanoS",r.nanoSP="nanoSP",r.nanoX="nanoX",r.nanoFTS="nanoFTS"})(T||(T={}));var Ee=(j={},j[T.blue]={id:T.blue,productName:"Ledger Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,masks:[822083584,822149120],getBlockSize:function(r){return 4*1024}},j[T.nanoS]={id:T.nanoS,productName:"Ledger Nano S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,masks:[823132160],getBlockSize:function(r){var t;return qe.lt((t=qe.coerce(r))!==null&&t!==void 0?t:"","2.0.0")?4*1024:2*1024}},j[T.nanoSP]={id:T.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1536*1024,masks:[856686592],getBlockSize:function(r){return 32}},j[T.nanoX]={id:T.nanoX,productName:"Ledger Nano X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,masks:[855638016],getBlockSize:function(r){return 4*1024},bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},j[T.nanoFTS]={id:T.nanoFTS,productName:"Ledger Nano FTS",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:2*1024*1024,masks:[857735168],getBlockSize:function(r){return 4*1024},bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},j);T.blue,T.nanoS,T.nanoSP,T.nanoX,T.nanoFTS;var ze=Object.values(Ee),at=11415,Ye=function(r){var t=ze.find(function(o){return o.legacyUsbProductId===r});if(t)return t;var e=r>>8,n=ze.find(function(o){return o.productIdMM===e});return n},Is=[],We={};for(var Ss in Ee){var Ke=Ee[Ss],le=Ke.bluetoothSpec;if(le)for(var ue=0;ue<le.length;ue++){var W=le[ue];Is.push(W.serviceUuid),We[W.serviceUuid]=We[W.serviceUuid.replace(/-/g,"")]=he({deviceModel:Ke},W)}}var gs=function(){var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");r(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}}(),F=function(r,t,e,n){function o(i){return i instanceof e?i:new e(function(c){c(i)})}return new(e||(e=Promise))(function(i,c){function m(l){try{s(n.next(l))}catch(f){c(f)}}function a(l){try{s(n.throw(l))}catch(f){c(f)}}function s(l){l.done?i(l.value):o(l.value).then(m,a)}s((n=n.apply(r,t||[])).next())})},G=function(r,t){var e={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,c;return c={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function m(s){return function(l){return a([s,l])}}function a(s){if(n)throw new TypeError("Generator is already executing.");for(;e;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return e.label++,{value:s[1],done:!1};case 5:e.label++,o=s[1],s=[0];continue;case 7:s=e.ops.pop(),e.trys.pop();continue;default:if(i=e.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){e=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){e.label=s[1];break}if(s[0]===6&&e.label<i[1]){e.label=i[1],i=s;break}if(i&&e.label<i[2]){e.label=i[2],e.ops.push(s);break}i[2]&&e.ops.pop(),e.trys.pop();continue}s=t.call(r,e)}catch(l){s=[6,l],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Ls=function(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),o,i=[],c;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(m){c={error:m}}finally{try{o&&!o.done&&(e=n.return)&&e.call(n)}finally{if(c)throw c.error}}return i},Ns=[{vendorId:at}],ws=function(){return Promise.resolve(!!(window.navigator&&window.navigator.hid))},K=function(){var r=navigator.hid;if(!r)throw new Lt("navigator.hid is not supported","HIDNotSupported");return r};function ot(){return F(this,void 0,void 0,function(){var r;return G(this,function(t){switch(t.label){case 0:return[4,K().requestDevice({filters:Ns})];case 1:return r=t.sent(),Array.isArray(r)?[2,r]:[2,[r]]}})})}function de(){return F(this,void 0,void 0,function(){var r;return G(this,function(t){switch(t.label){case 0:return[4,K().getDevices()];case 1:return r=t.sent(),[2,r.filter(function(e){return e.vendorId===at})]}})})}function Os(){return F(this,void 0,void 0,function(){var r,t;return G(this,function(e){switch(e.label){case 0:return[4,de()];case 1:return r=e.sent(),r.length>0?[2,r[0]]:[4,ot()];case 2:return t=e.sent(),[2,t[0]]}})})}var As=function(r){gs(t,r);function t(e){var n=r.call(this)||this;return n.channel=Math.floor(Math.random()*65535),n.packetSize=64,n.inputs=[],n.read=function(){return n.inputs.length?Promise.resolve(n.inputs.shift()):new Promise(function(o){n.inputCallback=o})},n.onInputReport=function(o){var i=x.Buffer.from(o.data.buffer);n.inputCallback?(n.inputCallback(i),n.inputCallback=null):n.inputs.push(i)},n._disconnectEmitted=!1,n._emitDisconnect=function(o){n._disconnectEmitted||(n._disconnectEmitted=!0,n.emit("disconnect",o))},n.exchange=function(o){return F(n,void 0,void 0,function(){var i,c=this;return G(this,function(m){switch(m.label){case 0:return[4,this.exchangeAtomicImpl(function(){return F(c,void 0,void 0,function(){var a,s,l,f,S,h,d,A,P;return G(this,function(_){switch(_.label){case 0:a=this,s=a.channel,l=a.packetSize,Le("apdu","=> "+o.toString("hex")),f=Ot(s,l),S=f.makeBlocks(o),h=0,_.label=1;case 1:return h<S.length?[4,this.device.sendReport(0,S[h])]:[3,4];case 2:_.sent(),_.label=3;case 3:return h++,[3,1];case 4:return(d=f.getReducedResult(A))?[3,6]:[4,this.read()];case 5:return P=_.sent(),A=f.reduceResponse(A,P),[3,4];case 6:return Le("apdu","<= "+d.toString("hex")),[2,d]}})})}).catch(function(a){throw a&&a.message&&a.message.includes("write")?(c._emitDisconnect(a),new St(a.message)):a})];case 1:return i=m.sent(),[2,i]}})})},n.device=e,n.deviceModel=typeof e.productId=="number"?Ye(e.productId):void 0,e.addEventListener("inputreport",n.onInputReport),n}return t.request=function(){return F(this,void 0,void 0,function(){var e,n;return G(this,function(o){switch(o.label){case 0:return[4,ot()];case 1:return e=Ls.apply(void 0,[o.sent(),1]),n=e[0],[2,t.open(n)]}})})},t.openConnected=function(){return F(this,void 0,void 0,function(){var e;return G(this,function(n){switch(n.label){case 0:return[4,de()];case 1:return e=n.sent(),e.length===0?[2,null]:[2,t.open(e[0])]}})})},t.open=function(e){return F(this,void 0,void 0,function(){var n,o;return G(this,function(i){switch(i.label){case 0:return[4,e.open()];case 1:return i.sent(),n=new t(e),o=function(c){e===c.device&&(K().removeEventListener("disconnect",o),n._emitDisconnect(new Nt))},K().addEventListener("disconnect",o),[2,n]}})})},t.prototype.close=function(){return F(this,void 0,void 0,function(){return G(this,function(e){switch(e.label){case 0:return[4,this.exchangeBusyPromise];case 1:return e.sent(),this.device.removeEventListener("inputreport",this.onInputReport),[4,this.device.close()];case 2:return e.sent(),[2]}})})},t.prototype.setScrambleKey=function(){},t.isSupported=ws,t.list=de,t.listen=function(e){var n=!1;Os().then(function(i){if(!i)e.error(new Ne("Access denied to use Ledger device"));else if(!n){var c=typeof i.productId=="number"?Ye(i.productId):void 0;e.next({type:"add",descriptor:i,deviceModel:c}),e.complete()}},function(i){e.error(new Ne(i.message))});function o(){n=!0}return{unsubscribe:o}},t}(gt);export{As as default};
