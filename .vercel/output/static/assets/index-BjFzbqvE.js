import{c as Ne,d as W,e as nl,f as dn,h as il,j as al,t as sl,k as o0,p as rr,r as En,l as Is,n as u0,o as ol,q as cn,s as Wn,u as ul,v as ll}from"./index-BU9jRfPY.js";function l0(e,t){return function(){return e.apply(t,arguments)}}const{toString:dl}=Object.prototype,{getPrototypeOf:Ka}=Object,li=(e=>t=>{const n=dl.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),At=e=>(e=e.toLowerCase(),t=>li(t)===e),di=e=>t=>typeof t===e,{isArray:Mr}=Array,fn=di("undefined");function cl(e){return e!==null&&!fn(e)&&e.constructor!==null&&!fn(e.constructor)&&Et(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const d0=At("ArrayBuffer");function fl(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&d0(e.buffer),t}const hl=di("string"),Et=di("function"),c0=di("number"),ci=e=>e!==null&&typeof e=="object",pl=e=>e===!0||e===!1,On=e=>{if(li(e)!=="object")return!1;const t=Ka(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},yl=At("Date"),vl=At("File"),gl=At("Blob"),ml=At("FileList"),Cl=e=>ci(e)&&Et(e.pipe),El=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Et(e.append)&&((t=li(e))==="formdata"||t==="object"&&Et(e.toString)&&e.toString()==="[object FormData]"))},Sl=At("URLSearchParams"),[$l,bl,xl,Tl]=["ReadableStream","Request","Response","Headers"].map(At),Il=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sn(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Mr(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),s=a.length;let o;for(r=0;r<s;r++)o=a[r],t.call(null,e[o],o,e)}}function f0(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,i;for(;r-- >0;)if(i=n[r],t===i.toLowerCase())return i;return null}const h0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ne,p0=e=>!fn(e)&&e!==h0;function ta(){const{caseless:e}=p0(this)&&this||{},t={},n=(r,i)=>{const a=e&&f0(t,i)||i;On(t[a])&&On(r)?t[a]=ta(t[a],r):On(r)?t[a]=ta({},r):Mr(r)?t[a]=r.slice():t[a]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Sn(arguments[r],n);return t}const Al=(e,t,n,{allOwnKeys:r}={})=>(Sn(t,(i,a)=>{n&&Et(i)?e[a]=l0(i,n):e[a]=i},{allOwnKeys:r}),e),wl=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Bl=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Rl=(e,t,n,r)=>{let i,a,s;const o={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)s=i[a],(!r||r(s,e,t))&&!o[s]&&(t[s]=e[s],o[s]=!0);e=n!==!1&&Ka(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},_l=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Nl=e=>{if(!e)return null;if(Mr(e))return e;let t=e.length;if(!c0(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Pl=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Ka(Uint8Array)),Ll=(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=r.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},Ol=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Dl=At("HTMLFormElement"),kl=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),As=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Ul=At("RegExp"),y0=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Sn(n,(i,a)=>{let s;(s=t(i,a,e))!==!1&&(r[a]=s||i)}),Object.defineProperties(e,r)},Fl=e=>{y0(e,(t,n)=>{if(Et(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Et(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Ml=(e,t)=>{const n={},r=i=>{i.forEach(a=>{n[a]=!0})};return Mr(e)?r(e):r(String(e).split(t)),n},Kl=()=>{},Vl=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,wi="abcdefghijklmnopqrstuvwxyz",ws="0123456789",v0={DIGIT:ws,ALPHA:wi,ALPHA_DIGIT:wi+wi.toUpperCase()+ws},Gl=(e=16,t=v0.ALPHA_DIGIT)=>{let n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n};function Wl(e){return!!(e&&Et(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Hl=e=>{const t=new Array(10),n=(r,i)=>{if(ci(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[i]=r;const a=Mr(r)?[]:{};return Sn(r,(s,o)=>{const l=n(s,i+1);!fn(l)&&(a[o]=l)}),t[i]=void 0,a}}return r};return n(e,0)},ql=At("AsyncFunction"),jl=e=>e&&(ci(e)||Et(e))&&Et(e.then)&&Et(e.catch),A={isArray:Mr,isArrayBuffer:d0,isBuffer:cl,isFormData:El,isArrayBufferView:fl,isString:hl,isNumber:c0,isBoolean:pl,isObject:ci,isPlainObject:On,isReadableStream:$l,isRequest:bl,isResponse:xl,isHeaders:Tl,isUndefined:fn,isDate:yl,isFile:vl,isBlob:gl,isRegExp:Ul,isFunction:Et,isStream:Cl,isURLSearchParams:Sl,isTypedArray:Pl,isFileList:ml,forEach:Sn,merge:ta,extend:Al,trim:Il,stripBOM:wl,inherits:Bl,toFlatObject:Rl,kindOf:li,kindOfTest:At,endsWith:_l,toArray:Nl,forEachEntry:Ll,matchAll:Ol,isHTMLForm:Dl,hasOwnProperty:As,hasOwnProp:As,reduceDescriptors:y0,freezeMethods:Fl,toObjectSet:Ml,toCamelCase:kl,noop:Kl,toFiniteNumber:Vl,findKey:f0,global:h0,isContextDefined:p0,ALPHABET:v0,generateString:Gl,isSpecCompliantForm:Wl,toJSONObject:Hl,isAsyncFn:ql,isThenable:jl};function Y(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}A.inherits(Y,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:A.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const g0=Y.prototype,m0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{m0[e]={value:e}});Object.defineProperties(Y,m0);Object.defineProperty(g0,"isAxiosError",{value:!0});Y.from=(e,t,n,r,i,a)=>{const s=Object.create(g0);return A.toFlatObject(e,s,function(l){return l!==Error.prototype},o=>o!=="isAxiosError"),Y.call(s,e.message,t,n,r,i),s.cause=e,s.name=e.name,a&&Object.assign(s,a),s};const zl=null;function ra(e){return A.isPlainObject(e)||A.isArray(e)}function C0(e){return A.endsWith(e,"[]")?e.slice(0,-2):e}function Bs(e,t,n){return e?e.concat(t).map(function(i,a){return i=C0(i),!n&&a?"["+i+"]":i}).join(n?".":""):t}function Ql(e){return A.isArray(e)&&!e.some(ra)}const Yl=A.toFlatObject(A,{},null,function(t){return/^is[A-Z]/.test(t)});function fi(e,t,n){if(!A.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=A.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,E){return!A.isUndefined(E[m])});const r=n.metaTokens,i=n.visitor||u,a=n.dots,s=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&A.isSpecCompliantForm(t);if(!A.isFunction(i))throw new TypeError("visitor must be a function");function d(h){if(h===null)return"";if(A.isDate(h))return h.toISOString();if(!l&&A.isBlob(h))throw new Y("Blob is not supported. Use a Buffer instead.");return A.isArrayBuffer(h)||A.isTypedArray(h)?l&&typeof Blob=="function"?new Blob([h]):W.Buffer.from(h):h}function u(h,m,E){let b=h;if(h&&!E&&typeof h=="object"){if(A.endsWith(m,"{}"))m=r?m:m.slice(0,-2),h=JSON.stringify(h);else if(A.isArray(h)&&Ql(h)||(A.isFileList(h)||A.endsWith(m,"[]"))&&(b=A.toArray(h)))return m=C0(m),b.forEach(function(x,L){!(A.isUndefined(x)||x===null)&&t.append(s===!0?Bs([m],L,a):s===null?m:m+"[]",d(x))}),!1}return ra(h)?!0:(t.append(Bs(E,m,a),d(h)),!1)}const c=[],f=Object.assign(Yl,{defaultVisitor:u,convertValue:d,isVisitable:ra});function g(h,m){if(!A.isUndefined(h)){if(c.indexOf(h)!==-1)throw Error("Circular reference detected in "+m.join("."));c.push(h),A.forEach(h,function(b,I){(!(A.isUndefined(b)||b===null)&&i.call(t,b,A.isString(I)?I.trim():I,m,f))===!0&&g(b,m?m.concat(I):[I])}),c.pop()}}if(!A.isObject(e))throw new TypeError("data must be an object");return g(e),t}function Rs(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Va(e,t){this._pairs=[],e&&fi(e,this,t)}const E0=Va.prototype;E0.append=function(t,n){this._pairs.push([t,n])};E0.toString=function(t){const n=t?function(r){return t.call(this,r,Rs)}:Rs;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function Xl(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function S0(e,t,n){if(!t)return e;const r=n&&n.encode||Xl,i=n&&n.serialize;let a;if(i?a=i(t,n):a=A.isURLSearchParams(t)?t.toString():new Va(t,n).toString(r),a){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class _s{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){A.forEach(this.handlers,function(r){r!==null&&t(r)})}}const $0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Jl=typeof URLSearchParams<"u"?URLSearchParams:Va,Zl=typeof FormData<"u"?FormData:null,ed=typeof Blob<"u"?Blob:null,td={isBrowser:!0,classes:{URLSearchParams:Jl,FormData:Zl,Blob:ed},protocols:["http","https","file","blob","url","data"]},Ga=typeof window<"u"&&typeof document<"u",rd=(e=>Ga&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),nd=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",id=Ga&&window.location.href||"http://localhost",ad=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ga,hasStandardBrowserEnv:rd,hasStandardBrowserWebWorkerEnv:nd,origin:id},Symbol.toStringTag,{value:"Module"})),Tt={...ad,...td};function sd(e,t){return fi(e,new Tt.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,a){return Tt.isNode&&A.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function od(e){return A.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function ud(e){const t={},n=Object.keys(e);let r;const i=n.length;let a;for(r=0;r<i;r++)a=n[r],t[a]=e[a];return t}function b0(e){function t(n,r,i,a){let s=n[a++];if(s==="__proto__")return!0;const o=Number.isFinite(+s),l=a>=n.length;return s=!s&&A.isArray(i)?i.length:s,l?(A.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!o):((!i[s]||!A.isObject(i[s]))&&(i[s]=[]),t(n,r,i[s],a)&&A.isArray(i[s])&&(i[s]=ud(i[s])),!o)}if(A.isFormData(e)&&A.isFunction(e.entries)){const n={};return A.forEachEntry(e,(r,i)=>{t(od(r),i,n,0)}),n}return null}function ld(e,t,n){if(A.isString(e))try{return(t||JSON.parse)(e),A.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const $n={transitional:$0,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,a=A.isObject(t);if(a&&A.isHTMLForm(t)&&(t=new FormData(t)),A.isFormData(t))return i?JSON.stringify(b0(t)):t;if(A.isArrayBuffer(t)||A.isBuffer(t)||A.isStream(t)||A.isFile(t)||A.isBlob(t)||A.isReadableStream(t))return t;if(A.isArrayBufferView(t))return t.buffer;if(A.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return sd(t,this.formSerializer).toString();if((o=A.isFileList(t))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return fi(o?{"files[]":t}:t,l&&new l,this.formSerializer)}}return a||i?(n.setContentType("application/json",!1),ld(t)):t}],transformResponse:[function(t){const n=this.transitional||$n.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(A.isResponse(t)||A.isReadableStream(t))return t;if(t&&A.isString(t)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(o){if(s)throw o.name==="SyntaxError"?Y.from(o,Y.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Tt.classes.FormData,Blob:Tt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};A.forEach(["delete","get","head","post","put","patch"],e=>{$n.headers[e]={}});const dd=A.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),cd=e=>{const t={};let n,r,i;return e&&e.split(`
`).forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||t[n]&&dd[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},Ns=Symbol("internals");function zr(e){return e&&String(e).trim().toLowerCase()}function Dn(e){return e===!1||e==null?e:A.isArray(e)?e.map(Dn):String(e)}function fd(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}const hd=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Bi(e,t,n,r,i){if(A.isFunction(r))return r.call(this,t,n);if(i&&(t=n),!!A.isString(t)){if(A.isString(r))return t.indexOf(r)!==-1;if(A.isRegExp(r))return r.test(t)}}function pd(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function yd(e,t){const n=A.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(i,a,s){return this[r].call(this,t,i,a,s)},configurable:!0})})}class ut{constructor(t){t&&this.set(t)}set(t,n,r){const i=this;function a(o,l,d){const u=zr(l);if(!u)throw new Error("header name must be a non-empty string");const c=A.findKey(i,u);(!c||i[c]===void 0||d===!0||d===void 0&&i[c]!==!1)&&(i[c||l]=Dn(o))}const s=(o,l)=>A.forEach(o,(d,u)=>a(d,u,l));if(A.isPlainObject(t)||t instanceof this.constructor)s(t,n);else if(A.isString(t)&&(t=t.trim())&&!hd(t))s(cd(t),n);else if(A.isHeaders(t))for(const[o,l]of t.entries())a(l,o,r);else t!=null&&a(n,t,r);return this}get(t,n){if(t=zr(t),t){const r=A.findKey(this,t);if(r){const i=this[r];if(!n)return i;if(n===!0)return fd(i);if(A.isFunction(n))return n.call(this,i,r);if(A.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=zr(t),t){const r=A.findKey(this,t);return!!(r&&this[r]!==void 0&&(!n||Bi(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let i=!1;function a(s){if(s=zr(s),s){const o=A.findKey(r,s);o&&(!n||Bi(r,r[o],o,n))&&(delete r[o],i=!0)}}return A.isArray(t)?t.forEach(a):a(t),i}clear(t){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const a=n[r];(!t||Bi(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const n=this,r={};return A.forEach(this,(i,a)=>{const s=A.findKey(r,a);if(s){n[s]=Dn(i),delete n[a];return}const o=t?pd(a):String(a).trim();o!==a&&delete n[a],n[o]=Dn(i),r[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return A.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=t&&A.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[Ns]=this[Ns]={accessors:{}}).accessors,i=this.prototype;function a(s){const o=zr(s);r[o]||(yd(i,s),r[o]=!0)}return A.isArray(t)?t.forEach(a):a(t),this}}ut.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);A.reduceDescriptors(ut.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[n]=r}}});A.freezeMethods(ut);function Ri(e,t){const n=this||$n,r=t||n,i=ut.from(r.headers);let a=r.data;return A.forEach(e,function(o){a=o.call(n,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function x0(e){return!!(e&&e.__CANCEL__)}function Kr(e,t,n){Y.call(this,e??"canceled",Y.ERR_CANCELED,t,n),this.name="CanceledError"}A.inherits(Kr,Y,{__CANCEL__:!0});function T0(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new Y("Request failed with status code "+n.status,[Y.ERR_BAD_REQUEST,Y.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function vd(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function gd(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i=0,a=0,s;return t=t!==void 0?t:1e3,function(l){const d=Date.now(),u=r[a];s||(s=d),n[i]=l,r[i]=d;let c=a,f=0;for(;c!==i;)f+=n[c++],c=c%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),d-s<t)return;const g=u&&d-u;return g?Math.round(f*1e3/g):void 0}}function md(e,t){let n=0;const r=1e3/t;let i=null;return function(){const s=this===!0,o=Date.now();if(s||o-n>r)return i&&(clearTimeout(i),i=null),n=o,e.apply(null,arguments);i||(i=setTimeout(()=>(i=null,n=Date.now(),e.apply(null,arguments)),r-(o-n)))}}const Hn=(e,t,n=3)=>{let r=0;const i=gd(50,250);return md(a=>{const s=a.loaded,o=a.lengthComputable?a.total:void 0,l=s-r,d=i(l),u=s<=o;r=s;const c={loaded:s,total:o,progress:o?s/o:void 0,bytes:l,rate:d||void 0,estimated:d&&o&&u?(o-s)/d:void 0,event:a,lengthComputable:o!=null};c[t?"download":"upload"]=!0,e(c)},n)},Cd=Tt.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(a){let s=a;return t&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(s){const o=A.isString(s)?i(s):s;return o.protocol===r.protocol&&o.host===r.host}}():function(){return function(){return!0}}(),Ed=Tt.hasStandardBrowserEnv?{write(e,t,n,r,i,a){const s=[e+"="+encodeURIComponent(t)];A.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),A.isString(r)&&s.push("path="+r),A.isString(i)&&s.push("domain="+i),a===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Sd(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function $d(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function I0(e,t){return e&&!Sd(t)?$d(e,t):t}const Ps=e=>e instanceof ut?{...e}:e;function $r(e,t){t=t||{};const n={};function r(d,u,c){return A.isPlainObject(d)&&A.isPlainObject(u)?A.merge.call({caseless:c},d,u):A.isPlainObject(u)?A.merge({},u):A.isArray(u)?u.slice():u}function i(d,u,c){if(A.isUndefined(u)){if(!A.isUndefined(d))return r(void 0,d,c)}else return r(d,u,c)}function a(d,u){if(!A.isUndefined(u))return r(void 0,u)}function s(d,u){if(A.isUndefined(u)){if(!A.isUndefined(d))return r(void 0,d)}else return r(void 0,u)}function o(d,u,c){if(c in t)return r(d,u);if(c in e)return r(void 0,d)}const l={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:o,headers:(d,u)=>i(Ps(d),Ps(u),!0)};return A.forEach(Object.keys(Object.assign({},e,t)),function(u){const c=l[u]||i,f=c(e[u],t[u],u);A.isUndefined(f)&&c!==o||(n[u]=f)}),n}const A0=e=>{const t=$r({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:o}=t;t.headers=s=ut.from(s),t.url=S0(I0(t.baseURL,t.url),e.params,e.paramsSerializer),o&&s.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let l;if(A.isFormData(n)){if(Tt.hasStandardBrowserEnv||Tt.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if((l=s.getContentType())!==!1){const[d,...u]=l?l.split(";").map(c=>c.trim()).filter(Boolean):[];s.setContentType([d||"multipart/form-data",...u].join("; "))}}if(Tt.hasStandardBrowserEnv&&(r&&A.isFunction(r)&&(r=r(t)),r||r!==!1&&Cd(t.url))){const d=i&&a&&Ed.read(a);d&&s.set(i,d)}return t},bd=typeof XMLHttpRequest<"u",xd=bd&&function(e){return new Promise(function(n,r){const i=A0(e);let a=i.data;const s=ut.from(i.headers).normalize();let{responseType:o}=i,l;function d(){i.cancelToken&&i.cancelToken.unsubscribe(l),i.signal&&i.signal.removeEventListener("abort",l)}let u=new XMLHttpRequest;u.open(i.method.toUpperCase(),i.url,!0),u.timeout=i.timeout;function c(){if(!u)return;const g=ut.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders()),m={data:!o||o==="text"||o==="json"?u.responseText:u.response,status:u.status,statusText:u.statusText,headers:g,config:e,request:u};T0(function(b){n(b),d()},function(b){r(b),d()},m),u=null}"onloadend"in u?u.onloadend=c:u.onreadystatechange=function(){!u||u.readyState!==4||u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0)||setTimeout(c)},u.onabort=function(){u&&(r(new Y("Request aborted",Y.ECONNABORTED,i,u)),u=null)},u.onerror=function(){r(new Y("Network Error",Y.ERR_NETWORK,i,u)),u=null},u.ontimeout=function(){let h=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const m=i.transitional||$0;i.timeoutErrorMessage&&(h=i.timeoutErrorMessage),r(new Y(h,m.clarifyTimeoutError?Y.ETIMEDOUT:Y.ECONNABORTED,i,u)),u=null},a===void 0&&s.setContentType(null),"setRequestHeader"in u&&A.forEach(s.toJSON(),function(h,m){u.setRequestHeader(m,h)}),A.isUndefined(i.withCredentials)||(u.withCredentials=!!i.withCredentials),o&&o!=="json"&&(u.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&u.addEventListener("progress",Hn(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",Hn(i.onUploadProgress)),(i.cancelToken||i.signal)&&(l=g=>{u&&(r(!g||g.type?new Kr(null,e,u):g),u.abort(),u=null)},i.cancelToken&&i.cancelToken.subscribe(l),i.signal&&(i.signal.aborted?l():i.signal.addEventListener("abort",l)));const f=vd(i.url);if(f&&Tt.protocols.indexOf(f)===-1){r(new Y("Unsupported protocol "+f+":",Y.ERR_BAD_REQUEST,e));return}u.send(a||null)})},Td=(e,t)=>{let n=new AbortController,r;const i=function(l){if(!r){r=!0,s();const d=l instanceof Error?l:this.reason;n.abort(d instanceof Y?d:new Kr(d instanceof Error?d.message:d))}};let a=t&&setTimeout(()=>{i(new Y(`timeout ${t} of ms exceeded`,Y.ETIMEDOUT))},t);const s=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(l=>{l&&(l.removeEventListener?l.removeEventListener("abort",i):l.unsubscribe(i))}),e=null)};e.forEach(l=>l&&l.addEventListener&&l.addEventListener("abort",i));const{signal:o}=n;return o.unsubscribe=s,[o,()=>{a&&clearTimeout(a),a=null}]},Id=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let r=0,i;for(;r<n;)i=r+t,yield e.slice(r,i),r=i},Ad=async function*(e,t,n){for await(const r of e)yield*Id(ArrayBuffer.isView(r)?r:await n(String(r)),t)},Ls=(e,t,n,r,i)=>{const a=Ad(e,t,i);let s=0;return new ReadableStream({type:"bytes",async pull(o){const{done:l,value:d}=await a.next();if(l){o.close(),r();return}let u=d.byteLength;n&&n(s+=u),o.enqueue(new Uint8Array(d))},cancel(o){return r(o),a.return()}},{highWaterMark:2})},Os=(e,t)=>{const n=e!=null;return r=>setTimeout(()=>t({lengthComputable:n,total:e,loaded:r}))},hi=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",w0=hi&&typeof ReadableStream=="function",na=hi&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),wd=w0&&(()=>{let e=!1;const t=new Request(Tt.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})(),Ds=64*1024,ia=w0&&!!(()=>{try{return A.isReadableStream(new Response("").body)}catch{}})(),qn={stream:ia&&(e=>e.body)};hi&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!qn[t]&&(qn[t]=A.isFunction(e[t])?n=>n[t]():(n,r)=>{throw new Y(`Response type '${t}' is not supported`,Y.ERR_NOT_SUPPORT,r)})})})(new Response);const Bd=async e=>{if(e==null)return 0;if(A.isBlob(e))return e.size;if(A.isSpecCompliantForm(e))return(await new Request(e).arrayBuffer()).byteLength;if(A.isArrayBufferView(e))return e.byteLength;if(A.isURLSearchParams(e)&&(e=e+""),A.isString(e))return(await na(e)).byteLength},Rd=async(e,t)=>{const n=A.toFiniteNumber(e.getContentLength());return n??Bd(t)},_d=hi&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:a,timeout:s,onDownloadProgress:o,onUploadProgress:l,responseType:d,headers:u,withCredentials:c="same-origin",fetchOptions:f}=A0(e);d=d?(d+"").toLowerCase():"text";let[g,h]=i||a||s?Td([i,a],s):[],m,E;const b=()=>{!m&&setTimeout(()=>{g&&g.unsubscribe()}),m=!0};let I;try{if(l&&wd&&n!=="get"&&n!=="head"&&(I=await Rd(u,r))!==0){let _=new Request(t,{method:"POST",body:r,duplex:"half"}),G;A.isFormData(r)&&(G=_.headers.get("content-type"))&&u.setContentType(G),_.body&&(r=Ls(_.body,Ds,Os(I,Hn(l)),null,na))}A.isString(c)||(c=c?"cors":"omit"),E=new Request(t,{...f,signal:g,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",withCredentials:c});let x=await fetch(E);const L=ia&&(d==="stream"||d==="response");if(ia&&(o||L)){const _={};["status","statusText","headers"].forEach(z=>{_[z]=x[z]});const G=A.toFiniteNumber(x.headers.get("content-length"));x=new Response(Ls(x.body,Ds,o&&Os(G,Hn(o,!0)),L&&b,na),_)}d=d||"text";let P=await qn[A.findKey(qn,d)||"text"](x,e);return!L&&b(),h&&h(),await new Promise((_,G)=>{T0(_,G,{data:P,headers:ut.from(x.headers),status:x.status,statusText:x.statusText,config:e,request:E})})}catch(x){throw b(),x&&x.name==="TypeError"&&/fetch/i.test(x.message)?Object.assign(new Y("Network Error",Y.ERR_NETWORK,e,E),{cause:x.cause||x}):Y.from(x,x&&x.code,e,E)}}),aa={http:zl,xhr:xd,fetch:_d};A.forEach(aa,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const ks=e=>`- ${e}`,Nd=e=>A.isFunction(e)||e===null||e===!1,B0={getAdapter:e=>{e=A.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let a=0;a<t;a++){n=e[a];let s;if(r=n,!Nd(n)&&(r=aa[(s=String(n)).toLowerCase()],r===void 0))throw new Y(`Unknown adapter '${s}'`);if(r)break;i[s||"#"+a]=r}if(!r){const a=Object.entries(i).map(([o,l])=>`adapter ${o} `+(l===!1?"is not supported by the environment":"is not available in the build"));let s=t?a.length>1?`since :
`+a.map(ks).join(`
`):" "+ks(a[0]):"as no adapter specified";throw new Y("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return r},adapters:aa};function _i(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Kr(null,e)}function Us(e){return _i(e),e.headers=ut.from(e.headers),e.data=Ri.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),B0.getAdapter(e.adapter||$n.adapter)(e).then(function(r){return _i(e),r.data=Ri.call(e,e.transformResponse,r),r.headers=ut.from(r.headers),r},function(r){return x0(r)||(_i(e),r&&r.response&&(r.response.data=Ri.call(e,e.transformResponse,r.response),r.response.headers=ut.from(r.response.headers))),Promise.reject(r)})}const R0="1.7.2",Wa={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Wa[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Fs={};Wa.transitional=function(t,n,r){function i(a,s){return"[Axios v"+R0+"] Transitional option '"+a+"'"+s+(r?". "+r:"")}return(a,s,o)=>{if(t===!1)throw new Y(i(s," has been removed"+(n?" in "+n:"")),Y.ERR_DEPRECATED);return n&&!Fs[s]&&(Fs[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,s,o):!0}};function Pd(e,t,n){if(typeof e!="object")throw new Y("options must be an object",Y.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const a=r[i],s=t[a];if(s){const o=e[a],l=o===void 0||s(o,a,e);if(l!==!0)throw new Y("option "+a+" must be "+l,Y.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Y("Unknown option "+a,Y.ERR_BAD_OPTION)}}const sa={assertOptions:Pd,validators:Wa},Jt=sa.validators;class Er{constructor(t){this.defaults=t,this.interceptors={request:new _s,response:new _s}}async request(t,n){try{return await this._request(t,n)}catch(r){if(r instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=$r(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:a}=n;r!==void 0&&sa.assertOptions(r,{silentJSONParsing:Jt.transitional(Jt.boolean),forcedJSONParsing:Jt.transitional(Jt.boolean),clarifyTimeoutError:Jt.transitional(Jt.boolean)},!1),i!=null&&(A.isFunction(i)?n.paramsSerializer={serialize:i}:sa.assertOptions(i,{encode:Jt.function,serialize:Jt.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=a&&A.merge(a.common,a[n.method]);a&&A.forEach(["delete","get","head","post","put","patch","common"],h=>{delete a[h]}),n.headers=ut.concat(s,a);const o=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,o.unshift(m.fulfilled,m.rejected))});const d=[];this.interceptors.response.forEach(function(m){d.push(m.fulfilled,m.rejected)});let u,c=0,f;if(!l){const h=[Us.bind(this),void 0];for(h.unshift.apply(h,o),h.push.apply(h,d),f=h.length,u=Promise.resolve(n);c<f;)u=u.then(h[c++],h[c++]);return u}f=o.length;let g=n;for(c=0;c<f;){const h=o[c++],m=o[c++];try{g=h(g)}catch(E){m.call(this,E);break}}try{u=Us.call(this,g)}catch(h){return Promise.reject(h)}for(c=0,f=d.length;c<f;)u=u.then(d[c++],d[c++]);return u}getUri(t){t=$r(this.defaults,t);const n=I0(t.baseURL,t.url);return S0(n,t.params,t.paramsSerializer)}}A.forEach(["delete","get","head","options"],function(t){Er.prototype[t]=function(n,r){return this.request($r(r||{},{method:t,url:n,data:(r||{}).data}))}});A.forEach(["post","put","patch"],function(t){function n(r){return function(a,s,o){return this.request($r(o||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:s}))}}Er.prototype[t]=n(),Er.prototype[t+"Form"]=n(!0)});class Ha{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const s=new Promise(o=>{r.subscribe(o),a=o}).then(i);return s.cancel=function(){r.unsubscribe(a)},s},t(function(a,s,o){r.reason||(r.reason=new Kr(a,s,o),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Ha(function(i){t=i}),cancel:t}}}function Ld(e){return function(n){return e.apply(null,n)}}function Od(e){return A.isObject(e)&&e.isAxiosError===!0}const oa={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(oa).forEach(([e,t])=>{oa[t]=e});function _0(e){const t=new Er(e),n=l0(Er.prototype.request,t);return A.extend(n,Er.prototype,t,{allOwnKeys:!0}),A.extend(n,t,null,{allOwnKeys:!0}),n.create=function(i){return _0($r(e,i))},n}const pe=_0($n);pe.Axios=Er;pe.CanceledError=Kr;pe.CancelToken=Ha;pe.isCancel=x0;pe.VERSION=R0;pe.toFormData=fi;pe.AxiosError=Y;pe.Cancel=pe.CanceledError;pe.all=function(t){return Promise.all(t)};pe.spread=Ld;pe.isAxiosError=Od;pe.mergeConfig=$r;pe.AxiosHeaders=ut;pe.formToJSON=e=>b0(A.isHTMLForm(e)?new FormData(e):e);pe.getAdapter=B0.getAdapter;pe.HttpStatusCode=oa;pe.default=pe;const Dd={},kd=Object.freeze(Object.defineProperty({__proto__:null,default:Dd},Symbol.toStringTag,{value:"Module"})),Ud=nl(kd);var qa=typeof Map=="function"&&Map.prototype,Ni=Object.getOwnPropertyDescriptor&&qa?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,jn=qa&&Ni&&typeof Ni.get=="function"?Ni.get:null,Ms=qa&&Map.prototype.forEach,ja=typeof Set=="function"&&Set.prototype,Pi=Object.getOwnPropertyDescriptor&&ja?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,zn=ja&&Pi&&typeof Pi.get=="function"?Pi.get:null,Ks=ja&&Set.prototype.forEach,Fd=typeof WeakMap=="function"&&WeakMap.prototype,tn=Fd?WeakMap.prototype.has:null,Md=typeof WeakSet=="function"&&WeakSet.prototype,rn=Md?WeakSet.prototype.has:null,Kd=typeof WeakRef=="function"&&WeakRef.prototype,Vs=Kd?WeakRef.prototype.deref:null,Vd=Boolean.prototype.valueOf,Gd=Object.prototype.toString,Wd=Function.prototype.toString,Hd=String.prototype.match,za=String.prototype.slice,nr=String.prototype.replace,qd=String.prototype.toUpperCase,Gs=String.prototype.toLowerCase,N0=RegExp.prototype.test,Ws=Array.prototype.concat,Nt=Array.prototype.join,jd=Array.prototype.slice,Hs=Math.floor,ua=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Li=Object.getOwnPropertySymbols,la=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Lr=typeof Symbol=="function"&&typeof Symbol.iterator=="object",et=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Lr||!0)?Symbol.toStringTag:null,P0=Object.prototype.propertyIsEnumerable,qs=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(e){return e.__proto__}:null);function js(e,t){if(e===1/0||e===-1/0||e!==e||e&&e>-1e3&&e<1e3||N0.call(/e/,t))return t;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof e=="number"){var r=e<0?-Hs(-e):Hs(e);if(r!==e){var i=String(r),a=za.call(t,i.length+1);return nr.call(i,n,"$&_")+"."+nr.call(nr.call(a,/([0-9]{3})/g,"$&_"),/_$/,"")}}return nr.call(t,n,"$&_")}var da=Ud,zs=da.custom,Qs=O0(zs)?zs:null,zd=function e(t,n,r,i){var a=n||{};if(tr(a,"quoteStyle")&&a.quoteStyle!=="single"&&a.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(tr(a,"maxStringLength")&&(typeof a.maxStringLength=="number"?a.maxStringLength<0&&a.maxStringLength!==1/0:a.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=tr(a,"customInspect")?a.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(tr(a,"indent")&&a.indent!==null&&a.indent!=="	"&&!(parseInt(a.indent,10)===a.indent&&a.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(tr(a,"numericSeparator")&&typeof a.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=a.numericSeparator;if(typeof t>"u")return"undefined";if(t===null)return"null";if(typeof t=="boolean")return t?"true":"false";if(typeof t=="string")return k0(t,a);if(typeof t=="number"){if(t===0)return 1/0/t>0?"0":"-0";var l=String(t);return o?js(t,l):l}if(typeof t=="bigint"){var d=String(t)+"n";return o?js(t,d):d}var u=typeof a.depth>"u"?5:a.depth;if(typeof r>"u"&&(r=0),r>=u&&u>0&&typeof t=="object")return ca(t)?"[Array]":"[Object]";var c=fc(a,r);if(typeof i>"u")i=[];else if(D0(i,t)>=0)return"[Circular]";function f(me,Ae,ee){if(Ae&&(i=jd.call(i),i.push(Ae)),ee){var ye={depth:a.depth};return tr(a,"quoteStyle")&&(ye.quoteStyle=a.quoteStyle),e(me,ye,r+1,i)}return e(me,a,r+1,i)}if(typeof t=="function"&&!Ys(t)){var g=nc(t),h=In(t,f);return"[Function"+(g?": "+g:" (anonymous)")+"]"+(h.length>0?" { "+Nt.call(h,", ")+" }":"")}if(O0(t)){var m=Lr?nr.call(String(t),/^(Symbol\(.*\))_[^)]*$/,"$1"):la.call(t);return typeof t=="object"&&!Lr?Qr(m):m}if(lc(t)){for(var E="<"+Gs.call(String(t.nodeName)),b=t.attributes||[],I=0;I<b.length;I++)E+=" "+b[I].name+"="+L0(Qd(b[I].value),"double",a);return E+=">",t.childNodes&&t.childNodes.length&&(E+="..."),E+="</"+Gs.call(String(t.nodeName))+">",E}if(ca(t)){if(t.length===0)return"[]";var x=In(t,f);return c&&!cc(x)?"["+fa(x,c)+"]":"[ "+Nt.call(x,", ")+" ]"}if(Xd(t)){var L=In(t,f);return!("cause"in Error.prototype)&&"cause"in t&&!P0.call(t,"cause")?"{ ["+String(t)+"] "+Nt.call(Ws.call("[cause]: "+f(t.cause),L),", ")+" }":L.length===0?"["+String(t)+"]":"{ ["+String(t)+"] "+Nt.call(L,", ")+" }"}if(typeof t=="object"&&s){if(Qs&&typeof t[Qs]=="function"&&da)return da(t,{depth:u-r});if(s!=="symbol"&&typeof t.inspect=="function")return t.inspect()}if(ic(t)){var P=[];return Ms&&Ms.call(t,function(me,Ae){P.push(f(Ae,t,!0)+" => "+f(me,t))}),Xs("Map",jn.call(t),P,c)}if(oc(t)){var _=[];return Ks&&Ks.call(t,function(me){_.push(f(me,t))}),Xs("Set",zn.call(t),_,c)}if(ac(t))return Oi("WeakMap");if(uc(t))return Oi("WeakSet");if(sc(t))return Oi("WeakRef");if(Zd(t))return Qr(f(Number(t)));if(tc(t))return Qr(f(ua.call(t)));if(ec(t))return Qr(Vd.call(t));if(Jd(t))return Qr(f(String(t)));if(typeof window<"u"&&t===window)return"{ [object Window] }";if(typeof globalThis<"u"&&t===globalThis||typeof dn<"u"&&t===dn)return"{ [object globalThis] }";if(!Yd(t)&&!Ys(t)){var G=In(t,f),z=qs?qs(t)===Object.prototype:t instanceof Object||t.constructor===Object,Z=t instanceof Object?"":"null prototype",ie=!z&&et&&Object(t)===t&&et in t?za.call(fr(t),8,-1):Z?"Object":"",le=z||typeof t.constructor!="function"?"":t.constructor.name?t.constructor.name+" ":"",de=le+(ie||Z?"["+Nt.call(Ws.call([],ie||[],Z||[]),": ")+"] ":"");return G.length===0?de+"{}":c?de+"{"+fa(G,c)+"}":de+"{ "+Nt.call(G,", ")+" }"}return String(t)};function L0(e,t,n){var r=(n.quoteStyle||t)==="double"?'"':"'";return r+e+r}function Qd(e){return nr.call(String(e),/"/g,"&quot;")}function ca(e){return fr(e)==="[object Array]"&&(!et||!(typeof e=="object"&&et in e))}function Yd(e){return fr(e)==="[object Date]"&&(!et||!(typeof e=="object"&&et in e))}function Ys(e){return fr(e)==="[object RegExp]"&&(!et||!(typeof e=="object"&&et in e))}function Xd(e){return fr(e)==="[object Error]"&&(!et||!(typeof e=="object"&&et in e))}function Jd(e){return fr(e)==="[object String]"&&(!et||!(typeof e=="object"&&et in e))}function Zd(e){return fr(e)==="[object Number]"&&(!et||!(typeof e=="object"&&et in e))}function ec(e){return fr(e)==="[object Boolean]"&&(!et||!(typeof e=="object"&&et in e))}function O0(e){if(Lr)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!la)return!1;try{return la.call(e),!0}catch{}return!1}function tc(e){if(!e||typeof e!="object"||!ua)return!1;try{return ua.call(e),!0}catch{}return!1}var rc=Object.prototype.hasOwnProperty||function(e){return e in this};function tr(e,t){return rc.call(e,t)}function fr(e){return Gd.call(e)}function nc(e){if(e.name)return e.name;var t=Hd.call(Wd.call(e),/^function\s*([\w$]+)/);return t?t[1]:null}function D0(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function ic(e){if(!jn||!e||typeof e!="object")return!1;try{jn.call(e);try{zn.call(e)}catch{return!0}return e instanceof Map}catch{}return!1}function ac(e){if(!tn||!e||typeof e!="object")return!1;try{tn.call(e,tn);try{rn.call(e,rn)}catch{return!0}return e instanceof WeakMap}catch{}return!1}function sc(e){if(!Vs||!e||typeof e!="object")return!1;try{return Vs.call(e),!0}catch{}return!1}function oc(e){if(!zn||!e||typeof e!="object")return!1;try{zn.call(e);try{jn.call(e)}catch{return!0}return e instanceof Set}catch{}return!1}function uc(e){if(!rn||!e||typeof e!="object")return!1;try{rn.call(e,rn);try{tn.call(e,tn)}catch{return!0}return e instanceof WeakSet}catch{}return!1}function lc(e){return!e||typeof e!="object"?!1:typeof HTMLElement<"u"&&e instanceof HTMLElement?!0:typeof e.nodeName=="string"&&typeof e.getAttribute=="function"}function k0(e,t){if(e.length>t.maxStringLength){var n=e.length-t.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return k0(za.call(e,0,t.maxStringLength),t)+r}var i=nr.call(nr.call(e,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,dc);return L0(i,"single",t)}function dc(e){var t=e.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[t];return n?"\\"+n:"\\x"+(t<16?"0":"")+qd.call(t.toString(16))}function Qr(e){return"Object("+e+")"}function Oi(e){return e+" { ? }"}function Xs(e,t,n,r){var i=r?fa(n,r):Nt.call(n,", ");return e+" ("+t+") {"+i+"}"}function cc(e){for(var t=0;t<e.length;t++)if(D0(e[t],`
`)>=0)return!1;return!0}function fc(e,t){var n;if(e.indent==="	")n="	";else if(typeof e.indent=="number"&&e.indent>0)n=Nt.call(Array(e.indent+1)," ");else return null;return{base:n,prev:Nt.call(Array(t+1),n)}}function fa(e,t){if(e.length===0)return"";var n=`
`+t.prev+t.base;return n+Nt.call(e,","+n)+`
`+t.prev}function In(e,t){var n=ca(e),r=[];if(n){r.length=e.length;for(var i=0;i<e.length;i++)r[i]=tr(e,i)?t(e[i],e):""}var a=typeof Li=="function"?Li(e):[],s;if(Lr){s={};for(var o=0;o<a.length;o++)s["$"+a[o]]=a[o]}for(var l in e)tr(e,l)&&(n&&String(Number(l))===l&&l<e.length||Lr&&s["$"+l]instanceof Symbol||(N0.call(/[^\w$]/,l)?r.push(t(l,e)+": "+t(e[l],e)):r.push(l+": "+t(e[l],e))));if(typeof Li=="function")for(var d=0;d<a.length;d++)P0.call(e,a[d])&&r.push("["+t(a[d])+"]: "+t(e[a[d]],e));return r}var U0=il,Vr=al,hc=zd,pc=sl,An=U0("%WeakMap%",!0),wn=U0("%Map%",!0),yc=Vr("WeakMap.prototype.get",!0),vc=Vr("WeakMap.prototype.set",!0),gc=Vr("WeakMap.prototype.has",!0),mc=Vr("Map.prototype.get",!0),Cc=Vr("Map.prototype.set",!0),Ec=Vr("Map.prototype.has",!0),Qa=function(e,t){for(var n=e,r;(r=n.next)!==null;n=r)if(r.key===t)return n.next=r.next,r.next=e.next,e.next=r,r},Sc=function(e,t){var n=Qa(e,t);return n&&n.value},$c=function(e,t,n){var r=Qa(e,t);r?r.value=n:e.next={key:t,next:e.next,value:n}},bc=function(e,t){return!!Qa(e,t)},xc=function(){var t,n,r,i={assert:function(a){if(!i.has(a))throw new pc("Side channel does not contain "+hc(a))},get:function(a){if(An&&a&&(typeof a=="object"||typeof a=="function")){if(t)return yc(t,a)}else if(wn){if(n)return mc(n,a)}else if(r)return Sc(r,a)},has:function(a){if(An&&a&&(typeof a=="object"||typeof a=="function")){if(t)return gc(t,a)}else if(wn){if(n)return Ec(n,a)}else if(r)return bc(r,a);return!1},set:function(a,s){An&&a&&(typeof a=="object"||typeof a=="function")?(t||(t=new An),vc(t,a,s)):wn?(n||(n=new wn),Cc(n,a,s)):(r||(r={key:{},next:null}),$c(r,a,s))}};return i},Tc=String.prototype.replace,Ic=/%20/g,Di={RFC1738:"RFC1738",RFC3986:"RFC3986"},Ya={default:Di.RFC3986,formatters:{RFC1738:function(e){return Tc.call(e,Ic,"+")},RFC3986:function(e){return String(e)}},RFC1738:Di.RFC1738,RFC3986:Di.RFC3986},Ac=Ya,ki=Object.prototype.hasOwnProperty,yr=Array.isArray,wt=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),wc=function(t){for(;t.length>1;){var n=t.pop(),r=n.obj[n.prop];if(yr(r)){for(var i=[],a=0;a<r.length;++a)typeof r[a]<"u"&&i.push(r[a]);n.obj[n.prop]=i}}},F0=function(t,n){for(var r=n&&n.plainObjects?{__proto__:null}:{},i=0;i<t.length;++i)typeof t[i]<"u"&&(r[i]=t[i]);return r},Bc=function e(t,n,r){if(!n)return t;if(typeof n!="object"&&typeof n!="function"){if(yr(t))t.push(n);else if(t&&typeof t=="object")(r&&(r.plainObjects||r.allowPrototypes)||!ki.call(Object.prototype,n))&&(t[n]=!0);else return[t,n];return t}if(!t||typeof t!="object")return[t].concat(n);var i=t;return yr(t)&&!yr(n)&&(i=F0(t,r)),yr(t)&&yr(n)?(n.forEach(function(a,s){if(ki.call(t,s)){var o=t[s];o&&typeof o=="object"&&a&&typeof a=="object"?t[s]=e(o,a,r):t.push(a)}else t[s]=a}),t):Object.keys(n).reduce(function(a,s){var o=n[s];return ki.call(a,s)?a[s]=e(a[s],o,r):a[s]=o,a},i)},Rc=function(t,n){return Object.keys(n).reduce(function(r,i){return r[i]=n[i],r},t)},_c=function(e,t,n){var r=e.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},Ui=1024,Nc=function(t,n,r,i,a){if(t.length===0)return t;var s=t;if(typeof t=="symbol"?s=Symbol.prototype.toString.call(t):typeof t!="string"&&(s=String(t)),r==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(g){return"%26%23"+parseInt(g.slice(2),16)+"%3B"});for(var o="",l=0;l<s.length;l+=Ui){for(var d=s.length>=Ui?s.slice(l,l+Ui):s,u=[],c=0;c<d.length;++c){var f=d.charCodeAt(c);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||a===Ac.RFC1738&&(f===40||f===41)){u[u.length]=d.charAt(c);continue}if(f<128){u[u.length]=wt[f];continue}if(f<2048){u[u.length]=wt[192|f>>6]+wt[128|f&63];continue}if(f<55296||f>=57344){u[u.length]=wt[224|f>>12]+wt[128|f>>6&63]+wt[128|f&63];continue}c+=1,f=65536+((f&1023)<<10|d.charCodeAt(c)&1023),u[u.length]=wt[240|f>>18]+wt[128|f>>12&63]+wt[128|f>>6&63]+wt[128|f&63]}o+=u.join("")}return o},Pc=function(t){for(var n=[{obj:{o:t},prop:"o"}],r=[],i=0;i<n.length;++i)for(var a=n[i],s=a.obj[a.prop],o=Object.keys(s),l=0;l<o.length;++l){var d=o[l],u=s[d];typeof u=="object"&&u!==null&&r.indexOf(u)===-1&&(n.push({obj:s,prop:d}),r.push(u))}return wc(n),t},Lc=function(t){return Object.prototype.toString.call(t)==="[object RegExp]"},Oc=function(t){return!t||typeof t!="object"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},Dc=function(t,n){return[].concat(t,n)},kc=function(t,n){if(yr(t)){for(var r=[],i=0;i<t.length;i+=1)r.push(n(t[i]));return r}return n(t)},M0={arrayToObject:F0,assign:Rc,combine:Dc,compact:Pc,decode:_c,encode:Nc,isBuffer:Oc,isRegExp:Lc,maybeMap:kc,merge:Bc},K0=xc,kn=M0,nn=Ya,Uc=Object.prototype.hasOwnProperty,V0={brackets:function(t){return t+"[]"},comma:"comma",indices:function(t,n){return t+"["+n+"]"},repeat:function(t){return t}},_t=Array.isArray,Fc=Array.prototype.push,G0=function(e,t){Fc.apply(e,_t(t)?t:[t])},Mc=Date.prototype.toISOString,Js=nn.default,_e={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:kn.encode,encodeValuesOnly:!1,filter:void 0,format:Js,formatter:nn.formatters[Js],indices:!1,serializeDate:function(t){return Mc.call(t)},skipNulls:!1,strictNullHandling:!1},Kc=function(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||typeof t=="symbol"||typeof t=="bigint"},Fi={},Vc=function e(t,n,r,i,a,s,o,l,d,u,c,f,g,h,m,E,b,I){for(var x=t,L=I,P=0,_=!1;(L=L.get(Fi))!==void 0&&!_;){var G=L.get(t);if(P+=1,typeof G<"u"){if(G===P)throw new RangeError("Cyclic object value");_=!0}typeof L.get(Fi)>"u"&&(P=0)}if(typeof u=="function"?x=u(n,x):x instanceof Date?x=g(x):r==="comma"&&_t(x)&&(x=kn.maybeMap(x,function(Se){return Se instanceof Date?g(Se):Se})),x===null){if(s)return d&&!E?d(n,_e.encoder,b,"key",h):n;x=""}if(Kc(x)||kn.isBuffer(x)){if(d){var z=E?n:d(n,_e.encoder,b,"key",h);return[m(z)+"="+m(d(x,_e.encoder,b,"value",h))]}return[m(n)+"="+m(String(x))]}var Z=[];if(typeof x>"u")return Z;var ie;if(r==="comma"&&_t(x))E&&d&&(x=kn.maybeMap(x,d)),ie=[{value:x.length>0?x.join(",")||null:void 0}];else if(_t(u))ie=u;else{var le=Object.keys(x);ie=c?le.sort(c):le}var de=l?String(n).replace(/\./g,"%2E"):String(n),me=i&&_t(x)&&x.length===1?de+"[]":de;if(a&&_t(x)&&x.length===0)return me+"[]";for(var Ae=0;Ae<ie.length;++Ae){var ee=ie[Ae],ye=typeof ee=="object"&&ee&&typeof ee.value<"u"?ee.value:x[ee];if(!(o&&ye===null)){var V=f&&l?String(ee).replace(/\./g,"%2E"):String(ee),Vt=_t(x)?typeof r=="function"?r(me,V):me:me+(f?"."+V:"["+V+"]");I.set(t,P);var Gt=K0();Gt.set(Fi,I),G0(Z,e(ye,Vt,r,i,a,s,o,l,r==="comma"&&E&&_t(x)?null:d,u,c,f,g,h,m,E,b,Gt))}}return Z},Gc=function(t){if(!t)return _e;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.encodeDotInKeys<"u"&&typeof t.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(t.encoder!==null&&typeof t.encoder<"u"&&typeof t.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=t.charset||_e.charset;if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=nn.default;if(typeof t.format<"u"){if(!Uc.call(nn.formatters,t.format))throw new TypeError("Unknown format option provided.");r=t.format}var i=nn.formatters[r],a=_e.filter;(typeof t.filter=="function"||_t(t.filter))&&(a=t.filter);var s;if(t.arrayFormat in V0?s=t.arrayFormat:"indices"in t?s=t.indices?"indices":"repeat":s=_e.arrayFormat,"commaRoundTrip"in t&&typeof t.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var o=typeof t.allowDots>"u"?t.encodeDotInKeys===!0?!0:_e.allowDots:!!t.allowDots;return{addQueryPrefix:typeof t.addQueryPrefix=="boolean"?t.addQueryPrefix:_e.addQueryPrefix,allowDots:o,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:_e.allowEmptyArrays,arrayFormat:s,charset:n,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:_e.charsetSentinel,commaRoundTrip:!!t.commaRoundTrip,delimiter:typeof t.delimiter>"u"?_e.delimiter:t.delimiter,encode:typeof t.encode=="boolean"?t.encode:_e.encode,encodeDotInKeys:typeof t.encodeDotInKeys=="boolean"?t.encodeDotInKeys:_e.encodeDotInKeys,encoder:typeof t.encoder=="function"?t.encoder:_e.encoder,encodeValuesOnly:typeof t.encodeValuesOnly=="boolean"?t.encodeValuesOnly:_e.encodeValuesOnly,filter:a,format:r,formatter:i,serializeDate:typeof t.serializeDate=="function"?t.serializeDate:_e.serializeDate,skipNulls:typeof t.skipNulls=="boolean"?t.skipNulls:_e.skipNulls,sort:typeof t.sort=="function"?t.sort:null,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:_e.strictNullHandling}},Wc=function(e,t){var n=e,r=Gc(t),i,a;typeof r.filter=="function"?(a=r.filter,n=a("",n)):_t(r.filter)&&(a=r.filter,i=a);var s=[];if(typeof n!="object"||n===null)return"";var o=V0[r.arrayFormat],l=o==="comma"&&r.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);for(var d=K0(),u=0;u<i.length;++u){var c=i[u],f=n[c];r.skipNulls&&f===null||G0(s,Vc(f,c,o,l,r.allowEmptyArrays,r.strictNullHandling,r.skipNulls,r.encodeDotInKeys,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,d))}var g=s.join(r.delimiter),h=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),g.length>0?h+g:""},Or=M0,ha=Object.prototype.hasOwnProperty,Hc=Array.isArray,Te={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:Or.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},qc=function(e){return e.replace(/&#(\d+);/g,function(t,n){return String.fromCharCode(parseInt(n,10))})},W0=function(e,t){return e&&typeof e=="string"&&t.comma&&e.indexOf(",")>-1?e.split(","):e},jc="utf8=%26%2310003%3B",zc="utf8=%E2%9C%93",Qc=function(t,n){var r={__proto__:null},i=n.ignoreQueryPrefix?t.replace(/^\?/,""):t;i=i.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var a=n.parameterLimit===1/0?void 0:n.parameterLimit,s=i.split(n.delimiter,a),o=-1,l,d=n.charset;if(n.charsetSentinel)for(l=0;l<s.length;++l)s[l].indexOf("utf8=")===0&&(s[l]===zc?d="utf-8":s[l]===jc&&(d="iso-8859-1"),o=l,l=s.length);for(l=0;l<s.length;++l)if(l!==o){var u=s[l],c=u.indexOf("]="),f=c===-1?u.indexOf("="):c+1,g,h;f===-1?(g=n.decoder(u,Te.decoder,d,"key"),h=n.strictNullHandling?null:""):(g=n.decoder(u.slice(0,f),Te.decoder,d,"key"),h=Or.maybeMap(W0(u.slice(f+1),n),function(E){return n.decoder(E,Te.decoder,d,"value")})),h&&n.interpretNumericEntities&&d==="iso-8859-1"&&(h=qc(String(h))),u.indexOf("[]=")>-1&&(h=Hc(h)?[h]:h);var m=ha.call(r,g);m&&n.duplicates==="combine"?r[g]=Or.combine(r[g],h):(!m||n.duplicates==="last")&&(r[g]=h)}return r},Yc=function(e,t,n,r){for(var i=r?t:W0(t,n),a=e.length-1;a>=0;--a){var s,o=e[a];if(o==="[]"&&n.parseArrays)s=n.allowEmptyArrays&&(i===""||n.strictNullHandling&&i===null)?[]:[].concat(i);else{s=n.plainObjects?{__proto__:null}:{};var l=o.charAt(0)==="["&&o.charAt(o.length-1)==="]"?o.slice(1,-1):o,d=n.decodeDotInKeys?l.replace(/%2E/g,"."):l,u=parseInt(d,10);!n.parseArrays&&d===""?s={0:i}:!isNaN(u)&&o!==d&&String(u)===d&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(s=[],s[u]=i):d!=="__proto__"&&(s[d]=i)}i=s}return i},Xc=function(t,n,r,i){if(t){var a=r.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,s=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,l=r.depth>0&&s.exec(a),d=l?a.slice(0,l.index):a,u=[];if(d){if(!r.plainObjects&&ha.call(Object.prototype,d)&&!r.allowPrototypes)return;u.push(d)}for(var c=0;r.depth>0&&(l=o.exec(a))!==null&&c<r.depth;){if(c+=1,!r.plainObjects&&ha.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(l[1])}if(l){if(r.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+r.depth+" and strictDepth is true");u.push("["+a.slice(l.index)+"]")}return Yc(u,n,r,i)}},Jc=function(t){if(!t)return Te;if(typeof t.allowEmptyArrays<"u"&&typeof t.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof t.decodeDotInKeys<"u"&&typeof t.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(t.decoder!==null&&typeof t.decoder<"u"&&typeof t.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof t.charset<"u"&&t.charset!=="utf-8"&&t.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof t.charset>"u"?Te.charset:t.charset,r=typeof t.duplicates>"u"?Te.duplicates:t.duplicates;if(r!=="combine"&&r!=="first"&&r!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var i=typeof t.allowDots>"u"?t.decodeDotInKeys===!0?!0:Te.allowDots:!!t.allowDots;return{allowDots:i,allowEmptyArrays:typeof t.allowEmptyArrays=="boolean"?!!t.allowEmptyArrays:Te.allowEmptyArrays,allowPrototypes:typeof t.allowPrototypes=="boolean"?t.allowPrototypes:Te.allowPrototypes,allowSparse:typeof t.allowSparse=="boolean"?t.allowSparse:Te.allowSparse,arrayLimit:typeof t.arrayLimit=="number"?t.arrayLimit:Te.arrayLimit,charset:n,charsetSentinel:typeof t.charsetSentinel=="boolean"?t.charsetSentinel:Te.charsetSentinel,comma:typeof t.comma=="boolean"?t.comma:Te.comma,decodeDotInKeys:typeof t.decodeDotInKeys=="boolean"?t.decodeDotInKeys:Te.decodeDotInKeys,decoder:typeof t.decoder=="function"?t.decoder:Te.decoder,delimiter:typeof t.delimiter=="string"||Or.isRegExp(t.delimiter)?t.delimiter:Te.delimiter,depth:typeof t.depth=="number"||t.depth===!1?+t.depth:Te.depth,duplicates:r,ignoreQueryPrefix:t.ignoreQueryPrefix===!0,interpretNumericEntities:typeof t.interpretNumericEntities=="boolean"?t.interpretNumericEntities:Te.interpretNumericEntities,parameterLimit:typeof t.parameterLimit=="number"?t.parameterLimit:Te.parameterLimit,parseArrays:t.parseArrays!==!1,plainObjects:typeof t.plainObjects=="boolean"?t.plainObjects:Te.plainObjects,strictDepth:typeof t.strictDepth=="boolean"?!!t.strictDepth:Te.strictDepth,strictNullHandling:typeof t.strictNullHandling=="boolean"?t.strictNullHandling:Te.strictNullHandling}},Zc=function(e,t){var n=Jc(t);if(e===""||e===null||typeof e>"u")return n.plainObjects?{__proto__:null}:{};for(var r=typeof e=="string"?Qc(e,n):e,i=n.plainObjects?{__proto__:null}:{},a=Object.keys(r),s=0;s<a.length;++s){var o=a[s],l=Xc(o,r[o],n,typeof e=="string");i=Or.merge(i,l,n)}return n.allowSparse===!0?i:Or.compact(i)},ef=Wc,tf=Zc,rf=Ya,nf={formats:rf,parse:tf,stringify:ef};const af=o0(nf);var K=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})},Mi=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Zs;(function(e){e.LIGHT="light",e.DARK="dark"})(Zs||(Zs={}));var Qn;(function(e){e.PENDING="PENDING",e.COMPLETE="COMPLETE"})(Qn||(Qn={}));var Yn;(function(e){e.MOBILE="MOBILE",e.WEB="WEB"})(Yn||(Yn={}));var br;(function(e){e.DKLS="DKLS",e.CGGMP="CGGMP",e.ED25519="ED25519"})(br||(br={}));var eo;(function(e){e.ETH="ETH",e.CELO="CELO",e.MATIC="MATIC"})(eo||(eo={}));var hn;(function(e){e.USER="USER",e.RECOVERY="RECOVERY",e.BIOMETRICS="BIOMETRICS"})(hn||(hn={}));const pa={USER:"USER",RECOVERY:"RECOVERY"};var be;(function(e){e.ETHEREUM="ETHEREUM",e.ARBITRUM="ARBITRUM",e.BASE="BASE",e.OPTIMISM="OPTIMISM",e.POLYGON="POLYGON"})(be||(be={}));var $e;(function(e){e.RAMP="RAMP",e.STRIPE="STRIPE"})($e||($e={}));var fe;(function(e){e.ETHEREUM="ETHEREUM",e.USDC="USDC",e.POLYGON="POLYGON"})(fe||(fe={}));var to;(function(e){e.INITIATED="INITIATED",e.FINISHED="FINISHED",e.CANCELLED="CANCELLED"})(to||(to={}));const Ki="x-capsule-sid";class sf{constructor({userManagementHost:t,apiKey:n,opts:r,retrieveSessionCookie:i,persistSessionCookie:a}){this.createUser=l=>K(this,void 0,void 0,function*(){return(yield this.baseRequest.post("/users",l)).data}),this.checkUserExists=(l,d,u)=>K(this,void 0,void 0,function*(){return yield this.baseRequest.get(`/users/exists?email=${encodeURIComponent(l)}&phone=${encodeURIComponent(d)}&countryCode=${encodeURIComponent(u)}`)}),this.verifyEmail=(l,d)=>K(this,void 0,void 0,function*(){return yield this.baseRequest.post(`/users/${l}/verify-email`,d)}),this.verifyPhone=(l,d)=>K(this,void 0,void 0,function*(){return yield this.baseRequest.post(`/users/${l}/verify-identifier`,d)}),this.addSessionPublicKey=(l,d)=>K(this,void 0,void 0,function*(){return yield this.baseRequest.post(`/users/${l}/biometrics/key`,d)}),this.getSessionPublicKeys=l=>K(this,void 0,void 0,function*(){return yield this.baseRequest.get(`/users/${l}/biometrics/keys`)}),this.getSessionPublicKey=(l,d)=>K(this,void 0,void 0,function*(){return yield this.baseRequest.get(`/users/${l}/biometrics/${d}`)}),this.patchSessionPublicKey=(l,d,u,c)=>K(this,void 0,void 0,function*(){return yield this.baseRequest.patch(`/users/${d}/biometrics/${u}`,c,{headers:{"X-Partner-ID":l}})}),this.getWebChallenge=(l,d,u,c,f)=>K(this,void 0,void 0,function*(){const g={};l&&(g.email=l),d&&(g.phone=d),u&&(g.countryCode=u),c&&(g.farcasterUsername=c),f&&(g.publicKey=f);const h=af.stringify(g);return(yield this.baseRequest.get(`/biometrics/challenge${h===""?"":`?${h}`}`)).data}),this.touchSession=l=>K(this,void 0,void 0,function*(){return yield this.baseRequest.post(`/touch?regenerate=${!!l}`)}),this.verifyWebChallenge=(l,d)=>K(this,void 0,void 0,function*(){return yield this.baseRequest.post("/biometrics/verify",d,{headers:{"X-Partner-ID":l}})}),this.getSessionChallenge=l=>K(this,void 0,void 0,function*(){return yield this.baseRequest.get(`/users/${l}/biometrics/challenge`)}),this.verifySessionChallenge=(l,d)=>K(this,void 0,void 0,function*(){return yield this.baseRequest.post(`/users/${l}/biometrics/verify`,d)}),this.createWallet=(l,d)=>K(this,void 0,void 0,function*(){return(yield this.baseRequest.post(`/users/${l}/wallets`,d)).data}),this.createPregenWallet=l=>K(this,void 0,void 0,function*(){return(yield this.baseRequest.post("/wallets/pregen",l)).data}),this.getPregenWallets=(l,d)=>K(this,void 0,void 0,function*(){return(yield this.baseRequest.get(`/wallets/pregen?pregenIdentifier=${encodeURIComponent(l)}&pregenIdentifierType=${encodeURIComponent(d)}`)).data}),this.claimPregenWallet=l=>K(this,void 0,void 0,function*(){yield this.baseRequest.post("/wallets/pregen/claim",l)}),this.sendTransaction=(l,d,u)=>K(this,void 0,void 0,function*(){return yield this.baseRequest.post(`/users/${l}/wallets/${d}/transactions/send`,u)}),this.signTransaction=(l,d,u)=>K(this,void 0,void 0,function*(){return yield this.baseRequest.post(`/users/${l}/wallets/${d}/transactions/sign`,u)}),this.refreshKeys=(l,d)=>K(this,void 0,void 0,function*(){return yield this.baseRequest.post(`/users/${l}/wallets/${d}/refresh`)}),this.updatePregenWallet=(l,d)=>K(this,void 0,void 0,function*(){return(yield this.baseRequest.patch(`wallets/pregen/${l}`,d)).data}),this.getWallets=l=>K(this,void 0,void 0,function*(){return yield this.baseRequest.get(`/users/${l}/wallets`)}),this.login=l=>K(this,void 0,void 0,function*(){const d=l;return yield this.baseRequest.post("/login",d)}),this.verifyLogin=l=>K(this,void 0,void 0,function*(){const d={verificationCode:l};return yield this.baseRequest.post("/login/verify-email",d)}),this.logout=()=>K(this,void 0,void 0,function*(){return yield this.baseRequest.get("/logout")}),this.recoveryVerification=(l,d)=>K(this,void 0,void 0,function*(){const u={email:l,verificationCode:d};return yield this.baseRequest.post("/recovery/verification",u)}),this.recoveryInit=l=>K(this,void 0,void 0,function*(){const d={email:l};return yield this.baseRequest.post("/recovery",d)}),this.preSignMessage=(l,d,u,c)=>K(this,void 0,void 0,function*(){const f={message:u,scheme:c};return(yield this.baseRequest.post(`/users/${l}/wallets/${d}/messages/sign`,f)).data}),this.deleteSelf=l=>K(this,void 0,void 0,function*(){return yield this.baseRequest.delete(`/users/${l}`)}),this.getCapsuleShare=(l,d)=>K(this,void 0,void 0,function*(){return(yield this.baseRequest.get(`/users/${l}/wallets/${d}/capsule-share`)).data.share}),this.getBackupKit=l=>K(this,void 0,void 0,function*(){return yield this.baseRequest.get(`/download-backup-kit/${l}`,{responseType:"blob"})});const o={baseURL:t,withCredentials:!0,headers:n?{"X-External-API-Key":n}:void 0};if(i){const l=Array.isArray(pe.defaults.transformRequest)?pe.defaults.transformRequest:[pe.defaults.transformRequest];o.transformRequest=[function(d,u){const c=i();return c&&(u[Ki]=c),d},...l]}if(a){const l=Array.isArray(pe.defaults.transformResponse)?pe.defaults.transformResponse:[pe.defaults.transformResponse];o.transformResponse=[...l,function(d,u,c){return u!=null&&u[Ki]&&a(u[Ki]),d}]}this.baseRequest=pe.create(o),r!=null&&r.useFetchAdapter&&(pe.defaults.adapter=function(l){return fetch(l.baseURL+l.url.substring(1),{method:l.method,headers:l.headers,body:l.data,credentials:l.withCredentials?"include":void 0}).then(d=>d.text().then(u=>({data:u,status:d.status,statusText:d.statusText,headers:d.headers,config:l,request:fetch}))).catch(function(d){throw d})})}uploadKeyshares(t,n,r){return K(this,void 0,void 0,function*(){const i={keyShares:r};return yield this.baseRequest.post(`/users/${t}/wallets/${n}/key-shares`,i)})}uploadUserKeyShares(t,n){return K(this,void 0,void 0,function*(){const r={keyShares:n};return yield this.baseRequest.post(`/users/${t}/key-shares`,r)})}getKeyshare(t,n,r,i){return K(this,void 0,void 0,function*(){return yield this.baseRequest.get(`/users/${t}/wallets/${n}/key-shares?type=${r}${i?`&encryptor=${i}`:""}`)})}getBiometricKeyshares(t,n){return K(this,void 0,void 0,function*(){return yield this.baseRequest.get(`/users/${t}/biometrics/key-shares?publicKey=${n}`)})}uploadTransmissionKeyshares(t,n){return K(this,void 0,void 0,function*(){const r={shares:n};return yield this.baseRequest.post(`/users/${t}/temporary-shares`,r)})}getTransmissionKeyshares(t,n){return K(this,void 0,void 0,function*(){return yield this.baseRequest.get(`/users/${t}/temporary-shares?sessionLookupId=${n}`)})}resendVerificationCode(t){var{userId:n}=t,r=Mi(t,["userId"]);return K(this,void 0,void 0,function*(){return yield this.baseRequest.post(`/users/${n}/resend-verification-code`,r)})}resendVerificationCodeByPhone(t){var{userId:n}=t,r=Mi(t,["userId"]);return K(this,void 0,void 0,function*(){return yield this.baseRequest.post(`/users/${n}/resend-verification-code-by-phone`,r)})}cancelRecoveryAttempt(t){return K(this,void 0,void 0,function*(){return yield this.baseRequest.post("recovery/cancel",{email:t})})}check2FAStatus(t){return K(this,void 0,void 0,function*(){return yield this.baseRequest.get(`/2fa/users/${t}/check-status`)})}enable2FA(t,n){return K(this,void 0,void 0,function*(){return yield this.baseRequest.post(`/2fa/users/${t}/enable`,{verificationCode:n})})}setup2FA(t){return K(this,void 0,void 0,function*(){return yield this.baseRequest.post(`/2fa/users/${t}/setup`)})}initializeRecovery(t){return K(this,void 0,void 0,function*(){return yield this.baseRequest.post("/recovery/init",{email:t})})}initializeFarcasterLogin(){return K(this,void 0,void 0,function*(){return yield this.baseRequest.post("/auth/farcaster/init")})}getFarcasterAuthStatus(){return K(this,void 0,void 0,function*(){return yield this.baseRequest.post("/auth/farcaster/status")})}initializeRecoveryForPhone(t,n){return K(this,void 0,void 0,function*(){return yield this.baseRequest.post("/recovery/init",{phone:t,countryCode:n})})}finalizeRecovery(t,n){return K(this,void 0,void 0,function*(){return yield this.baseRequest.post(`/recovery/users/${t}/wallets/${n}/finish`)})}recoverUserShares(t,n){return K(this,void 0,void 0,function*(){return yield this.baseRequest.get(`/recovery/users/${t}/wallets/${n}/key-shares?type=USER&encryptor=RECOVERY`)})}verifyEmailForRecovery(t,n){return K(this,void 0,void 0,function*(){const r={email:t,verificationCode:n};return yield this.baseRequest.post("/recovery/verify-email",r)})}verifyPhoneForRecovery(t,n,r){return K(this,void 0,void 0,function*(){const i={phone:t,countryCode:n,verificationCode:r};return yield this.baseRequest.post("/recovery/verify-identifier",i)})}verify2FA(t,n){return K(this,void 0,void 0,function*(){const r={email:t,verificationCode:n};return yield this.baseRequest.post("/2fa/verify",r)})}verify2FAForPhone(t,n,r){return K(this,void 0,void 0,function*(){const i={phone:t,countryCode:n,verificationCode:r};return yield this.baseRequest.post("/2fa/verify",i)})}tempTrasmissionInit(t,n){return K(this,void 0,void 0,function*(){const r={message:t,userId:n};return yield this.baseRequest.post("/temporary-transmissions",r)})}tempTrasmission(t){return K(this,void 0,void 0,function*(){return yield this.baseRequest.get(`/temporary-transmissions/${t}`)})}getPartner(t){return K(this,void 0,void 0,function*(){return yield this.baseRequest.get(`/partners/${t}`)})}acceptScopes(t,n){return K(this,void 0,void 0,function*(){return yield this.baseRequest.post(`/users/${t}/scopes/accept`,n)})}getPendingTransaction(t,n){return K(this,void 0,void 0,function*(){return yield this.baseRequest.get(`/users/${t}/pending-transactions/${n}`)})}acceptPendingTransaction(t,n){return K(this,void 0,void 0,function*(){return yield this.baseRequest.post(`/users/${t}/pending-transactions/${n}/accept`)})}getPolicyPermissions(t,n){return K(this,void 0,void 0,function*(){return yield this.baseRequest.get(`/users/${t}/policies/${n}/permissions`)})}createOnRampPurchase(t,n,r,i,a,s=!1){return K(this,void 0,void 0,function*(){return yield this.baseRequest.post(`/users/${t}/wallets/${n}/purchases`,{provider:r,network:i,asset:a,testMode:s})})}updateOnRampPurchase(t,n,r,i){return K(this,void 0,void 0,function*(){return yield this.baseRequest.patch(`/users/${t}/wallets/${n}/purchases/${r}`,i)})}getOnRampPurchase(t,n,r){return K(this,void 0,void 0,function*(){return yield this.baseRequest.get(`/users/${t}/wallets/${n}/purchases/${r}`)})}distributeCapsuleShare(t){var{userId:n,walletId:r}=t,i=Mi(t,["userId","walletId"]);return K(this,void 0,void 0,function*(){const a=i;return yield this.baseRequest.post(`/users/${n}/wallets/${r}/capsule-share/distribute`,a)})}keepSessionAlive(t){return K(this,void 0,void 0,function*(){return(yield this.baseRequest.post(`/users/${t}/session/keep-alive`)).data})}persistRecoveryPublicKeys(t,n){return K(this,void 0,void 0,function*(){return(yield this.baseRequest.post(`/users/${t}/recovery-public-keys`,{publicKeys:n})).data})}getRecoveryPublicKeys(t){return K(this,void 0,void 0,function*(){return(yield this.baseRequest.get(`/users/${t}/recovery-public-keys`)).data})}uploadEncryptedWalletPrivateKey(t,n,r,i){return K(this,void 0,void 0,function*(){const a={encryptedWalletPrivateKey:n,encryptionKeyHash:r,biometricPublicKey:i};return(yield this.baseRequest.post(`/users/${t}/encrypted-wallet-private-keys`,a)).data})}getEncryptedWalletPrivateKeys(t,n){return K(this,void 0,void 0,function*(){return(yield this.baseRequest.get(`/users/${t}/encrypted-wallet-private-keys/${n}`)).data})}}typeof Ne<"u"?Ne.Buffer=Ne.Buffer||W.Buffer:typeof window<"u"?(window.Buffer=window.Buffer||W.Buffer,window.global=window.global||window):(self.Buffer=self.Buffer||W.Buffer,self.global=self.global||self);var Fe;(function(e){e.DEV="DEV",e.SANDBOX="SANDBOX",e.BETA="BETA",e.PROD="PROD",e.DEVELOPMENT="BETA",e.PRODUCTION="PROD"})(Fe||(Fe={}));var ro;(function(e){e.GOOGLE="GOOGLE",e.TWITTER="TWITTER",e.APPLE="APPLE",e.DISCORD="DISCORD",e.FACEBOOK="FACEBOOK",e.FARCASTER="FARCASTER"})(ro||(ro={}));const of={ethereum:be.ETHEREUM,ETHEREUM:be.ETHEREUM,arbitrum:be.ARBITRUM,ARBITRUM:be.ARBITRUM,base:be.BASE,BASE:be.BASE,optimism:be.OPTIMISM,OPTIMISM:be.OPTIMISM,POLYGON:be.POLYGON,polygon:be.POLYGON};be.ETHEREUM+"",fe.ETHEREUM+"",$e.RAMP+"",$e.STRIPE+"",fe.USDC+"",$e.RAMP+"",$e.STRIPE+"",be.ARBITRUM+"",fe.ETHEREUM+"",$e.RAMP+"",fe.USDC+"",$e.RAMP+"",be.BASE+"",fe.ETHEREUM+"",$e.RAMP+"",fe.USDC+"",$e.RAMP+"",be.OPTIMISM+"",fe.ETHEREUM+"",$e.RAMP+"",fe.USDC+"",$e.RAMP+"",be.POLYGON+"",fe.POLYGON+"",$e.RAMP+"",$e.STRIPE+"",fe.USDC+"",$e.RAMP+"",$e.STRIPE+"";const uf={STRIPE:$e.STRIPE,stripe:$e.STRIPE,RAMP:$e.RAMP,ramp:$e.RAMP},lf={eth:fe.ETHEREUM,ETH:fe.ETHEREUM,ethereum:fe.ETHEREUM,ETHEREUM:fe.ETHEREUM,usdc:fe.USDC,USDC:fe.USDC,polygon:fe.POLYGON,POLYGON:fe.POLYGON,matic:fe.POLYGON,MATIC:fe.POLYGON};$e.RAMP+"",be.ETHEREUM+"",be.ARBITRUM+"",be.BASE+"",be.OPTIMISM+"",be.POLYGON+"",$e.STRIPE+"",be.ETHEREUM+"",be.POLYGON+"";$e.RAMP+"",fe.ETHEREUM+"",fe.USDC+"",fe.POLYGON+"",$e.STRIPE+"",fe.ETHEREUM+"",fe.USDC+"",fe.POLYGON+"";var no;(function(e){e.ACH="ACH",e.DEBIT="Debit",e.CREDIT="Credit",e.APPLE_PAY="Apple Pay"})(no||(no={}));function df(e){return uf[e]}function cf(e){return lf[e]}function ff(e){return of[e]}function hf(e){switch(e){case Fe.DEV:return"localhost";case Fe.SANDBOX:return"app.sandbox.usecapsule.com";case Fe.BETA:return"app.beta.usecapsule.com";case Fe.PROD:return"app.usecapsule.com";default:throw new Error(`env: ${e} not supported`)}}function qt({env:e},t){const n=hf(e);return e===Fe.DEV?`http://${n}:3003`:`https://${n}`}var pf={exports:{}},Xa={},Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});function yf(e){var t=4,n=e.length,r=n%t;if(!r)return e;var i=n,a=t-r,s=n+a,o=W.Buffer.alloc(s);for(o.write(e);a--;)o.write("=",i++);return o.toString()}Ja.default=yf;Object.defineProperty(Xa,"__esModule",{value:!0});var vf=Ja;function H0(e,t){return t===void 0&&(t="utf8"),W.Buffer.isBuffer(e)?ya(e.toString("base64")):ya(W.Buffer.from(e,t).toString("base64"))}function gf(e,t){return t===void 0&&(t="utf8"),W.Buffer.from(Za(e),"base64").toString(t)}function Za(e){return e=e.toString(),vf.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function ya(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function mf(e){return W.Buffer.from(Za(e),"base64")}var Gr=H0;Gr.encode=H0;Gr.decode=gf;Gr.toBase64=Za;Gr.fromBase64=ya;Gr.toBuffer=mf;Xa.default=Gr;(function(e){e.exports=Xa.default,e.exports.default=e.exports})(pf);var J={options:{usePureJavaScript:!1}},es={},Cf=es,io={};es.encode=function(e,t,n){if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');if(n!==void 0&&typeof n!="number")throw new TypeError('"maxline" must be a number.');var r="";if(!(e instanceof Uint8Array))r=Ef(e,t);else{var i=0,a=t.length,s=t.charAt(0),o=[0];for(i=0;i<e.length;++i){for(var l=0,d=e[i];l<o.length;++l)d+=o[l]<<8,o[l]=d%a,d=d/a|0;for(;d>0;)o.push(d%a),d=d/a|0}for(i=0;e[i]===0&&i<e.length-1;++i)r+=s;for(i=o.length-1;i>=0;--i)r+=t[o[i]]}if(n){var u=new RegExp(".{1,"+n+"}","g");r=r.match(u).join(`\r
`)}return r};es.decode=function(e,t){if(typeof e!="string")throw new TypeError('"input" must be a string.');if(typeof t!="string")throw new TypeError('"alphabet" must be a string.');var n=io[t];if(!n){n=io[t]=[];for(var r=0;r<t.length;++r)n[t.charCodeAt(r)]=r}e=e.replace(/\s/g,"");for(var i=t.length,a=t.charAt(0),s=[0],r=0;r<e.length;r++){var o=n[e.charCodeAt(r)];if(o===void 0)return;for(var l=0,d=o;l<s.length;++l)d+=s[l]*i,s[l]=d&255,d>>=8;for(;d>0;)s.push(d&255),d>>=8}for(var u=0;e[u]===a&&u<e.length-1;++u)s.push(0);return typeof W.Buffer<"u"?W.Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function Ef(e,t){var n=0,r=t.length,i=t.charAt(0),a=[0];for(n=0;n<e.length();++n){for(var s=0,o=e.at(n);s<a.length;++s)o+=a[s]<<8,a[s]=o%r,o=o/r|0;for(;o>0;)a.push(o%r),o=o/r|0}var l="";for(n=0;e.at(n)===0&&n<e.length()-1;++n)l+=i;for(n=a.length-1;n>=0;--n)l+=t[a[n]];return l}var ao=J,so=Cf,$=ao.util=ao.util||{};(function(){if(typeof rr<"u"&&rr.nextTick&&!rr.browser){$.nextTick=rr.nextTick,typeof setImmediate=="function"?$.setImmediate=setImmediate:$.setImmediate=$.nextTick;return}if(typeof setImmediate=="function"){$.setImmediate=function(){return setImmediate.apply(void 0,arguments)},$.nextTick=function(s){return setImmediate(s)};return}if($.setImmediate=function(s){setTimeout(s,0)},typeof window<"u"&&typeof window.postMessage=="function"){let s=function(o){if(o.source===window&&o.data===e){o.stopPropagation();var l=t.slice();t.length=0,l.forEach(function(d){d()})}};var e="forge.setImmediate",t=[];$.setImmediate=function(o){t.push(o),t.length===1&&window.postMessage(e,"*")},window.addEventListener("message",s,!0)}if(typeof MutationObserver<"u"){var n=Date.now(),r=!0,i=document.createElement("div"),t=[];new MutationObserver(function(){var o=t.slice();t.length=0,o.forEach(function(l){l()})}).observe(i,{attributes:!0});var a=$.setImmediate;$.setImmediate=function(o){Date.now()-n>15?(n=Date.now(),a(o)):(t.push(o),t.length===1&&i.setAttribute("a",r=!r))}}$.nextTick=$.setImmediate})();$.isNodejs=typeof rr<"u"&&rr.versions&&rr.versions.node;$.globalScope=function(){return $.isNodejs?dn:typeof self>"u"?window:self}();$.isArray=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};$.isArrayBuffer=function(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer};$.isArrayBufferView=function(e){return e&&$.isArrayBuffer(e.buffer)&&e.byteLength!==void 0};function bn(e){if(!(e===8||e===16||e===24||e===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}$.ByteBuffer=ts;function ts(e){if(this.data="",this.read=0,typeof e=="string")this.data=e;else if($.isArrayBuffer(e)||$.isArrayBufferView(e))if(typeof W.Buffer<"u"&&e instanceof W.Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch{for(var n=0;n<t.length;++n)this.putByte(t[n])}}else(e instanceof ts||typeof e=="object"&&typeof e.data=="string"&&typeof e.read=="number")&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}$.ByteStringBuffer=ts;var Sf=4096;$.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>Sf&&(this.data.substr(0,1),this._constructedStringLength=0)};$.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};$.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};$.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))};$.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var n=this.data;t>0;)t&1&&(n+=e),t>>>=1,t>0&&(e+=e);return this.data=n,this._optimizeConstructedString(t),this};$.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this};$.ByteStringBuffer.prototype.putString=function(e){return this.putBytes($.encodeUtf8(e))};$.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};$.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};$.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255))};$.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255))};$.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))};$.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(e&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))};$.ByteStringBuffer.prototype.putInt=function(e,t){bn(t);var n="";do t-=8,n+=String.fromCharCode(e>>t&255);while(t>0);return this.putBytes(n)};$.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)};$.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())};$.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};$.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e};$.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e};$.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e};$.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e};$.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e};$.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e};$.ByteStringBuffer.prototype.getInt=function(e){bn(e);var t=0;do t=(t<<8)+this.data.charCodeAt(this.read++),e-=8;while(e>0);return t};$.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t};$.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};$.ByteStringBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};$.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)};$.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this};$.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};$.ByteStringBuffer.prototype.copy=function(){var e=$.createBuffer(this.data);return e.read=this.read,e};$.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};$.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};$.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this};$.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var n=this.data.charCodeAt(t);n<16&&(e+="0"),e+=n.toString(16)}return e};$.ByteStringBuffer.prototype.toString=function(){return $.decodeUtf8(this.bytes())};function $f(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var n=$.isArrayBuffer(e),r=$.isArrayBufferView(e);if(n||r){n?this.data=new DataView(e):this.data=new DataView(e.buffer,e.byteOffset,e.byteLength),this.write="writeOffset"in t?t.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,e!=null&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)}$.DataBuffer=$f;$.DataBuffer.prototype.length=function(){return this.write-this.read};$.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};$.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+t);return r.set(n),this.data=new DataView(r.buffer),this};$.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this};$.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var n=0;n<t;++n)this.data.setUint8(e);return this};$.DataBuffer.prototype.putBytes=function(e,t){if($.isArrayBufferView(e)){var n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r=n.byteLength-n.byteOffset;this.accommodate(r);var i=new Uint8Array(this.data.buffer,this.write);return i.set(n),this.write+=r,this}if($.isArrayBuffer(e)){var n=new Uint8Array(e);this.accommodate(n.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(n,this.write),this.write+=n.byteLength,this}if(e instanceof $.DataBuffer||typeof e=="object"&&typeof e.read=="number"&&typeof e.write=="number"&&$.isArrayBufferView(e.data)){var n=new Uint8Array(e.data.byteLength,e.read,e.length());this.accommodate(n.byteLength);var i=new Uint8Array(e.data.byteLength,this.write);return i.set(n),this.write+=n.byteLength,this}if(e instanceof $.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary",typeof e=="string"){var a;if(t==="hex")return this.accommodate(Math.ceil(e.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=$.binary.hex.decode(e,a,this.write),this;if(t==="base64")return this.accommodate(Math.ceil(e.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=$.binary.base64.decode(e,a,this.write),this;if(t==="utf8"&&(e=$.encodeUtf8(e),t="binary"),t==="binary"||t==="raw")return this.accommodate(e.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=$.binary.raw.decode(a),this;if(t==="utf16")return this.accommodate(e.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=$.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)};$.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this};$.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")};$.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this};$.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this};$.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this};$.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this};$.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this};$.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this};$.DataBuffer.prototype.putInt=function(e,t){bn(t),this.accommodate(t/8);do t-=8,this.data.setInt8(this.write++,e>>t&255);while(t>0);return this};$.DataBuffer.prototype.putSignedInt=function(e,t){return bn(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)};$.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};$.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e};$.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e};$.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e};$.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e};$.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e};$.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e};$.DataBuffer.prototype.getInt=function(e){bn(e);var t=0;do t=(t<<8)+this.data.getInt8(this.read++),e-=8;while(e>0);return t};$.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),n=2<<e-2;return t>=n&&(t-=n<<1),t};$.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):e===0?t="":(t=this.read===0?this.data:this.data.slice(this.read),this.clear()),t};$.DataBuffer.prototype.bytes=function(e){return typeof e>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+e)};$.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)};$.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this};$.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};$.DataBuffer.prototype.copy=function(){return new $.DataBuffer(this)};$.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this};$.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};$.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this};$.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var n=this.data.getUint8(t);n<16&&(e+="0"),e+=n.toString(16)}return e};$.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if(e=e||"utf8",e==="binary"||e==="raw")return $.binary.raw.encode(t);if(e==="hex")return $.binary.hex.encode(t);if(e==="base64")return $.binary.base64.encode(t);if(e==="utf8")return $.text.utf8.decode(t);if(e==="utf16")return $.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)};$.createBuffer=function(e,t){return t=t||"raw",e!==void 0&&t==="utf8"&&(e=$.encodeUtf8(e)),new $.ByteBuffer(e)};$.fillString=function(e,t){for(var n="";t>0;)t&1&&(n+=e),t>>>=1,t>0&&(e+=e);return n};$.xorBytes=function(e,t,n){for(var r="",i="",a="",s=0,o=0;n>0;--n,++s)i=e.charCodeAt(s)^t.charCodeAt(s),o>=10&&(r+=a,a="",o=0),a+=String.fromCharCode(i),++o;return r+=a,r};$.hexToBytes=function(e){var t="",n=0;for(e.length&!0&&(n=1,t+=String.fromCharCode(parseInt(e[0],16)));n<e.length;n+=2)t+=String.fromCharCode(parseInt(e.substr(n,2),16));return t};$.bytesToHex=function(e){return $.createBuffer(e).toHex()};$.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(e&255)};var ir="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",ar=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],q0="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";$.encode64=function(e,t){for(var n="",r="",i,a,s,o=0;o<e.length;)i=e.charCodeAt(o++),a=e.charCodeAt(o++),s=e.charCodeAt(o++),n+=ir.charAt(i>>2),n+=ir.charAt((i&3)<<4|a>>4),isNaN(a)?n+="==":(n+=ir.charAt((a&15)<<2|s>>6),n+=isNaN(s)?"=":ir.charAt(s&63)),t&&n.length>t&&(r+=n.substr(0,t)+`\r
`,n=n.substr(t));return r+=n,r};$.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t="",n,r,i,a,s=0;s<e.length;)n=ar[e.charCodeAt(s++)-43],r=ar[e.charCodeAt(s++)-43],i=ar[e.charCodeAt(s++)-43],a=ar[e.charCodeAt(s++)-43],t+=String.fromCharCode(n<<2|r>>4),i!==64&&(t+=String.fromCharCode((r&15)<<4|i>>2),a!==64&&(t+=String.fromCharCode((i&3)<<6|a)));return t};$.encodeUtf8=function(e){return unescape(encodeURIComponent(e))};$.decodeUtf8=function(e){return decodeURIComponent(escape(e))};$.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:so.encode,decode:so.decode}};$.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)};$.binary.raw.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length)),n=n||0;for(var i=n,a=0;a<e.length;++a)r[i++]=e.charCodeAt(a);return t?i-n:r};$.binary.hex.encode=$.bytesToHex;$.binary.hex.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/2))),n=n||0;var i=0,a=n;for(e.length&1&&(i=1,r[a++]=parseInt(e[0],16));i<e.length;i+=2)r[a++]=parseInt(e.substr(i,2),16);return t?a-n:r};$.binary.base64.encode=function(e,t){for(var n="",r="",i,a,s,o=0;o<e.byteLength;)i=e[o++],a=e[o++],s=e[o++],n+=ir.charAt(i>>2),n+=ir.charAt((i&3)<<4|a>>4),isNaN(a)?n+="==":(n+=ir.charAt((a&15)<<2|s>>6),n+=isNaN(s)?"=":ir.charAt(s&63)),t&&n.length>t&&(r+=n.substr(0,t)+`\r
`,n=n.substr(t));return r+=n,r};$.binary.base64.decode=function(e,t,n){var r=t;r||(r=new Uint8Array(Math.ceil(e.length/4)*3)),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;for(var i,a,s,o,l=0,d=n;l<e.length;)i=ar[e.charCodeAt(l++)-43],a=ar[e.charCodeAt(l++)-43],s=ar[e.charCodeAt(l++)-43],o=ar[e.charCodeAt(l++)-43],r[d++]=i<<2|a>>4,s!==64&&(r[d++]=(a&15)<<4|s>>2,o!==64&&(r[d++]=(s&3)<<6|o));return t?d-n:r.subarray(0,d)};$.binary.base58.encode=function(e,t){return $.binary.baseN.encode(e,q0,t)};$.binary.base58.decode=function(e,t){return $.binary.baseN.decode(e,q0,t)};$.text={utf8:{},utf16:{}};$.text.utf8.encode=function(e,t,n){e=$.encodeUtf8(e);var r=t;r||(r=new Uint8Array(e.length)),n=n||0;for(var i=n,a=0;a<e.length;++a)r[i++]=e.charCodeAt(a);return t?i-n:r};$.text.utf8.decode=function(e){return $.decodeUtf8(String.fromCharCode.apply(null,e))};$.text.utf16.encode=function(e,t,n){var r=t;r||(r=new Uint8Array(e.length*2));var i=new Uint16Array(r.buffer);n=n||0;for(var a=n,s=n,o=0;o<e.length;++o)i[s++]=e.charCodeAt(o),a+=2;return t?a-n:r};$.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))};$.deflate=function(e,t,n){if(t=$.decode64(e.deflate($.encode64(t)).rval),n){var r=2,i=t.charCodeAt(1);i&32&&(r=6),t=t.substring(r,t.length-4)}return t};$.inflate=function(e,t,n){var r=e.inflate($.encode64(t)).rval;return r===null?null:$.decode64(r)};var rs=function(e,t,n){if(!e)throw new Error("WebStorage not available.");var r;if(n===null?r=e.removeItem(t):(n=$.encode64(JSON.stringify(n)),r=e.setItem(t,n)),typeof r<"u"&&r.rval!==!0){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}},ns=function(e,t){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(t);if(e.init)if(n.rval===null){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return n!==null&&(n=JSON.parse($.decode64(n))),n},bf=function(e,t,n,r){var i=ns(e,t);i===null&&(i={}),i[n]=r,rs(e,t,i)},xf=function(e,t,n){var r=ns(e,t);return r!==null&&(r=n in r?r[n]:null),r},Tf=function(e,t,n){var r=ns(e,t);if(r!==null&&n in r){delete r[n];var i=!0;for(var a in r){i=!1;break}i&&(r=null),rs(e,t,r)}},If=function(e,t){rs(e,t,null)},pi=function(e,t,n){var r=null;typeof n>"u"&&(n=["web","flash"]);var i,a=!1,s=null;for(var o in n){i=n[o];try{if(i==="flash"||i==="both"){if(t[0]===null)throw new Error("Flash local storage not available.");r=e.apply(this,t),a=i==="flash"}(i==="web"||i==="both")&&(t[0]=localStorage,r=e.apply(this,t),a=!0)}catch(l){s=l}if(a)break}if(!a)throw s;return r};$.setItem=function(e,t,n,r,i){pi(bf,arguments,i)};$.getItem=function(e,t,n,r){return pi(xf,arguments,r)};$.removeItem=function(e,t,n,r){pi(Tf,arguments,r)};$.clearItems=function(e,t,n){pi(If,arguments,n)};$.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0};$.format=function(e){for(var t=/%./g,n,r,i=0,a=[],s=0;n=t.exec(e);){r=e.substring(s,t.lastIndex-2),r.length>0&&a.push(r),s=t.lastIndex;var o=n[0][1];switch(o){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+o+"?>")}}return a.push(e.substring(s)),a.join("")};$.formatNumber=function(e,t,n,r){var i=e,a=isNaN(t=Math.abs(t))?2:t,s=n===void 0?",":n,o=r===void 0?".":r,l=i<0?"-":"",d=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",u=d.length>3?d.length%3:0;return l+(u?d.substr(0,u)+o:"")+d.substr(u).replace(/(\d{3})(?=\d)/g,"$1"+o)+(a?s+Math.abs(i-d).toFixed(a).slice(2):"")};$.formatSize=function(e){return e>=1073741824?e=$.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?e=$.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?e=$.formatNumber(e/1024,0)+" KiB":e=$.formatNumber(e,0)+" bytes",e};$.bytesFromIP=function(e){return e.indexOf(".")!==-1?$.bytesFromIPv4(e):e.indexOf(":")!==-1?$.bytesFromIPv6(e):null};$.bytesFromIPv4=function(e){if(e=e.split("."),e.length!==4)return null;for(var t=$.createBuffer(),n=0;n<e.length;++n){var r=parseInt(e[n],10);if(isNaN(r))return null;t.putByte(r)}return t.getBytes()};$.bytesFromIPv6=function(e){var t=0;e=e.split(":").filter(function(s){return s.length===0&&++t,!0});for(var n=(8-e.length+t)*2,r=$.createBuffer(),i=0;i<8;++i){if(!e[i]||e[i].length===0){r.fillWithByte(0,n),n=0;continue}var a=$.hexToBytes(e[i]);a.length<2&&r.putByte(0),r.putBytes(a)}return r.getBytes()};$.bytesToIP=function(e){return e.length===4?$.bytesToIPv4(e):e.length===16?$.bytesToIPv6(e):null};$.bytesToIPv4=function(e){if(e.length!==4)return null;for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t.join(".")};$.bytesToIPv6=function(e){if(e.length!==16)return null;for(var t=[],n=[],r=0,i=0;i<e.length;i+=2){for(var a=$.bytesToHex(e[i]+e[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=n[n.length-1],o=t.length;!s||o!==s.end+1?n.push({start:o,end:o}):(s.end=o,s.end-s.start>n[r].end-n[r].start&&(r=n.length-1))}t.push(a)}if(n.length>0){var l=n[r];l.end-l.start>0&&(t.splice(l.start,l.end-l.start+1,""),l.start===0&&t.unshift(""),l.end===7&&t.push(""))}return t.join(":")};$.estimateCores=function(e,t){if(typeof e=="function"&&(t=e,e={}),e=e||{},"cores"in $&&!e.update)return t(null,$.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return $.cores=navigator.hardwareConcurrency,t(null,$.cores);if(typeof Worker>"u")return $.cores=1,t(null,$.cores);if(typeof Blob>"u")return $.cores=2,t(null,$.cores);var n=URL.createObjectURL(new Blob(["(",(function(){self.addEventListener("message",function(s){var o=Date.now(),l=o+4;self.postMessage({st:o,et:l})})}).toString(),")()"],{type:"application/javascript"}));r([],5,16);function r(s,o,l){if(o===0){var d=Math.floor(s.reduce(function(u,c){return u+c},0)/s.length);return $.cores=Math.max(1,d),URL.revokeObjectURL(n),t(null,$.cores)}i(l,function(u,c){s.push(a(l,c)),r(s,o-1,l)})}function i(s,o){for(var l=[],d=[],u=0;u<s;++u){var c=new Worker(n);c.addEventListener("message",function(f){if(d.push(f.data),d.length===s){for(var g=0;g<s;++g)l[g].terminate();o(null,d)}}),l.push(c)}for(var u=0;u<s;++u)l[u].postMessage(u)}function a(s,o){for(var l=[],d=0;d<s;++d)for(var u=o[d],c=l[d]=[],f=0;f<s;++f)if(d!==f){var g=o[f];(u.st>g.st&&u.st<g.et||g.st>u.st&&g.st<u.et)&&c.push(f)}return l.reduce(function(h,m){return Math.max(h,m.length)},0)}};var De=J;De.cipher=De.cipher||{};De.cipher.algorithms=De.cipher.algorithms||{};De.cipher.createCipher=function(e,t){var n=e;if(typeof n=="string"&&(n=De.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+e);return new De.cipher.BlockCipher({algorithm:n,key:t,decrypt:!1})};De.cipher.createDecipher=function(e,t){var n=e;if(typeof n=="string"&&(n=De.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+e);return new De.cipher.BlockCipher({algorithm:n,key:t,decrypt:!0})};De.cipher.registerAlgorithm=function(e,t){e=e.toUpperCase(),De.cipher.algorithms[e]=t};De.cipher.getAlgorithm=function(e){return e=e.toUpperCase(),e in De.cipher.algorithms?De.cipher.algorithms[e]:null};var is=De.cipher.BlockCipher=function(e){this.algorithm=e.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=e.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=e.decrypt,this.algorithm.initialize(e)};is.prototype.start=function(e){e=e||{};var t={};for(var n in e)t[n]=e[n];t.decrypt=this._decrypt,this._finish=!1,this._input=De.util.createBuffer(),this.output=e.output||De.util.createBuffer(),this.mode.start(t)};is.prototype.update=function(e){for(e&&this._input.putBuffer(e);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};is.prototype.finish=function(e){e&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(n){return e(this.blockSize,n,!1)},this.mode.unpad=function(n){return e(this.blockSize,n,!0)});var t={};return t.decrypt=this._decrypt,t.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,t)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,t))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,t))};var Oe=J;Oe.cipher=Oe.cipher||{};var ne=Oe.cipher.modes=Oe.cipher.modes||{};ne.ecb=function(e){e=e||{},this.name="ECB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ne.ecb.prototype.start=function(e){};ne.ecb.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])};ne.ecb.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r])};ne.ecb.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0};ne.ecb.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return r>this.blockSize<<2?!1:(e.truncate(r),!0)};ne.cbc=function(e){e=e||{},this.name="CBC",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};ne.cbc.prototype.start=function(e){if(e.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in e)this._iv=yi(e.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};ne.cbc.prototype.encrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^e.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._outBlock[r]);this._prev=this._outBlock};ne.cbc.prototype.decrypt=function(e,t,n){if(e.length()<this.blockSize&&!(n&&e.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=e.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)t.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)};ne.cbc.prototype.pad=function(e,t){var n=e.length()===this.blockSize?this.blockSize:this.blockSize-e.length();return e.fillWithByte(n,n),!0};ne.cbc.prototype.unpad=function(e,t){if(t.overflow>0)return!1;var n=e.length(),r=e.at(n-1);return r>this.blockSize<<2?!1:(e.truncate(r),!0)};ne.cfb=function(e){e=e||{},this.name="CFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Oe.util.createBuffer(),this._partialBytes=0};ne.cfb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=yi(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ne.cfb.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32()^this._outBlock[i],t.putInt32(this._inBlock[i]);return}var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};ne.cfb.prototype.decrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=e.getInt32(),t.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=e.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};ne.ofb=function(e){e=e||{},this.name="OFB",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Oe.util.createBuffer(),this._partialBytes=0};ne.ofb.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=yi(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ne.ofb.prototype.encrypt=function(e,t,n){var r=e.length();if(e.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0)e.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};ne.ofb.prototype.decrypt=ne.ofb.prototype.encrypt;ne.ctr=function(e){e=e||{},this.name="CTR",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Oe.util.createBuffer(),this._partialBytes=0};ne.ctr.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");this._iv=yi(e.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};ne.ctr.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize)for(var i=0;i<this._ints;++i)t.putInt32(e.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a>0&&(e.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}vi(this._inBlock)};ne.ctr.prototype.decrypt=ne.ctr.prototype.encrypt;ne.gcm=function(e){e=e||{},this.name="GCM",this.cipher=e.cipher,this.blockSize=e.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Oe.util.createBuffer(),this._partialBytes=0,this._R=3774873600};ne.gcm.prototype.start=function(e){if(!("iv"in e))throw new Error("Invalid IV parameter.");var t=Oe.util.createBuffer(e.iv);this._cipherLength=0;var n;if("additionalData"in e?n=Oe.util.createBuffer(e.additionalData):n=Oe.util.createBuffer(),"tagLength"in e?this._tagLength=e.tagLength:this._tagLength=128,this._tag=null,e.decrypt&&(this._tag=Oe.util.createBuffer(e.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var r=t.length();if(r===12)this._j0=[t.getInt32(),t.getInt32(),t.getInt32(),1];else{for(this._j0=[0,0,0,0];t.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[t.getInt32(),t.getInt32(),t.getInt32(),t.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(va(r*8)))}this._inBlock=this._j0.slice(0),vi(this._inBlock),this._partialBytes=0,n=Oe.util.createBuffer(n),this._aDataLength=va(n.length()*8);var i=n.length()%this.blockSize;for(i&&n.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];n.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()])};ne.gcm.prototype.encrypt=function(e,t,n){var r=e.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^=e.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-r)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(e.getInt32()^this._outBlock[i]);if(a<=0||n){if(n){var s=r%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!n)return e.read-=this.blockSize,t.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;t.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),vi(this._inBlock)};ne.gcm.prototype.decrypt=function(e,t,n){var r=e.length();if(r<this.blockSize&&!(n&&r>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),vi(this._inBlock),this._hashBlock[0]=e.getInt32(),this._hashBlock[1]=e.getInt32(),this._hashBlock[2]=e.getInt32(),this._hashBlock[3]=e.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)t.putInt32(this._outBlock[i]^this._hashBlock[i]);r<this.blockSize?this._cipherLength+=r%this.blockSize:this._cipherLength+=this.blockSize};ne.gcm.prototype.afterFinish=function(e,t){var n=!0;t.decrypt&&t.overflow&&e.truncate(this.blockSize-t.overflow),this.tag=Oe.util.createBuffer();var r=this._aDataLength.concat(va(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,r);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),t.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n};ne.gcm.prototype.multiply=function(e,t){for(var n=[0,0,0,0],r=t.slice(0),i=0;i<128;++i){var a=e[i/32|0]&1<<31-i%32;a&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r)}return n};ne.gcm.prototype.pow=function(e,t){for(var n=e[3]&1,r=3;r>0;--r)t[r]=e[r]>>>1|(e[r-1]&1)<<31;t[0]=e[0]>>>1,n&&(t[0]^=this._R)};ne.gcm.prototype.tableMultiply=function(e){for(var t=[0,0,0,0],n=0;n<32;++n){var r=n/8|0,i=e[r]>>>(7-n%8)*4&15,a=this._m[n][i];t[0]^=a[0],t[1]^=a[1],t[2]^=a[2],t[3]^=a[3]}return t};ne.gcm.prototype.ghash=function(e,t,n){return t[0]^=n[0],t[1]^=n[1],t[2]^=n[2],t[3]^=n[3],this.tableMultiply(t)};ne.gcm.prototype.generateHashTable=function(e,t){for(var n=8/t,r=4*n,i=16*n,a=new Array(i),s=0;s<i;++s){var o=[0,0,0,0],l=s/r|0,d=(r-1-s%r)*t;o[l]=1<<t-1<<d,a[s]=this.generateSubHashTable(this.multiply(o,e),t)}return a};ne.gcm.prototype.generateSubHashTable=function(e,t){var n=1<<t,r=n>>>1,i=new Array(n);i[r]=e.slice(0);for(var a=r>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<r;){for(var s=1;s<a;++s){var o=i[a],l=i[s];i[a+s]=[o[0]^l[0],o[1]^l[1],o[2]^l[2],o[3]^l[3]]}a*=2}for(i[0]=[0,0,0,0],a=r+1;a<n;++a){var d=i[a^r];i[a]=[e[0]^d[0],e[1]^d[1],e[2]^d[2],e[3]^d[3]]}return i};function yi(e,t){if(typeof e=="string"&&(e=Oe.util.createBuffer(e)),Oe.util.isArray(e)&&e.length>4){var n=e;e=Oe.util.createBuffer();for(var r=0;r<n.length;++r)e.putByte(n[r])}if(e.length()<t)throw new Error("Invalid IV length; got "+e.length()+" bytes and expected "+t+" bytes.");if(!Oe.util.isArray(e)){for(var i=[],a=t/4,r=0;r<a;++r)i.push(e.getInt32());e=i}return e}function vi(e){e[e.length-1]=e[e.length-1]+1&4294967295}function va(e){return[e/4294967296|0,e&4294967295]}var ge=J;ge.aes=ge.aes||{};ge.aes.startEncrypting=function(e,t,n,r){var i=gi({key:e,output:n,decrypt:!1,mode:r});return i.start(t),i};ge.aes.createEncryptionCipher=function(e,t){return gi({key:e,output:null,decrypt:!1,mode:t})};ge.aes.startDecrypting=function(e,t,n,r){var i=gi({key:e,output:n,decrypt:!0,mode:r});return i.start(t),i};ge.aes.createDecryptionCipher=function(e,t){return gi({key:e,output:null,decrypt:!0,mode:t})};ge.aes.Algorithm=function(e,t){as||z0();var n=this;n.name=e,n.mode=new t({blockSize:16,cipher:{encrypt:function(r,i){return ma(n._w,r,i,!1)},decrypt:function(r,i){return ma(n._w,r,i,!0)}}}),n._init=!1};ge.aes.Algorithm.prototype.initialize=function(e){if(!this._init){var t=e.key,n;if(typeof t=="string"&&(t.length===16||t.length===24||t.length===32))t=ge.util.createBuffer(t);else if(ge.util.isArray(t)&&(t.length===16||t.length===24||t.length===32)){n=t,t=ge.util.createBuffer();for(var r=0;r<n.length;++r)t.putByte(n[r])}if(!ge.util.isArray(t)){n=t,t=[];var i=n.length();if(i===16||i===24||i===32){i=i>>>2;for(var r=0;r<i;++r)t.push(n.getInt32())}}if(!ge.util.isArray(t)||!(t.length===4||t.length===6||t.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=Q0(t,e.decrypt&&!s),this._init=!0}};ge.aes._expandKey=function(e,t){return as||z0(),Q0(e,t)};ge.aes._updateBlock=ma;Wr("AES-ECB",ge.cipher.modes.ecb);Wr("AES-CBC",ge.cipher.modes.cbc);Wr("AES-CFB",ge.cipher.modes.cfb);Wr("AES-OFB",ge.cipher.modes.ofb);Wr("AES-CTR",ge.cipher.modes.ctr);Wr("AES-GCM",ge.cipher.modes.gcm);function Wr(e,t){var n=function(){return new ge.aes.Algorithm(e,t)};ge.cipher.registerAlgorithm(e,n)}var as=!1,Ir=4,tt,ga,j0,Cr,xt;function z0(){as=!0,j0=[0,1,2,4,8,16,32,64,128,27,54];for(var e=new Array(256),t=0;t<128;++t)e[t]=t<<1,e[t+128]=t+128<<1^283;tt=new Array(256),ga=new Array(256),Cr=new Array(4),xt=new Array(4);for(var t=0;t<4;++t)Cr[t]=new Array(256),xt[t]=new Array(256);for(var n=0,r=0,i,a,s,o,l,d,u,t=0;t<256;++t){o=r^r<<1^r<<2^r<<3^r<<4,o=o>>8^o&255^99,tt[n]=o,ga[o]=n,l=e[o],i=e[n],a=e[i],s=e[a],d=l<<24^o<<16^o<<8^(o^l),u=(i^a^s)<<24^(n^s)<<16^(n^a^s)<<8^(n^i^s);for(var c=0;c<4;++c)Cr[c][n]=d,xt[c][o]=u,d=d<<24|d>>>8,u=u<<24|u>>>8;n===0?n=r=1:(n=i^e[e[e[i^s]]],r^=e[e[r]])}}function Q0(e,t){for(var n=e.slice(0),r,i=1,a=n.length,s=a+6+1,o=Ir*s,l=a;l<o;++l)r=n[l-1],l%a===0?(r=tt[r>>>16&255]<<24^tt[r>>>8&255]<<16^tt[r&255]<<8^tt[r>>>24]^j0[i]<<24,i++):a>6&&l%a===4&&(r=tt[r>>>24]<<24^tt[r>>>16&255]<<16^tt[r>>>8&255]<<8^tt[r&255]),n[l]=n[l-a]^r;if(t){var d,u=xt[0],c=xt[1],f=xt[2],g=xt[3],h=n.slice(0);o=n.length;for(var l=0,m=o-Ir;l<o;l+=Ir,m-=Ir)if(l===0||l===o-Ir)h[l]=n[m],h[l+1]=n[m+3],h[l+2]=n[m+2],h[l+3]=n[m+1];else for(var E=0;E<Ir;++E)d=n[m+E],h[l+(3&-E)]=u[tt[d>>>24]]^c[tt[d>>>16&255]]^f[tt[d>>>8&255]]^g[tt[d&255]];n=h}return n}function ma(e,t,n,r){var i=e.length/4-1,a,s,o,l,d;r?(a=xt[0],s=xt[1],o=xt[2],l=xt[3],d=ga):(a=Cr[0],s=Cr[1],o=Cr[2],l=Cr[3],d=tt);var u,c,f,g,h,m,E;u=t[0]^e[0],c=t[r?3:1]^e[1],f=t[2]^e[2],g=t[r?1:3]^e[3];for(var b=3,I=1;I<i;++I)h=a[u>>>24]^s[c>>>16&255]^o[f>>>8&255]^l[g&255]^e[++b],m=a[c>>>24]^s[f>>>16&255]^o[g>>>8&255]^l[u&255]^e[++b],E=a[f>>>24]^s[g>>>16&255]^o[u>>>8&255]^l[c&255]^e[++b],g=a[g>>>24]^s[u>>>16&255]^o[c>>>8&255]^l[f&255]^e[++b],u=h,c=m,f=E;n[0]=d[u>>>24]<<24^d[c>>>16&255]<<16^d[f>>>8&255]<<8^d[g&255]^e[++b],n[r?3:1]=d[c>>>24]<<24^d[f>>>16&255]<<16^d[g>>>8&255]<<8^d[u&255]^e[++b],n[2]=d[f>>>24]<<24^d[g>>>16&255]<<16^d[u>>>8&255]<<8^d[c&255]^e[++b],n[r?1:3]=d[g>>>24]<<24^d[u>>>16&255]<<16^d[c>>>8&255]<<8^d[f&255]^e[++b]}function gi(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),n="AES-"+t,r;e.decrypt?r=ge.cipher.createDecipher(n,e.key):r=ge.cipher.createCipher(n,e.key);var i=r.start;return r.start=function(a,s){var o=null;s instanceof ge.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(r,s)},r}var an=J;an.pki=an.pki||{};var Ca=an.pki.oids=an.oids=an.oids||{};function N(e,t){Ca[e]=t,Ca[t]=e}function ce(e,t){Ca[e]=t}N("1.2.840.113549.1.1.1","rsaEncryption");N("1.2.840.113549.1.1.4","md5WithRSAEncryption");N("1.2.840.113549.1.1.5","sha1WithRSAEncryption");N("1.2.840.113549.1.1.7","RSAES-OAEP");N("1.2.840.113549.1.1.8","mgf1");N("1.2.840.113549.1.1.9","pSpecified");N("1.2.840.113549.1.1.10","RSASSA-PSS");N("1.2.840.113549.1.1.11","sha256WithRSAEncryption");N("1.2.840.113549.1.1.12","sha384WithRSAEncryption");N("1.2.840.113549.1.1.13","sha512WithRSAEncryption");N("1.3.101.112","EdDSA25519");N("1.2.840.10040.4.3","dsa-with-sha1");N("1.3.14.3.2.7","desCBC");N("1.3.14.3.2.26","sha1");N("1.3.14.3.2.29","sha1WithRSASignature");N("2.16.840.1.101.3.4.2.1","sha256");N("2.16.840.1.101.3.4.2.2","sha384");N("2.16.840.1.101.3.4.2.3","sha512");N("2.16.840.1.101.3.4.2.4","sha224");N("2.16.840.1.101.3.4.2.5","sha512-224");N("2.16.840.1.101.3.4.2.6","sha512-256");N("1.2.840.113549.2.2","md2");N("1.2.840.113549.2.5","md5");N("1.2.840.113549.1.7.1","data");N("1.2.840.113549.1.7.2","signedData");N("1.2.840.113549.1.7.3","envelopedData");N("1.2.840.113549.1.7.4","signedAndEnvelopedData");N("1.2.840.113549.1.7.5","digestedData");N("1.2.840.113549.1.7.6","encryptedData");N("1.2.840.113549.1.9.1","emailAddress");N("1.2.840.113549.1.9.2","unstructuredName");N("1.2.840.113549.1.9.3","contentType");N("1.2.840.113549.1.9.4","messageDigest");N("1.2.840.113549.1.9.5","signingTime");N("1.2.840.113549.1.9.6","counterSignature");N("1.2.840.113549.1.9.7","challengePassword");N("1.2.840.113549.1.9.8","unstructuredAddress");N("1.2.840.113549.1.9.14","extensionRequest");N("1.2.840.113549.1.9.20","friendlyName");N("1.2.840.113549.1.9.21","localKeyId");N("1.2.840.113549.1.9.22.1","x509Certificate");N("1.2.840.113549.1.12.10.1.1","keyBag");N("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");N("1.2.840.113549.1.12.10.1.3","certBag");N("1.2.840.113549.1.12.10.1.4","crlBag");N("1.2.840.113549.1.12.10.1.5","secretBag");N("1.2.840.113549.1.12.10.1.6","safeContentsBag");N("1.2.840.113549.1.5.13","pkcs5PBES2");N("1.2.840.113549.1.5.12","pkcs5PBKDF2");N("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");N("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");N("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");N("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");N("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");N("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");N("1.2.840.113549.2.7","hmacWithSHA1");N("1.2.840.113549.2.8","hmacWithSHA224");N("1.2.840.113549.2.9","hmacWithSHA256");N("1.2.840.113549.2.10","hmacWithSHA384");N("1.2.840.113549.2.11","hmacWithSHA512");N("1.2.840.113549.3.7","des-EDE3-CBC");N("2.16.840.1.101.3.4.1.2","aes128-CBC");N("2.16.840.1.101.3.4.1.22","aes192-CBC");N("2.16.840.1.101.3.4.1.42","aes256-CBC");N("2.5.4.3","commonName");N("2.5.4.4","surname");N("2.5.4.5","serialNumber");N("2.5.4.6","countryName");N("2.5.4.7","localityName");N("2.5.4.8","stateOrProvinceName");N("2.5.4.9","streetAddress");N("2.5.4.10","organizationName");N("2.5.4.11","organizationalUnitName");N("2.5.4.12","title");N("2.5.4.13","description");N("2.5.4.15","businessCategory");N("2.5.4.17","postalCode");N("2.5.4.42","givenName");N("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");N("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");N("2.16.840.1.113730.1.1","nsCertType");N("2.16.840.1.113730.1.13","nsComment");ce("2.5.29.1","authorityKeyIdentifier");ce("2.5.29.2","keyAttributes");ce("2.5.29.3","certificatePolicies");ce("2.5.29.4","keyUsageRestriction");ce("2.5.29.5","policyMapping");ce("2.5.29.6","subtreesConstraint");ce("2.5.29.7","subjectAltName");ce("2.5.29.8","issuerAltName");ce("2.5.29.9","subjectDirectoryAttributes");ce("2.5.29.10","basicConstraints");ce("2.5.29.11","nameConstraints");ce("2.5.29.12","policyConstraints");ce("2.5.29.13","basicConstraints");N("2.5.29.14","subjectKeyIdentifier");N("2.5.29.15","keyUsage");ce("2.5.29.16","privateKeyUsagePeriod");N("2.5.29.17","subjectAltName");N("2.5.29.18","issuerAltName");N("2.5.29.19","basicConstraints");ce("2.5.29.20","cRLNumber");ce("2.5.29.21","cRLReason");ce("2.5.29.22","expirationDate");ce("2.5.29.23","instructionCode");ce("2.5.29.24","invalidityDate");ce("2.5.29.25","cRLDistributionPoints");ce("2.5.29.26","issuingDistributionPoint");ce("2.5.29.27","deltaCRLIndicator");ce("2.5.29.28","issuingDistributionPoint");ce("2.5.29.29","certificateIssuer");ce("2.5.29.30","nameConstraints");N("2.5.29.31","cRLDistributionPoints");N("2.5.29.32","certificatePolicies");ce("2.5.29.33","policyMappings");ce("2.5.29.34","policyConstraints");N("2.5.29.35","authorityKeyIdentifier");ce("2.5.29.36","policyConstraints");N("2.5.29.37","extKeyUsage");ce("2.5.29.46","freshestCRL");ce("2.5.29.54","inhibitAnyPolicy");N("1.3.6.1.4.1.11129.2.4.2","timestampList");N("1.3.6.1.5.5.7.1.1","authorityInfoAccess");N("1.3.6.1.5.5.7.3.1","serverAuth");N("1.3.6.1.5.5.7.3.2","clientAuth");N("1.3.6.1.5.5.7.3.3","codeSigning");N("1.3.6.1.5.5.7.3.4","emailProtection");N("1.3.6.1.5.5.7.3.8","timeStamping");var Ce=J,k=Ce.asn1=Ce.asn1||{};k.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};k.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};k.create=function(e,t,n,r,i){if(Ce.util.isArray(r)){for(var a=[],s=0;s<r.length;++s)r[s]!==void 0&&a.push(r[s]);r=a}var o={tagClass:e,type:t,constructed:n,composed:n||Ce.util.isArray(r),value:r};return i&&"bitStringContents"in i&&(o.bitStringContents=i.bitStringContents,o.original=k.copy(o)),o};k.copy=function(e,t){var n;if(Ce.util.isArray(e)){n=[];for(var r=0;r<e.length;++r)n.push(k.copy(e[r],t));return n}return typeof e=="string"?e:(n={tagClass:e.tagClass,type:e.type,constructed:e.constructed,composed:e.composed,value:k.copy(e.value,t)},t&&!t.excludeBitStringContents&&(n.bitStringContents=e.bitStringContents),n)};k.equals=function(e,t,n){if(Ce.util.isArray(e)){if(!Ce.util.isArray(t)||e.length!==t.length)return!1;for(var r=0;r<e.length;++r)if(!k.equals(e[r],t[r]))return!1;return!0}if(typeof e!=typeof t)return!1;if(typeof e=="string")return e===t;var i=e.tagClass===t.tagClass&&e.type===t.type&&e.constructed===t.constructed&&e.composed===t.composed&&k.equals(e.value,t.value);return n&&n.includeBitStringContents&&(i=i&&e.bitStringContents===t.bitStringContents),i};k.getBerValueLength=function(e){var t=e.getByte();if(t!==128){var n,r=t&128;return r?n=e.getInt((t&127)<<3):n=t,n}};function Zr(e,t,n){if(n>t){var r=new Error("Too few bytes to parse DER.");throw r.available=e.length(),r.remaining=t,r.requested=n,r}}var Af=function(e,t){var n=e.getByte();if(t--,n!==128){var r,i=n&128;if(!i)r=n;else{var a=n&127;Zr(e,t,a),r=e.getInt(a<<3)}if(r<0)throw new Error("Negative length: "+r);return r}};k.fromDer=function(e,t){t===void 0&&(t={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof t=="boolean"&&(t={strict:t,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in t||(t.strict=!0),"parseAllBytes"in t||(t.parseAllBytes=!0),"decodeBitStrings"in t||(t.decodeBitStrings=!0),typeof e=="string"&&(e=Ce.util.createBuffer(e));var n=e.length(),r=Un(e,e.length(),0,t);if(t.parseAllBytes&&e.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=n,i.remaining=e.length(),i}return r};function Un(e,t,n,r){var i;Zr(e,t,2);var a=e.getByte();t--;var s=a&192,o=a&31;i=e.length();var l=Af(e,t);if(t-=i-e.length(),l!==void 0&&l>t){if(r.strict){var d=new Error("Too few bytes to read ASN.1 value.");throw d.available=e.length(),d.remaining=t,d.requested=l,d}l=t}var u,c,f=(a&32)===32;if(f)if(u=[],l===void 0)for(;;){if(Zr(e,t,2),e.bytes(2)==="\0\0"){e.getBytes(2),t-=2;break}i=e.length(),u.push(Un(e,t,n+1,r)),t-=i-e.length()}else for(;l>0;)i=e.length(),u.push(Un(e,l,n+1,r)),t-=i-e.length(),l-=i-e.length();if(u===void 0&&s===k.Class.UNIVERSAL&&o===k.Type.BITSTRING&&(c=e.bytes(l)),u===void 0&&r.decodeBitStrings&&s===k.Class.UNIVERSAL&&o===k.Type.BITSTRING&&l>1){var g=e.read,h=t,m=0;if(o===k.Type.BITSTRING&&(Zr(e,t,1),m=e.getByte(),t--),m===0)try{i=e.length();var E={strict:!0,decodeBitStrings:!0},b=Un(e,t,n+1,E),I=i-e.length();t-=I,o==k.Type.BITSTRING&&I++;var x=b.tagClass;I===l&&(x===k.Class.UNIVERSAL||x===k.Class.CONTEXT_SPECIFIC)&&(u=[b])}catch{}u===void 0&&(e.read=g,t=h)}if(u===void 0){if(l===void 0){if(r.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");l=t}if(o===k.Type.BMPSTRING)for(u="";l>0;l-=2)Zr(e,t,2),u+=String.fromCharCode(e.getInt16()),t-=2;else u=e.getBytes(l),t-=l}var L=c===void 0?null:{bitStringContents:c};return k.create(s,o,f,u,L)}k.toDer=function(e){var t=Ce.util.createBuffer(),n=e.tagClass|e.type,r=Ce.util.createBuffer(),i=!1;if("bitStringContents"in e&&(i=!0,e.original&&(i=k.equals(e,e.original))),i)r.putBytes(e.bitStringContents);else if(e.composed){e.constructed?n|=32:r.putByte(0);for(var a=0;a<e.value.length;++a)e.value[a]!==void 0&&r.putBuffer(k.toDer(e.value[a]))}else if(e.type===k.Type.BMPSTRING)for(var a=0;a<e.value.length;++a)r.putInt16(e.value.charCodeAt(a));else e.type===k.Type.INTEGER&&e.value.length>1&&(e.value.charCodeAt(0)===0&&!(e.value.charCodeAt(1)&128)||e.value.charCodeAt(0)===255&&(e.value.charCodeAt(1)&128)===128)?r.putBytes(e.value.substr(1)):r.putBytes(e.value);if(t.putByte(n),r.length()<=127)t.putByte(r.length()&127);else{var s=r.length(),o="";do o+=String.fromCharCode(s&255),s=s>>>8;while(s>0);t.putByte(o.length|128);for(var a=o.length-1;a>=0;--a)t.putByte(o.charCodeAt(a))}return t.putBuffer(r),t};k.oidToDer=function(e){var t=e.split("."),n=Ce.util.createBuffer();n.putByte(40*parseInt(t[0],10)+parseInt(t[1],10));for(var r,i,a,s,o=2;o<t.length;++o){r=!0,i=[],a=parseInt(t[o],10);do s=a&127,a=a>>>7,r||(s|=128),i.push(s),r=!1;while(a>0);for(var l=i.length-1;l>=0;--l)n.putByte(i[l])}return n};k.derToOid=function(e){var t;typeof e=="string"&&(e=Ce.util.createBuffer(e));var n=e.getByte();t=Math.floor(n/40)+"."+n%40;for(var r=0;e.length()>0;)n=e.getByte(),r=r<<7,n&128?r+=n&127:(t+="."+(r+n),r=0);return t};k.utcTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(e.substr(2,2),10)-1,i=parseInt(e.substr(4,2),10),a=parseInt(e.substr(6,2),10),s=parseInt(e.substr(8,2),10),o=0;if(e.length>11){var l=e.charAt(10),d=10;l!=="+"&&l!=="-"&&(o=parseInt(e.substr(10,2),10),d+=2)}if(t.setUTCFullYear(n,r,i),t.setUTCHours(a,s,o,0),d&&(l=e.charAt(d),l==="+"||l==="-")){var u=parseInt(e.substr(d+1,2),10),c=parseInt(e.substr(d+4,2),10),f=u*60+c;f*=6e4,l==="+"?t.setTime(+t-f):t.setTime(+t+f)}return t};k.generalizedTimeToDate=function(e){var t=new Date,n=parseInt(e.substr(0,4),10),r=parseInt(e.substr(4,2),10)-1,i=parseInt(e.substr(6,2),10),a=parseInt(e.substr(8,2),10),s=parseInt(e.substr(10,2),10),o=parseInt(e.substr(12,2),10),l=0,d=0,u=!1;e.charAt(e.length-1)==="Z"&&(u=!0);var c=e.length-5,f=e.charAt(c);if(f==="+"||f==="-"){var g=parseInt(e.substr(c+1,2),10),h=parseInt(e.substr(c+4,2),10);d=g*60+h,d*=6e4,f==="+"&&(d*=-1),u=!0}return e.charAt(14)==="."&&(l=parseFloat(e.substr(14),10)*1e3),u?(t.setUTCFullYear(n,r,i),t.setUTCHours(a,s,o,l),t.setTime(+t+d)):(t.setFullYear(n,r,i),t.setHours(a,s,o,l)),t};k.dateToUtcTime=function(e){if(typeof e=="string")return e;var t="",n=[];n.push((""+e.getUTCFullYear()).substr(2)),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z",t};k.dateToGeneralizedTime=function(e){if(typeof e=="string")return e;var t="",n=[];n.push(""+e.getUTCFullYear()),n.push(""+(e.getUTCMonth()+1)),n.push(""+e.getUTCDate()),n.push(""+e.getUTCHours()),n.push(""+e.getUTCMinutes()),n.push(""+e.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(t+="0"),t+=n[r];return t+="Z",t};k.integerToDer=function(e){var t=Ce.util.createBuffer();if(e>=-128&&e<128)return t.putSignedInt(e,8);if(e>=-32768&&e<32768)return t.putSignedInt(e,16);if(e>=-8388608&&e<8388608)return t.putSignedInt(e,24);if(e>=-2147483648&&e<2147483648)return t.putSignedInt(e,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=e,n};k.derToInteger=function(e){typeof e=="string"&&(e=Ce.util.createBuffer(e));var t=e.length()*8;if(t>32)throw new Error("Integer too large; max is 32-bits.");return e.getSignedInt(t)};k.validate=function(e,t,n,r){var i=!1;if((e.tagClass===t.tagClass||typeof t.tagClass>"u")&&(e.type===t.type||typeof t.type>"u"))if(e.constructed===t.constructed||typeof t.constructed>"u"){if(i=!0,t.value&&Ce.util.isArray(t.value))for(var a=0,s=0;i&&s<t.value.length;++s)i=t.value[s].optional||!1,e.value[a]&&(i=k.validate(e.value[a],t.value[s],n,r),i?++a:t.value[s].optional&&(i=!0)),!i&&r&&r.push("["+t.name+'] Tag class "'+t.tagClass+'", type "'+t.type+'" expected value length "'+t.value.length+'", got "'+e.value.length+'"');if(i&&n&&(t.capture&&(n[t.capture]=e.value),t.captureAsn1&&(n[t.captureAsn1]=e),t.captureBitStringContents&&"bitStringContents"in e&&(n[t.captureBitStringContents]=e.bitStringContents),t.captureBitStringValue&&"bitStringContents"in e))if(e.bitStringContents.length<2)n[t.captureBitStringValue]="";else{var o=e.bitStringContents.charCodeAt(0);if(o!==0)throw new Error("captureBitStringValue only supported for zero unused bits");n[t.captureBitStringValue]=e.bitStringContents.slice(1)}}else r&&r.push("["+t.name+'] Expected constructed "'+t.constructed+'", got "'+e.constructed+'"');else r&&(e.tagClass!==t.tagClass&&r.push("["+t.name+'] Expected tag class "'+t.tagClass+'", got "'+e.tagClass+'"'),e.type!==t.type&&r.push("["+t.name+'] Expected type "'+t.type+'", got "'+e.type+'"'));return i};var oo=/[^\\u0000-\\u00ff]/;k.prettyPrint=function(e,t,n){var r="";t=t||0,n=n||2,t>0&&(r+=`
`);for(var i="",a=0;a<t*n;++a)i+=" ";switch(r+=i+"Tag: ",e.tagClass){case k.Class.UNIVERSAL:r+="Universal:";break;case k.Class.APPLICATION:r+="Application:";break;case k.Class.CONTEXT_SPECIFIC:r+="Context-Specific:";break;case k.Class.PRIVATE:r+="Private:";break}if(e.tagClass===k.Class.UNIVERSAL)switch(r+=e.type,e.type){case k.Type.NONE:r+=" (None)";break;case k.Type.BOOLEAN:r+=" (Boolean)";break;case k.Type.INTEGER:r+=" (Integer)";break;case k.Type.BITSTRING:r+=" (Bit string)";break;case k.Type.OCTETSTRING:r+=" (Octet string)";break;case k.Type.NULL:r+=" (Null)";break;case k.Type.OID:r+=" (Object Identifier)";break;case k.Type.ODESC:r+=" (Object Descriptor)";break;case k.Type.EXTERNAL:r+=" (External or Instance of)";break;case k.Type.REAL:r+=" (Real)";break;case k.Type.ENUMERATED:r+=" (Enumerated)";break;case k.Type.EMBEDDED:r+=" (Embedded PDV)";break;case k.Type.UTF8:r+=" (UTF8)";break;case k.Type.ROID:r+=" (Relative Object Identifier)";break;case k.Type.SEQUENCE:r+=" (Sequence)";break;case k.Type.SET:r+=" (Set)";break;case k.Type.PRINTABLESTRING:r+=" (Printable String)";break;case k.Type.IA5String:r+=" (IA5String (ASCII))";break;case k.Type.UTCTIME:r+=" (UTC time)";break;case k.Type.GENERALIZEDTIME:r+=" (Generalized time)";break;case k.Type.BMPSTRING:r+=" (BMP String)";break}else r+=e.type;if(r+=`
`,r+=i+"Constructed: "+e.constructed+`
`,e.composed){for(var s=0,o="",a=0;a<e.value.length;++a)e.value[a]!==void 0&&(s+=1,o+=k.prettyPrint(e.value[a],t+1,n),a+1<e.value.length&&(o+=","));r+=i+"Sub values: "+s+o}else{if(r+=i+"Value: ",e.type===k.Type.OID){var l=k.derToOid(e.value);r+=l,Ce.pki&&Ce.pki.oids&&l in Ce.pki.oids&&(r+=" ("+Ce.pki.oids[l]+") ")}if(e.type===k.Type.INTEGER)try{r+=k.derToInteger(e.value)}catch{r+="0x"+Ce.util.bytesToHex(e.value)}else if(e.type===k.Type.BITSTRING){if(e.value.length>1?r+="0x"+Ce.util.bytesToHex(e.value.slice(1)):r+="(none)",e.value.length>0){var d=e.value.charCodeAt(0);d==1?r+=" (1 unused bit shown)":d>1&&(r+=" ("+d+" unused bits shown)")}}else if(e.type===k.Type.OCTETSTRING)oo.test(e.value)||(r+="("+e.value+") "),r+="0x"+Ce.util.bytesToHex(e.value);else if(e.type===k.Type.UTF8)try{r+=Ce.util.decodeUtf8(e.value)}catch(u){if(u.message==="URI malformed")r+="0x"+Ce.util.bytesToHex(e.value)+" (malformed UTF8)";else throw u}else e.type===k.Type.PRINTABLESTRING||e.type===k.Type.IA5String?r+=e.value:oo.test(e.value)?r+="0x"+Ce.util.bytesToHex(e.value):e.value.length===0?r+="[null]":r+=e.value}return r};var Xn=J;Xn.md=Xn.md||{};Xn.md.algorithms=Xn.md.algorithms||{};var Ht=J,wf=Ht.hmac=Ht.hmac||{};wf.create=function(){var e=null,t=null,n=null,r=null,i={};return i.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in Ht.md.algorithms)t=Ht.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else t=a;if(s===null)s=e;else{if(typeof s=="string")s=Ht.util.createBuffer(s);else if(Ht.util.isArray(s)){var o=s;s=Ht.util.createBuffer();for(var l=0;l<o.length;++l)s.putByte(o[l])}var d=s.length();d>t.blockLength&&(t.start(),t.update(s.bytes()),s=t.digest()),n=Ht.util.createBuffer(),r=Ht.util.createBuffer(),d=s.length();for(var l=0;l<d;++l){var o=s.at(l);n.putByte(54^o),r.putByte(92^o)}if(d<t.blockLength)for(var o=t.blockLength-d,l=0;l<o;++l)n.putByte(54),r.putByte(92);e=s,n=n.bytes(),r=r.bytes()}t.start(),t.update(n)},i.update=function(a){t.update(a)},i.getMac=function(){var a=t.digest().bytes();return t.start(),t.update(r),t.update(a),t.digest()},i.digest=i.getMac,i};var Dt=J,Y0=Dt.md5=Dt.md5||{};Dt.md.md5=Dt.md.algorithms.md5=Y0;Y0.create=function(){X0||Bf();var e=null,t=Dt.util.createBuffer(),n=new Array(16),r={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,a=0;a<i;++a)r.fullMessageLength.push(0);return t=Dt.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},r},r.start(),r.update=function(i,a){a==="utf8"&&(i=Dt.util.encodeUtf8(i));var s=i.length;r.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=r.fullMessageLength.length-1;o>=0;--o)r.fullMessageLength[o]+=s[1],s[1]=s[0]+(r.fullMessageLength[o]/4294967296>>>0),r.fullMessageLength[o]=r.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),uo(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),r},r.digest=function(){var i=Dt.util.createBuffer();i.putBytes(t.bytes());var a=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,s=a&r.blockLength-1;i.putBytes(Ea.substr(0,r.blockLength-s));for(var o,l=0,d=r.fullMessageLength.length-1;d>=0;--d)o=r.fullMessageLength[d]*8+l,l=o/4294967296>>>0,i.putInt32Le(o>>>0);var u={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3};uo(u,n,i);var c=Dt.util.createBuffer();return c.putInt32Le(u.h0),c.putInt32Le(u.h1),c.putInt32Le(u.h2),c.putInt32Le(u.h3),c},r};var Ea=null,Fn=null,en=null,_r=null,X0=!1;function Bf(){Ea="",Ea+=Dt.util.fillString("\0",64),Fn=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],en=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],_r=new Array(64);for(var e=0;e<64;++e)_r[e]=Math.floor(Math.abs(Math.sin(e+1))*4294967296);X0=!0}function uo(e,t,n){for(var r,i,a,s,o,l,d,u,c=n.length();c>=64;){for(i=e.h0,a=e.h1,s=e.h2,o=e.h3,u=0;u<16;++u)t[u]=n.getInt32Le(),l=o^a&(s^o),r=i+l+_r[u]+t[u],d=en[u],i=o,o=s,s=a,a+=r<<d|r>>>32-d;for(;u<32;++u)l=s^o&(a^s),r=i+l+_r[u]+t[Fn[u]],d=en[u],i=o,o=s,s=a,a+=r<<d|r>>>32-d;for(;u<48;++u)l=a^s^o,r=i+l+_r[u]+t[Fn[u]],d=en[u],i=o,o=s,s=a,a+=r<<d|r>>>32-d;for(;u<64;++u)l=s^(a|~o),r=i+l+_r[u]+t[Fn[u]],d=en[u],i=o,o=s,s=a,a+=r<<d|r>>>32-d;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,c-=64}}var Jn=J,J0=Jn.pem=Jn.pem||{};J0.encode=function(e,t){t=t||{};var n="-----BEGIN "+e.type+`-----\r
`,r;if(e.procType&&(r={name:"Proc-Type",values:[String(e.procType.version),e.procType.type]},n+=Bn(r)),e.contentDomain&&(r={name:"Content-Domain",values:[e.contentDomain]},n+=Bn(r)),e.dekInfo&&(r={name:"DEK-Info",values:[e.dekInfo.algorithm]},e.dekInfo.parameters&&r.values.push(e.dekInfo.parameters),n+=Bn(r)),e.headers)for(var i=0;i<e.headers.length;++i)n+=Bn(e.headers[i]);return e.procType&&(n+=`\r
`),n+=Jn.util.encode64(e.body,t.maxline||64)+`\r
`,n+="-----END "+e.type+`-----\r
`,n};J0.decode=function(e){for(var t=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,r=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=n.exec(e),!!a;){var s=a[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var o={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:Jn.util.decode64(a[3])};if(t.push(o),!!a[2]){for(var l=a[2].split(i),d=0;a&&d<l.length;){for(var u=l[d].replace(/\s+$/,""),c=d+1;c<l.length;++c){var f=l[c];if(!/\s/.test(f[0]))break;u+=f,d=c}if(a=u.match(r),a){for(var g={name:a[1],values:[]},h=a[2].split(","),m=0;m<h.length;++m)g.values.push(Rf(h[m]));if(o.procType)if(!o.contentDomain&&g.name==="Content-Domain")o.contentDomain=h[0]||"";else if(!o.dekInfo&&g.name==="DEK-Info"){if(g.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');o.dekInfo={algorithm:h[0],parameters:h[1]||null}}else o.headers.push(g);else{if(g.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(g.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');o.procType={version:h[0],type:h[1]}}}++d}if(o.procType==="ENCRYPTED"&&!o.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(t.length===0)throw new Error("Invalid PEM formatted message.");return t};function Bn(e){for(var t=e.name+": ",n=[],r=function(l,d){return" "+d},i=0;i<e.values.length;++i)n.push(e.values[i].replace(/^(\S+\r\n)/,r));t+=n.join(",")+`\r
`;for(var a=0,s=-1,i=0;i<t.length;++i,++a)if(a>65&&s!==-1){var o=t[s];o===","?(++s,t=t.substr(0,s)+`\r
 `+t.substr(s)):t=t.substr(0,s)+`\r
`+o+t.substr(s+1),a=i-s-1,s=-1,++i}else(t[i]===" "||t[i]==="	"||t[i]===",")&&(s=i);return t}function Rf(e){return e.replace(/^\s+/,"")}var xe=J;xe.des=xe.des||{};xe.des.startEncrypting=function(e,t,n,r){var i=mi({key:e,output:n,decrypt:!1,mode:r||(t===null?"ECB":"CBC")});return i.start(t),i};xe.des.createEncryptionCipher=function(e,t){return mi({key:e,output:null,decrypt:!1,mode:t})};xe.des.startDecrypting=function(e,t,n,r){var i=mi({key:e,output:n,decrypt:!0,mode:r||(t===null?"ECB":"CBC")});return i.start(t),i};xe.des.createDecryptionCipher=function(e,t){return mi({key:e,output:null,decrypt:!0,mode:t})};xe.des.Algorithm=function(e,t){var n=this;n.name=e,n.mode=new t({blockSize:8,cipher:{encrypt:function(r,i){return lo(n._keys,r,i,!1)},decrypt:function(r,i){return lo(n._keys,r,i,!0)}}}),n._init=!1};xe.des.Algorithm.prototype.initialize=function(e){if(!this._init){var t=xe.util.createBuffer(e.key);if(this.name.indexOf("3DES")===0&&t.length()!==24)throw new Error("Invalid Triple-DES key size: "+t.length()*8);this._keys=Ff(t),this._init=!0}};Kt("DES-ECB",xe.cipher.modes.ecb);Kt("DES-CBC",xe.cipher.modes.cbc);Kt("DES-CFB",xe.cipher.modes.cfb);Kt("DES-OFB",xe.cipher.modes.ofb);Kt("DES-CTR",xe.cipher.modes.ctr);Kt("3DES-ECB",xe.cipher.modes.ecb);Kt("3DES-CBC",xe.cipher.modes.cbc);Kt("3DES-CFB",xe.cipher.modes.cfb);Kt("3DES-OFB",xe.cipher.modes.ofb);Kt("3DES-CTR",xe.cipher.modes.ctr);function Kt(e,t){var n=function(){return new xe.des.Algorithm(e,t)};xe.cipher.registerAlgorithm(e,n)}var _f=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],Nf=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],Pf=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],Lf=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],Of=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],Df=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],kf=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],Uf=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function Ff(e){for(var t=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],r=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],o=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],l=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],d=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],u=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],c=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],f=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],g=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],h=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],m=e.length()>8?3:1,E=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],I=0,x,L=0;L<m;L++){var P=e.getInt32(),_=e.getInt32();x=(P>>>4^_)&252645135,_^=x,P^=x<<4,x=(_>>>-16^P)&65535,P^=x,_^=x<<-16,x=(P>>>2^_)&858993459,_^=x,P^=x<<2,x=(_>>>-16^P)&65535,P^=x,_^=x<<-16,x=(P>>>1^_)&1431655765,_^=x,P^=x<<1,x=(_>>>8^P)&16711935,P^=x,_^=x<<8,x=(P>>>1^_)&1431655765,_^=x,P^=x<<1,x=P<<8|_>>>20&240,P=_<<24|_<<8&16711680|_>>>8&65280|_>>>24&240,_=x;for(var G=0;G<b.length;++G){b[G]?(P=P<<2|P>>>26,_=_<<2|_>>>26):(P=P<<1|P>>>27,_=_<<1|_>>>27),P&=-15,_&=-15;var z=t[P>>>28]|n[P>>>24&15]|r[P>>>20&15]|i[P>>>16&15]|a[P>>>12&15]|s[P>>>8&15]|o[P>>>4&15],Z=l[_>>>28]|d[_>>>24&15]|u[_>>>20&15]|c[_>>>16&15]|f[_>>>12&15]|g[_>>>8&15]|h[_>>>4&15];x=(Z>>>16^z)&65535,E[I++]=z^x,E[I++]=Z^x<<16}}return E}function lo(e,t,n,r){var i=e.length===32?3:9,a;i===3?a=r?[30,-2,-2]:[0,32,2]:a=r?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,o=t[0],l=t[1];s=(o>>>4^l)&252645135,l^=s,o^=s<<4,s=(o>>>16^l)&65535,l^=s,o^=s<<16,s=(l>>>2^o)&858993459,o^=s,l^=s<<2,s=(l>>>8^o)&16711935,o^=s,l^=s<<8,s=(o>>>1^l)&1431655765,l^=s,o^=s<<1,o=o<<1|o>>>31,l=l<<1|l>>>31;for(var d=0;d<i;d+=3){for(var u=a[d+1],c=a[d+2],f=a[d];f!=u;f+=c){var g=l^e[f],h=(l>>>4|l<<28)^e[f+1];s=o,o=l,l=s^(Nf[g>>>24&63]|Lf[g>>>16&63]|Df[g>>>8&63]|Uf[g&63]|_f[h>>>24&63]|Pf[h>>>16&63]|Of[h>>>8&63]|kf[h&63])}s=o,o=l,l=s}o=o>>>1|o<<31,l=l>>>1|l<<31,s=(o>>>1^l)&1431655765,l^=s,o^=s<<1,s=(l>>>8^o)&16711935,o^=s,l^=s<<8,s=(l>>>2^o)&858993459,o^=s,l^=s<<2,s=(o>>>16^l)&65535,l^=s,o^=s<<16,s=(o>>>4^l)&252645135,l^=s,o^=s<<4,n[0]=o,n[1]=l}function mi(e){e=e||{};var t=(e.mode||"CBC").toUpperCase(),n="DES-"+t,r;e.decrypt?r=xe.cipher.createDecipher(n,e.key):r=xe.cipher.createCipher(n,e.key);var i=r.start;return r.start=function(a,s){var o=null;s instanceof xe.util.ByteBuffer&&(o=s,s={}),s=s||{},s.output=o,s.iv=a,i.call(r,s)},r}var rt=J,Mf=rt.pkcs5=rt.pkcs5||{},Wt;rt.util.isNodejs&&!rt.options.usePureJavaScript&&(Wt=En());rt.pbkdf2=Mf.pbkdf2=function(e,t,n,r,i,a){if(typeof i=="function"&&(a=i,i=null),rt.util.isNodejs&&!rt.options.usePureJavaScript&&Wt.pbkdf2&&(i===null||typeof i!="object")&&(Wt.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),e=W.Buffer.from(e,"binary"),t=W.Buffer.from(t,"binary"),a?Wt.pbkdf2Sync.length===4?Wt.pbkdf2(e,t,n,r,function(x,L){if(x)return a(x);a(null,L.toString("binary"))}):Wt.pbkdf2(e,t,n,r,i,function(x,L){if(x)return a(x);a(null,L.toString("binary"))}):Wt.pbkdf2Sync.length===4?Wt.pbkdf2Sync(e,t,n,r).toString("binary"):Wt.pbkdf2Sync(e,t,n,r,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in rt.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=rt.md[i].create()}var s=i.digestLength;if(r>4294967295*s){var o=new Error("Derived key is too long.");if(a)return a(o);throw o}var l=Math.ceil(r/s),d=r-(l-1)*s,u=rt.hmac.create();u.start(i,e);var c="",f,g,h;if(!a){for(var m=1;m<=l;++m){u.start(null,null),u.update(t),u.update(rt.util.int32ToBytes(m)),f=h=u.digest().getBytes();for(var E=2;E<=n;++E)u.start(null,null),u.update(h),g=u.digest().getBytes(),f=rt.util.xorBytes(f,g,s),h=g;c+=m<l?f:f.substr(0,d)}return c}var m=1,E;function b(){if(m>l)return a(null,c);u.start(null,null),u.update(t),u.update(rt.util.int32ToBytes(m)),f=h=u.digest().getBytes(),E=2,I()}function I(){if(E<=n)return u.start(null,null),u.update(h),g=u.digest().getBytes(),f=rt.util.xorBytes(f,g,s),h=g,++E,rt.util.setImmediate(I);c+=m<l?f:f.substr(0,d),++m,b()}b()};var kt=J,Z0=kt.sha256=kt.sha256||{};kt.md.sha256=kt.md.algorithms.sha256=Z0;Z0.create=function(){eu||Kf();var e=null,t=kt.util.createBuffer(),n=new Array(64),r={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,a=0;a<i;++a)r.fullMessageLength.push(0);return t=kt.util.createBuffer(),e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},r},r.start(),r.update=function(i,a){a==="utf8"&&(i=kt.util.encodeUtf8(i));var s=i.length;r.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=r.fullMessageLength.length-1;o>=0;--o)r.fullMessageLength[o]+=s[1],s[1]=s[0]+(r.fullMessageLength[o]/4294967296>>>0),r.fullMessageLength[o]=r.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),co(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),r},r.digest=function(){var i=kt.util.createBuffer();i.putBytes(t.bytes());var a=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,s=a&r.blockLength-1;i.putBytes(Sa.substr(0,r.blockLength-s));for(var o,l,d=r.fullMessageLength[0]*8,u=0;u<r.fullMessageLength.length-1;++u)o=r.fullMessageLength[u+1]*8,l=o/4294967296>>>0,d+=l,i.putInt32(d>>>0),d=o>>>0;i.putInt32(d);var c={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4,h5:e.h5,h6:e.h6,h7:e.h7};co(c,n,i);var f=kt.util.createBuffer();return f.putInt32(c.h0),f.putInt32(c.h1),f.putInt32(c.h2),f.putInt32(c.h3),f.putInt32(c.h4),f.putInt32(c.h5),f.putInt32(c.h6),f.putInt32(c.h7),f},r};var Sa=null,eu=!1,tu=null;function Kf(){Sa="",Sa+=kt.util.fillString("\0",64),tu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],eu=!0}function co(e,t,n){for(var r,i,a,s,o,l,d,u,c,f,g,h,m,E,b,I=n.length();I>=64;){for(d=0;d<16;++d)t[d]=n.getInt32();for(;d<64;++d)r=t[d-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,i=t[d-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,t[d]=r+t[d-7]+i+t[d-16]|0;for(u=e.h0,c=e.h1,f=e.h2,g=e.h3,h=e.h4,m=e.h5,E=e.h6,b=e.h7,d=0;d<64;++d)s=(h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7),o=E^h&(m^E),a=(u>>>2|u<<30)^(u>>>13|u<<19)^(u>>>22|u<<10),l=u&c|f&(u^c),r=b+s+o+tu[d]+t[d],i=a+l,b=E,E=m,m=h,h=g+r>>>0,g=f,f=c,c=u,u=r+i>>>0;e.h0=e.h0+u|0,e.h1=e.h1+c|0,e.h2=e.h2+f|0,e.h3=e.h3+g|0,e.h4=e.h4+h|0,e.h5=e.h5+m|0,e.h6=e.h6+E|0,e.h7=e.h7+b|0,I-=64}}var Pt=J,Mn=null;Pt.util.isNodejs&&!Pt.options.usePureJavaScript&&!rr.versions["node-webkit"]&&(Mn=En());var Vf=Pt.prng=Pt.prng||{};Vf.create=function(e){for(var t={plugin:e,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=e.md,r=new Array(32),i=0;i<32;++i)r[i]=n.create();t.pools=r,t.pool=0,t.generate=function(d,u){if(!u)return t.generateSync(d);var c=t.plugin.cipher,f=t.plugin.increment,g=t.plugin.formatKey,h=t.plugin.formatSeed,m=Pt.util.createBuffer();t.key=null,E();function E(b){if(b)return u(b);if(m.length()>=d)return u(null,m.getBytes(d));if(t.generated>1048575&&(t.key=null),t.key===null)return Pt.util.nextTick(function(){a(E)});var I=c(t.key,t.seed);t.generated+=I.length,m.putBytes(I),t.key=g(c(t.key,f(t.seed))),t.seed=h(c(t.key,t.seed)),Pt.util.setImmediate(E)}},t.generateSync=function(d){var u=t.plugin.cipher,c=t.plugin.increment,f=t.plugin.formatKey,g=t.plugin.formatSeed;t.key=null;for(var h=Pt.util.createBuffer();h.length()<d;){t.generated>1048575&&(t.key=null),t.key===null&&s();var m=u(t.key,t.seed);t.generated+=m.length,h.putBytes(m),t.key=f(u(t.key,c(t.seed))),t.seed=g(u(t.key,t.seed))}return h.getBytes(d)};function a(d){if(t.pools[0].messageLength>=32)return o(),d();var u=32-t.pools[0].messageLength<<5;t.seedFile(u,function(c,f){if(c)return d(c);t.collect(f),o(),d()})}function s(){if(t.pools[0].messageLength>=32)return o();var d=32-t.pools[0].messageLength<<5;t.collect(t.seedFileSync(d)),o()}function o(){t.reseeds=t.reseeds===4294967295?0:t.reseeds+1;var d=t.plugin.md.create();d.update(t.keyBytes);for(var u=1,c=0;c<32;++c)t.reseeds%u===0&&(d.update(t.pools[c].digest().getBytes()),t.pools[c].start()),u=u<<1;t.keyBytes=d.digest().getBytes(),d.start(),d.update(t.keyBytes);var f=d.digest().getBytes();t.key=t.plugin.formatKey(t.keyBytes),t.seed=t.plugin.formatSeed(f),t.generated=0}function l(d){var u=null,c=Pt.util.globalScope,f=c.crypto||c.msCrypto;f&&f.getRandomValues&&(u=function(P){return f.getRandomValues(P)});var g=Pt.util.createBuffer();if(u)for(;g.length()<d;){var h=Math.max(1,Math.min(d-g.length(),65536)/4),m=new Uint32Array(Math.floor(h));try{u(m);for(var E=0;E<m.length;++E)g.putInt32(m[E])}catch(P){if(!(typeof QuotaExceededError<"u"&&P instanceof QuotaExceededError))throw P}}if(g.length()<d)for(var b,I,x,L=Math.floor(Math.random()*65536);g.length()<d;){I=16807*(L&65535),b=16807*(L>>16),I+=(b&32767)<<16,I+=b>>15,I=(I&2147483647)+(I>>31),L=I&4294967295;for(var E=0;E<3;++E)x=L>>>(E<<3),x^=Math.floor(Math.random()*256),g.putByte(x&255)}return g.getBytes(d)}return Mn?(t.seedFile=function(d,u){Mn.randomBytes(d,function(c,f){if(c)return u(c);u(null,f.toString())})},t.seedFileSync=function(d){return Mn.randomBytes(d).toString()}):(t.seedFile=function(d,u){try{u(null,l(d))}catch(c){u(c)}},t.seedFileSync=l),t.collect=function(d){for(var u=d.length,c=0;c<u;++c)t.pools[t.pool].update(d.substr(c,1)),t.pool=t.pool===31?0:t.pool+1},t.collectInt=function(d,u){for(var c="",f=0;f<u;f+=8)c+=String.fromCharCode(d>>f&255);t.collect(c)},t.registerWorker=function(d){if(d===self)t.seedFile=function(c,f){function g(h){var m=h.data;m.forge&&m.forge.prng&&(self.removeEventListener("message",g),f(m.forge.prng.err,m.forge.prng.bytes))}self.addEventListener("message",g),self.postMessage({forge:{prng:{needed:c}}})};else{var u=function(c){var f=c.data;f.forge&&f.forge.prng&&t.seedFile(f.forge.prng.needed,function(g,h){d.postMessage({forge:{prng:{err:g,bytes:h}}})})};d.addEventListener("message",u)}},t};var Pe=J;(function(){if(Pe.random&&Pe.random.getBytes){Pe.random;return}(function(e){var t={},n=new Array(4),r=Pe.util.createBuffer();t.formatKey=function(c){var f=Pe.util.createBuffer(c);return c=new Array(4),c[0]=f.getInt32(),c[1]=f.getInt32(),c[2]=f.getInt32(),c[3]=f.getInt32(),Pe.aes._expandKey(c,!1)},t.formatSeed=function(c){var f=Pe.util.createBuffer(c);return c=new Array(4),c[0]=f.getInt32(),c[1]=f.getInt32(),c[2]=f.getInt32(),c[3]=f.getInt32(),c},t.cipher=function(c,f){return Pe.aes._updateBlock(c,f,n,!1),r.putInt32(n[0]),r.putInt32(n[1]),r.putInt32(n[2]),r.putInt32(n[3]),r.getBytes()},t.increment=function(c){return++c[3],c},t.md=Pe.md.sha256;function i(){var c=Pe.prng.create(t);return c.getBytes=function(f,g){return c.generate(f,g)},c.getBytesSync=function(f){return c.generate(f)},c}var a=i(),s=null,o=Pe.util.globalScope,l=o.crypto||o.msCrypto;if(l&&l.getRandomValues&&(s=function(c){return l.getRandomValues(c)}),Pe.options.usePureJavaScript||!Pe.util.isNodejs&&!s){if(a.collectInt(+new Date,32),typeof navigator<"u"){var d="";for(var u in navigator)try{typeof navigator[u]=="string"&&(d+=navigator[u])}catch{}a.collect(d),d=null}e&&(e().mousemove(function(c){a.collectInt(c.clientX,16),a.collectInt(c.clientY,16)}),e().keypress(function(c){a.collectInt(c.charCode,8)}))}if(!Pe.random)Pe.random=a;else for(var u in a)Pe.random[u]=a[u];Pe.random.createInstance=i,Pe.random})(typeof jQuery<"u"?jQuery:null)})();var ot=J,Vi=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],fo=[1,2,3,5],Gf=function(e,t){return e<<t&65535|(e&65535)>>16-t},Wf=function(e,t){return(e&65535)>>t|e<<16-t&65535};ot.rc2=ot.rc2||{};ot.rc2.expandKey=function(e,t){typeof e=="string"&&(e=ot.util.createBuffer(e)),t=t||128;var n=e,r=e.length(),i=t,a=Math.ceil(i/8),s=255>>(i&7),o;for(o=r;o<128;o++)n.putByte(Vi[n.at(o-1)+n.at(o-r)&255]);for(n.setAt(128-a,Vi[n.at(128-a)&s]),o=127-a;o>=0;o--)n.setAt(o,Vi[n.at(o+1)^n.at(o+a)]);return n};var ru=function(e,t,n){var r=!1,i=null,a=null,s=null,o,l,d,u,c=[];for(e=ot.rc2.expandKey(e,t),d=0;d<64;d++)c.push(e.getInt16Le());n?(o=function(h){for(d=0;d<4;d++)h[d]+=c[u]+(h[(d+3)%4]&h[(d+2)%4])+(~h[(d+3)%4]&h[(d+1)%4]),h[d]=Gf(h[d],fo[d]),u++},l=function(h){for(d=0;d<4;d++)h[d]+=c[h[(d+3)%4]&63]}):(o=function(h){for(d=3;d>=0;d--)h[d]=Wf(h[d],fo[d]),h[d]-=c[u]+(h[(d+3)%4]&h[(d+2)%4])+(~h[(d+3)%4]&h[(d+1)%4]),u--},l=function(h){for(d=3;d>=0;d--)h[d]-=c[h[(d+3)%4]&63]});var f=function(h){var m=[];for(d=0;d<4;d++){var E=i.getInt16Le();s!==null&&(n?E^=s.getInt16Le():s.putInt16Le(E)),m.push(E&65535)}u=n?0:63;for(var b=0;b<h.length;b++)for(var I=0;I<h[b][0];I++)h[b][1](m);for(d=0;d<4;d++)s!==null&&(n?s.putInt16Le(m[d]):m[d]^=s.getInt16Le()),a.putInt16Le(m[d])},g=null;return g={start:function(h,m){h&&typeof h=="string"&&(h=ot.util.createBuffer(h)),r=!1,i=ot.util.createBuffer(),a=m||new ot.util.createBuffer,s=h,g.output=a},update:function(h){for(r||i.putBuffer(h);i.length()>=8;)f([[5,o],[1,l],[6,o],[1,l],[5,o]])},finish:function(h){var m=!0;if(n)if(h)m=h(8,i,!n);else{var E=i.length()===8?8:8-i.length();i.fillWithByte(E,E)}if(m&&(r=!0,g.update()),!n&&(m=i.length()===0,m))if(h)m=h(8,a,!n);else{var b=a.length(),I=a.at(b-1);I>b?m=!1:a.truncate(I)}return m}},g};ot.rc2.startEncrypting=function(e,t,n){var r=ot.rc2.createEncryptionCipher(e,128);return r.start(t,n),r};ot.rc2.createEncryptionCipher=function(e,t){return ru(e,t,!0)};ot.rc2.startDecrypting=function(e,t,n){var r=ot.rc2.createDecryptionCipher(e,128);return r.start(t,n),r};ot.rc2.createDecryptionCipher=function(e,t){return ru(e,t,!1)};var $a=J;$a.jsbn=$a.jsbn||{};var zt;function R(e,t,n){this.data=[],e!=null&&(typeof e=="number"?this.fromNumber(e,t,n):t==null&&typeof e!="string"?this.fromString(e,256):this.fromString(e,t))}$a.jsbn.BigInteger=R;function ue(){return new R(null)}function Hf(e,t,n,r,i,a){for(;--a>=0;){var s=t*this.data[e++]+n.data[r]+i;i=Math.floor(s/67108864),n.data[r++]=s&67108863}return i}function qf(e,t,n,r,i,a){for(var s=t&32767,o=t>>15;--a>=0;){var l=this.data[e]&32767,d=this.data[e++]>>15,u=o*l+d*s;l=s*l+((u&32767)<<15)+n.data[r]+(i&1073741823),i=(l>>>30)+(u>>>15)+o*d+(i>>>30),n.data[r++]=l&1073741823}return i}function ho(e,t,n,r,i,a){for(var s=t&16383,o=t>>14;--a>=0;){var l=this.data[e]&16383,d=this.data[e++]>>14,u=o*l+d*s;l=s*l+((u&16383)<<14)+n.data[r]+i,i=(l>>28)+(u>>14)+o*d,n.data[r++]=l&268435455}return i}typeof navigator>"u"?(R.prototype.am=ho,zt=28):navigator.appName=="Microsoft Internet Explorer"?(R.prototype.am=qf,zt=30):navigator.appName!="Netscape"?(R.prototype.am=Hf,zt=26):(R.prototype.am=ho,zt=28);R.prototype.DB=zt;R.prototype.DM=(1<<zt)-1;R.prototype.DV=1<<zt;var ss=52;R.prototype.FV=Math.pow(2,ss);R.prototype.F1=ss-zt;R.prototype.F2=2*zt-ss;var jf="0123456789abcdefghijklmnopqrstuvwxyz",Ci=new Array,Hr,vt;Hr=48;for(vt=0;vt<=9;++vt)Ci[Hr++]=vt;Hr=97;for(vt=10;vt<36;++vt)Ci[Hr++]=vt;Hr=65;for(vt=10;vt<36;++vt)Ci[Hr++]=vt;function po(e){return jf.charAt(e)}function nu(e,t){var n=Ci[e.charCodeAt(t)];return n??-1}function zf(e){for(var t=this.t-1;t>=0;--t)e.data[t]=this.data[t];e.t=this.t,e.s=this.s}function Qf(e){this.t=1,this.s=e<0?-1:0,e>0?this.data[0]=e:e<-1?this.data[0]=e+this.DV:this.t=0}function sr(e){var t=ue();return t.fromInt(e),t}function Yf(e,t){var n;if(t==16)n=4;else if(t==8)n=3;else if(t==256)n=8;else if(t==2)n=1;else if(t==32)n=5;else if(t==4)n=2;else{this.fromRadix(e,t);return}this.t=0,this.s=0;for(var r=e.length,i=!1,a=0;--r>=0;){var s=n==8?e[r]&255:nu(e,r);if(s<0){e.charAt(r)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=s:a+n>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=n,a>=this.DB&&(a-=this.DB)}n==8&&e[0]&128&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&R.ZERO.subTo(this,this)}function Xf(){for(var e=this.s&this.DM;this.t>0&&this.data[this.t-1]==e;)--this.t}function Jf(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(e==16)t=4;else if(e==8)t=3;else if(e==2)t=1;else if(e==32)t=5;else if(e==4)t=2;else return this.toRadix(e);var n=(1<<t)-1,r,i=!1,a="",s=this.t,o=this.DB-s*this.DB%t;if(s-- >0)for(o<this.DB&&(r=this.data[s]>>o)>0&&(i=!0,a=po(r));s>=0;)o<t?(r=(this.data[s]&(1<<o)-1)<<t-o,r|=this.data[--s]>>(o+=this.DB-t)):(r=this.data[s]>>(o-=t)&n,o<=0&&(o+=this.DB,--s)),r>0&&(i=!0),i&&(a+=po(r));return i?a:"0"}function Zf(){var e=ue();return R.ZERO.subTo(this,e),e}function eh(){return this.s<0?this.negate():this}function th(e){var t=this.s-e.s;if(t!=0)return t;var n=this.t;if(t=n-e.t,t!=0)return this.s<0?-t:t;for(;--n>=0;)if((t=this.data[n]-e.data[n])!=0)return t;return 0}function Ei(e){var t=1,n;return(n=e>>>16)!=0&&(e=n,t+=16),(n=e>>8)!=0&&(e=n,t+=8),(n=e>>4)!=0&&(e=n,t+=4),(n=e>>2)!=0&&(e=n,t+=2),(n=e>>1)!=0&&(e=n,t+=1),t}function rh(){return this.t<=0?0:this.DB*(this.t-1)+Ei(this.data[this.t-1]^this.s&this.DM)}function nh(e,t){var n;for(n=this.t-1;n>=0;--n)t.data[n+e]=this.data[n];for(n=e-1;n>=0;--n)t.data[n]=0;t.t=this.t+e,t.s=this.s}function ih(e,t){for(var n=e;n<this.t;++n)t.data[n-e]=this.data[n];t.t=Math.max(this.t-e,0),t.s=this.s}function ah(e,t){var n=e%this.DB,r=this.DB-n,i=(1<<r)-1,a=Math.floor(e/this.DB),s=this.s<<n&this.DM,o;for(o=this.t-1;o>=0;--o)t.data[o+a+1]=this.data[o]>>r|s,s=(this.data[o]&i)<<n;for(o=a-1;o>=0;--o)t.data[o]=0;t.data[a]=s,t.t=this.t+a+1,t.s=this.s,t.clamp()}function sh(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t){t.t=0;return}var r=e%this.DB,i=this.DB-r,a=(1<<r)-1;t.data[0]=this.data[n]>>r;for(var s=n+1;s<this.t;++s)t.data[s-n-1]|=(this.data[s]&a)<<i,t.data[s-n]=this.data[s]>>r;r>0&&(t.data[this.t-n-1]|=(this.s&a)<<i),t.t=this.t-n,t.clamp()}function oh(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this.data[n]-e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r-=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t.data[n++]=this.DV+r:r>0&&(t.data[n++]=r),t.t=n,t.clamp()}function uh(e,t){var n=this.abs(),r=e.abs(),i=n.t;for(t.t=i+r.t;--i>=0;)t.data[i]=0;for(i=0;i<r.t;++i)t.data[i+n.t]=n.am(0,r.data[i],t,i,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&R.ZERO.subTo(t,t)}function lh(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e.data[n]=0;for(n=0;n<t.t-1;++n){var r=t.am(n,t.data[n],e,2*n,0,1);(e.data[n+t.t]+=t.am(n+1,2*t.data[n],e,2*n+1,r,t.t-n-1))>=t.DV&&(e.data[n+t.t]-=t.DV,e.data[n+t.t+1]=1)}e.t>0&&(e.data[e.t-1]+=t.am(n,t.data[n],e,2*n,0,1)),e.s=0,e.clamp()}function dh(e,t,n){var r=e.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t){t!=null&&t.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=ue());var a=ue(),s=this.s,o=e.s,l=this.DB-Ei(r.data[r.t-1]);l>0?(r.lShiftTo(l,a),i.lShiftTo(l,n)):(r.copyTo(a),i.copyTo(n));var d=a.t,u=a.data[d-1];if(u!=0){var c=u*(1<<this.F1)+(d>1?a.data[d-2]>>this.F2:0),f=this.FV/c,g=(1<<this.F1)/c,h=1<<this.F2,m=n.t,E=m-d,b=t??ue();for(a.dlShiftTo(E,b),n.compareTo(b)>=0&&(n.data[n.t++]=1,n.subTo(b,n)),R.ONE.dlShiftTo(d,b),b.subTo(a,a);a.t<d;)a.data[a.t++]=0;for(;--E>=0;){var I=n.data[--m]==u?this.DM:Math.floor(n.data[m]*f+(n.data[m-1]+h)*g);if((n.data[m]+=a.am(0,I,n,E,0,d))<I)for(a.dlShiftTo(E,b),n.subTo(b,n);n.data[m]<--I;)n.subTo(b,n)}t!=null&&(n.drShiftTo(d,t),s!=o&&R.ZERO.subTo(t,t)),n.t=d,n.clamp(),l>0&&n.rShiftTo(l,n),s<0&&R.ZERO.subTo(n,n)}}}function ch(e){var t=ue();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(R.ZERO)>0&&e.subTo(t,t),t}function xr(e){this.m=e}function fh(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function hh(e){return e}function ph(e){e.divRemTo(this.m,null,e)}function yh(e,t,n){e.multiplyTo(t,n),this.reduce(n)}function vh(e,t){e.squareTo(t),this.reduce(t)}xr.prototype.convert=fh;xr.prototype.revert=hh;xr.prototype.reduce=ph;xr.prototype.mulTo=yh;xr.prototype.sqrTo=vh;function gh(){if(this.t<1)return 0;var e=this.data[0];if(!(e&1))return 0;var t=e&3;return t=t*(2-(e&15)*t)&15,t=t*(2-(e&255)*t)&255,t=t*(2-((e&65535)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function Tr(e){this.m=e,this.mp=e.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function mh(e){var t=ue();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(R.ZERO)>0&&this.m.subTo(t,t),t}function Ch(e){var t=ue();return e.copyTo(t),this.reduce(t),t}function Eh(e){for(;e.t<=this.mt2;)e.data[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=e.data[t]&32767,r=n*this.mpl+((n*this.mph+(e.data[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(n=t+this.m.t,e.data[n]+=this.m.am(0,r,e,t,0,this.m.t);e.data[n]>=e.DV;)e.data[n]-=e.DV,e.data[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function Sh(e,t){e.squareTo(t),this.reduce(t)}function $h(e,t,n){e.multiplyTo(t,n),this.reduce(n)}Tr.prototype.convert=mh;Tr.prototype.revert=Ch;Tr.prototype.reduce=Eh;Tr.prototype.mulTo=$h;Tr.prototype.sqrTo=Sh;function bh(){return(this.t>0?this.data[0]&1:this.s)==0}function xh(e,t){if(e>4294967295||e<1)return R.ONE;var n=ue(),r=ue(),i=t.convert(this),a=Ei(e)-1;for(i.copyTo(n);--a>=0;)if(t.sqrTo(n,r),(e&1<<a)>0)t.mulTo(r,i,n);else{var s=n;n=r,r=s}return t.revert(n)}function Th(e,t){var n;return e<256||t.isEven()?n=new xr(t):n=new Tr(t),this.exp(e,n)}R.prototype.copyTo=zf;R.prototype.fromInt=Qf;R.prototype.fromString=Yf;R.prototype.clamp=Xf;R.prototype.dlShiftTo=nh;R.prototype.drShiftTo=ih;R.prototype.lShiftTo=ah;R.prototype.rShiftTo=sh;R.prototype.subTo=oh;R.prototype.multiplyTo=uh;R.prototype.squareTo=lh;R.prototype.divRemTo=dh;R.prototype.invDigit=gh;R.prototype.isEven=bh;R.prototype.exp=xh;R.prototype.toString=Jf;R.prototype.negate=Zf;R.prototype.abs=eh;R.prototype.compareTo=th;R.prototype.bitLength=rh;R.prototype.mod=ch;R.prototype.modPowInt=Th;R.ZERO=sr(0);R.ONE=sr(1);function Ih(){var e=ue();return this.copyTo(e),e}function Ah(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function wh(){return this.t==0?this.s:this.data[0]<<24>>24}function Bh(){return this.t==0?this.s:this.data[0]<<16>>16}function Rh(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function _h(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function Nh(e){if(e==null&&(e=10),this.signum()==0||e<2||e>36)return"0";var t=this.chunkSize(e),n=Math.pow(e,t),r=sr(n),i=ue(),a=ue(),s="";for(this.divRemTo(r,i,a);i.signum()>0;)s=(n+a.intValue()).toString(e).substr(1)+s,i.divRemTo(r,i,a);return a.intValue().toString(e)+s}function Ph(e,t){this.fromInt(0),t==null&&(t=10);for(var n=this.chunkSize(t),r=Math.pow(t,n),i=!1,a=0,s=0,o=0;o<e.length;++o){var l=nu(e,o);if(l<0){e.charAt(o)=="-"&&this.signum()==0&&(i=!0);continue}s=t*s+l,++a>=n&&(this.dMultiply(r),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(s,0)),i&&R.ZERO.subTo(this,this)}function Lh(e,t,n){if(typeof t=="number")if(e<2)this.fromInt(1);else for(this.fromNumber(e,n),this.testBit(e-1)||this.bitwiseTo(R.ONE.shiftLeft(e-1),os,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(R.ONE.shiftLeft(e-1),this);else{var r=new Array,i=e&7;r.length=(e>>3)+1,t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}}function Oh(){var e=this.t,t=new Array;t[0]=this.s;var n=this.DB-e*this.DB%8,r,i=0;if(e-- >0)for(n<this.DB&&(r=this.data[e]>>n)!=(this.s&this.DM)>>n&&(t[i++]=r|this.s<<this.DB-n);e>=0;)n<8?(r=(this.data[e]&(1<<n)-1)<<8-n,r|=this.data[--e]>>(n+=this.DB-8)):(r=this.data[e]>>(n-=8)&255,n<=0&&(n+=this.DB,--e)),r&128&&(r|=-256),i==0&&(this.s&128)!=(r&128)&&++i,(i>0||r!=this.s)&&(t[i++]=r);return t}function Dh(e){return this.compareTo(e)==0}function kh(e){return this.compareTo(e)<0?this:e}function Uh(e){return this.compareTo(e)>0?this:e}function Fh(e,t,n){var r,i,a=Math.min(e.t,this.t);for(r=0;r<a;++r)n.data[r]=t(this.data[r],e.data[r]);if(e.t<this.t){for(i=e.s&this.DM,r=a;r<this.t;++r)n.data[r]=t(this.data[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=a;r<e.t;++r)n.data[r]=t(i,e.data[r]);n.t=e.t}n.s=t(this.s,e.s),n.clamp()}function Mh(e,t){return e&t}function Kh(e){var t=ue();return this.bitwiseTo(e,Mh,t),t}function os(e,t){return e|t}function Vh(e){var t=ue();return this.bitwiseTo(e,os,t),t}function iu(e,t){return e^t}function Gh(e){var t=ue();return this.bitwiseTo(e,iu,t),t}function au(e,t){return e&~t}function Wh(e){var t=ue();return this.bitwiseTo(e,au,t),t}function Hh(){for(var e=ue(),t=0;t<this.t;++t)e.data[t]=this.DM&~this.data[t];return e.t=this.t,e.s=~this.s,e}function qh(e){var t=ue();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function jh(e){var t=ue();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function zh(e){if(e==0)return-1;var t=0;return e&65535||(e>>=16,t+=16),e&255||(e>>=8,t+=8),e&15||(e>>=4,t+=4),e&3||(e>>=2,t+=2),e&1||++t,t}function Qh(){for(var e=0;e<this.t;++e)if(this.data[e]!=0)return e*this.DB+zh(this.data[e]);return this.s<0?this.t*this.DB:-1}function Yh(e){for(var t=0;e!=0;)e&=e-1,++t;return t}function Xh(){for(var e=0,t=this.s&this.DM,n=0;n<this.t;++n)e+=Yh(this.data[n]^t);return e}function Jh(e){var t=Math.floor(e/this.DB);return t>=this.t?this.s!=0:(this.data[t]&1<<e%this.DB)!=0}function Zh(e,t){var n=R.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n}function e1(e){return this.changeBit(e,os)}function t1(e){return this.changeBit(e,au)}function r1(e){return this.changeBit(e,iu)}function n1(e,t){for(var n=0,r=0,i=Math.min(e.t,this.t);n<i;)r+=this.data[n]+e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;n<this.t;)r+=this.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<e.t;)r+=e.data[n],t.data[n++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t.data[n++]=r:r<-1&&(t.data[n++]=this.DV+r),t.t=n,t.clamp()}function i1(e){var t=ue();return this.addTo(e,t),t}function a1(e){var t=ue();return this.subTo(e,t),t}function s1(e){var t=ue();return this.multiplyTo(e,t),t}function o1(e){var t=ue();return this.divRemTo(e,t,null),t}function u1(e){var t=ue();return this.divRemTo(e,null,t),t}function l1(e){var t=ue(),n=ue();return this.divRemTo(e,t,n),new Array(t,n)}function d1(e){this.data[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function c1(e,t){if(e!=0){for(;this.t<=t;)this.data[this.t++]=0;for(this.data[t]+=e;this.data[t]>=this.DV;)this.data[t]-=this.DV,++t>=this.t&&(this.data[this.t++]=0),++this.data[t]}}function xn(){}function su(e){return e}function f1(e,t,n){e.multiplyTo(t,n)}function h1(e,t){e.squareTo(t)}xn.prototype.convert=su;xn.prototype.revert=su;xn.prototype.mulTo=f1;xn.prototype.sqrTo=h1;function p1(e){return this.exp(e,new xn)}function y1(e,t,n){var r=Math.min(this.t+e.t,t);for(n.s=0,n.t=r;r>0;)n.data[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n.data[r+this.t]=this.am(0,e.data[r],n,r,0,this.t);for(i=Math.min(e.t,t);r<i;++r)this.am(0,e.data[r],n,r,0,t-r);n.clamp()}function v1(e,t,n){--t;var r=n.t=this.t+e.t-t;for(n.s=0;--r>=0;)n.data[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)n.data[this.t+r-t]=this.am(t-r,e.data[r],n,0,0,this.t+r-t);n.clamp(),n.drShiftTo(1,n)}function qr(e){this.r2=ue(),this.q3=ue(),R.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function g1(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=ue();return e.copyTo(t),this.reduce(t),t}function m1(e){return e}function C1(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)}function E1(e,t){e.squareTo(t),this.reduce(t)}function S1(e,t,n){e.multiplyTo(t,n),this.reduce(n)}qr.prototype.convert=g1;qr.prototype.revert=m1;qr.prototype.reduce=C1;qr.prototype.mulTo=S1;qr.prototype.sqrTo=E1;function $1(e,t){var n=e.bitLength(),r,i=sr(1),a;if(n<=0)return i;n<18?r=1:n<48?r=3:n<144?r=4:n<768?r=5:r=6,n<8?a=new xr(t):t.isEven()?a=new qr(t):a=new Tr(t);var s=new Array,o=3,l=r-1,d=(1<<r)-1;if(s[1]=a.convert(this),r>1){var u=ue();for(a.sqrTo(s[1],u);o<=d;)s[o]=ue(),a.mulTo(u,s[o-2],s[o]),o+=2}var c=e.t-1,f,g=!0,h=ue(),m;for(n=Ei(e.data[c])-1;c>=0;){for(n>=l?f=e.data[c]>>n-l&d:(f=(e.data[c]&(1<<n+1)-1)<<l-n,c>0&&(f|=e.data[c-1]>>this.DB+n-l)),o=r;!(f&1);)f>>=1,--o;if((n-=o)<0&&(n+=this.DB,--c),g)s[f].copyTo(i),g=!1;else{for(;o>1;)a.sqrTo(i,h),a.sqrTo(h,i),o-=2;o>0?a.sqrTo(i,h):(m=i,i=h,h=m),a.mulTo(h,s[f],i)}for(;c>=0&&!(e.data[c]&1<<n);)a.sqrTo(i,h),m=i,i=h,h=m,--n<0&&(n=this.DB-1,--c)}return a.revert(i)}function b1(e){var t=this.s<0?this.negate():this.clone(),n=e.s<0?e.negate():e.clone();if(t.compareTo(n)<0){var r=t;t=n,n=r}var i=t.getLowestSetBit(),a=n.getLowestSetBit();if(a<0)return t;for(i<a&&(a=i),a>0&&(t.rShiftTo(a,t),n.rShiftTo(a,n));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),t.compareTo(n)>=0?(t.subTo(n,t),t.rShiftTo(1,t)):(n.subTo(t,n),n.rShiftTo(1,n));return a>0&&n.lShiftTo(a,n),n}function x1(e){if(e<=0)return 0;var t=this.DV%e,n=this.s<0?e-1:0;if(this.t>0)if(t==0)n=this.data[0]%e;else for(var r=this.t-1;r>=0;--r)n=(t*n+this.data[r])%e;return n}function T1(e){var t=e.isEven();if(this.isEven()&&t||e.signum()==0)return R.ZERO;for(var n=e.clone(),r=this.clone(),i=sr(1),a=sr(0),s=sr(0),o=sr(1);n.signum()!=0;){for(;n.isEven();)n.rShiftTo(1,n),t?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(e,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;r.isEven();)r.rShiftTo(1,r),t?((!s.isEven()||!o.isEven())&&(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);n.compareTo(r)>=0?(n.subTo(r,n),t&&i.subTo(s,i),a.subTo(o,a)):(r.subTo(n,r),t&&s.subTo(i,s),o.subTo(a,o))}if(r.compareTo(R.ONE)!=0)return R.ZERO;if(o.compareTo(e)>=0)return o.subtract(e);if(o.signum()<0)o.addTo(e,o);else return o;return o.signum()<0?o.add(e):o}var bt=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],I1=(1<<26)/bt[bt.length-1];function A1(e){var t,n=this.abs();if(n.t==1&&n.data[0]<=bt[bt.length-1]){for(t=0;t<bt.length;++t)if(n.data[0]==bt[t])return!0;return!1}if(n.isEven())return!1;for(t=1;t<bt.length;){for(var r=bt[t],i=t+1;i<bt.length&&r<I1;)r*=bt[i++];for(r=n.modInt(r);t<i;)if(r%bt[t++]==0)return!1}return n.millerRabin(e)}function w1(e){var t=this.subtract(R.ONE),n=t.getLowestSetBit();if(n<=0)return!1;for(var r=t.shiftRight(n),i=B1(),a,s=0;s<e;++s){do a=new R(this.bitLength(),i);while(a.compareTo(R.ONE)<=0||a.compareTo(t)>=0);var o=a.modPow(r,this);if(o.compareTo(R.ONE)!=0&&o.compareTo(t)!=0){for(var l=1;l++<n&&o.compareTo(t)!=0;)if(o=o.modPowInt(2,this),o.compareTo(R.ONE)==0)return!1;if(o.compareTo(t)!=0)return!1}}return!0}function B1(){return{nextBytes:function(e){for(var t=0;t<e.length;++t)e[t]=Math.floor(Math.random()*256)}}}R.prototype.chunkSize=Rh;R.prototype.toRadix=Nh;R.prototype.fromRadix=Ph;R.prototype.fromNumber=Lh;R.prototype.bitwiseTo=Fh;R.prototype.changeBit=Zh;R.prototype.addTo=n1;R.prototype.dMultiply=d1;R.prototype.dAddOffset=c1;R.prototype.multiplyLowerTo=y1;R.prototype.multiplyUpperTo=v1;R.prototype.modInt=x1;R.prototype.millerRabin=w1;R.prototype.clone=Ih;R.prototype.intValue=Ah;R.prototype.byteValue=wh;R.prototype.shortValue=Bh;R.prototype.signum=_h;R.prototype.toByteArray=Oh;R.prototype.equals=Dh;R.prototype.min=kh;R.prototype.max=Uh;R.prototype.and=Kh;R.prototype.or=Vh;R.prototype.xor=Gh;R.prototype.andNot=Wh;R.prototype.not=Hh;R.prototype.shiftLeft=qh;R.prototype.shiftRight=jh;R.prototype.getLowestSetBit=Qh;R.prototype.bitCount=Xh;R.prototype.testBit=Jh;R.prototype.setBit=e1;R.prototype.clearBit=t1;R.prototype.flipBit=r1;R.prototype.add=i1;R.prototype.subtract=a1;R.prototype.multiply=s1;R.prototype.divide=o1;R.prototype.remainder=u1;R.prototype.divideAndRemainder=l1;R.prototype.modPow=$1;R.prototype.modInverse=T1;R.prototype.pow=p1;R.prototype.gcd=b1;R.prototype.isProbablePrime=A1;var Ut=J,ou=Ut.sha1=Ut.sha1||{};Ut.md.sha1=Ut.md.algorithms.sha1=ou;ou.create=function(){uu||R1();var e=null,t=Ut.util.createBuffer(),n=new Array(80),r={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,a=0;a<i;++a)r.fullMessageLength.push(0);return t=Ut.util.createBuffer(),e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},r},r.start(),r.update=function(i,a){a==="utf8"&&(i=Ut.util.encodeUtf8(i));var s=i.length;r.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var o=r.fullMessageLength.length-1;o>=0;--o)r.fullMessageLength[o]+=s[1],s[1]=s[0]+(r.fullMessageLength[o]/4294967296>>>0),r.fullMessageLength[o]=r.fullMessageLength[o]>>>0,s[0]=s[1]/4294967296>>>0;return t.putBytes(i),yo(e,n,t),(t.read>2048||t.length()===0)&&t.compact(),r},r.digest=function(){var i=Ut.util.createBuffer();i.putBytes(t.bytes());var a=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,s=a&r.blockLength-1;i.putBytes(ba.substr(0,r.blockLength-s));for(var o,l,d=r.fullMessageLength[0]*8,u=0;u<r.fullMessageLength.length-1;++u)o=r.fullMessageLength[u+1]*8,l=o/4294967296>>>0,d+=l,i.putInt32(d>>>0),d=o>>>0;i.putInt32(d);var c={h0:e.h0,h1:e.h1,h2:e.h2,h3:e.h3,h4:e.h4};yo(c,n,i);var f=Ut.util.createBuffer();return f.putInt32(c.h0),f.putInt32(c.h1),f.putInt32(c.h2),f.putInt32(c.h3),f.putInt32(c.h4),f},r};var ba=null,uu=!1;function R1(){ba="",ba+=Ut.util.fillString("\0",64),uu=!0}function yo(e,t,n){for(var r,i,a,s,o,l,d,u,c=n.length();c>=64;){for(i=e.h0,a=e.h1,s=e.h2,o=e.h3,l=e.h4,u=0;u<16;++u)r=n.getInt32(),t[u]=r,d=o^a&(s^o),r=(i<<5|i>>>27)+d+l+1518500249+r,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;for(;u<20;++u)r=t[u-3]^t[u-8]^t[u-14]^t[u-16],r=r<<1|r>>>31,t[u]=r,d=o^a&(s^o),r=(i<<5|i>>>27)+d+l+1518500249+r,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;for(;u<32;++u)r=t[u-3]^t[u-8]^t[u-14]^t[u-16],r=r<<1|r>>>31,t[u]=r,d=a^s^o,r=(i<<5|i>>>27)+d+l+1859775393+r,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;for(;u<40;++u)r=t[u-6]^t[u-16]^t[u-28]^t[u-32],r=r<<2|r>>>30,t[u]=r,d=a^s^o,r=(i<<5|i>>>27)+d+l+1859775393+r,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;for(;u<60;++u)r=t[u-6]^t[u-16]^t[u-28]^t[u-32],r=r<<2|r>>>30,t[u]=r,d=a&s|o&(a^s),r=(i<<5|i>>>27)+d+l+2400959708+r,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;for(;u<80;++u)r=t[u-6]^t[u-16]^t[u-28]^t[u-32],r=r<<2|r>>>30,t[u]=r,d=a^s^o,r=(i<<5|i>>>27)+d+l+3395469782+r,l=o,o=s,s=(a<<30|a>>>2)>>>0,a=i,i=r;e.h0=e.h0+i|0,e.h1=e.h1+a|0,e.h2=e.h2+s|0,e.h3=e.h3+o|0,e.h4=e.h4+l|0,c-=64}}var Ft=J,lu=Ft.pkcs1=Ft.pkcs1||{};lu.encode_rsa_oaep=function(e,t,n){var r,i,a,s;typeof n=="string"?(r=n,i=arguments[3]||void 0,a=arguments[4]||void 0):n&&(r=n.label||void 0,i=n.seed||void 0,a=n.md||void 0,n.mgf1&&n.mgf1.md&&(s=n.mgf1.md)),a?a.start():a=Ft.md.sha1.create(),s||(s=a);var o=Math.ceil(e.n.bitLength()/8),l=o-2*a.digestLength-2;if(t.length>l){var d=new Error("RSAES-OAEP input message length is too long.");throw d.length=t.length,d.maxLength=l,d}r||(r=""),a.update(r,"raw");for(var u=a.digest(),c="",f=l-t.length,g=0;g<f;g++)c+="\0";var h=u.getBytes()+c+""+t;if(!i)i=Ft.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var d=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw d.seedLength=i.length,d.digestLength=a.digestLength,d}var m=Zn(i,o-a.digestLength-1,s),E=Ft.util.xorBytes(h,m,h.length),b=Zn(E,a.digestLength,s),I=Ft.util.xorBytes(i,b,i.length);return"\0"+I+E};lu.decode_rsa_oaep=function(e,t,n){var r,i,a;typeof n=="string"?(r=n,i=arguments[3]||void 0):n&&(r=n.label||void 0,i=n.md||void 0,n.mgf1&&n.mgf1.md&&(a=n.mgf1.md));var s=Math.ceil(e.n.bitLength()/8);if(t.length!==s){var E=new Error("RSAES-OAEP encoded message length is invalid.");throw E.length=t.length,E.expectedLength=s,E}if(i===void 0?i=Ft.md.sha1.create():i.start(),a||(a=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");r||(r=""),i.update(r,"raw");for(var o=i.digest().getBytes(),l=t.charAt(0),d=t.substring(1,i.digestLength+1),u=t.substring(1+i.digestLength),c=Zn(u,i.digestLength,a),f=Ft.util.xorBytes(d,c,d.length),g=Zn(f,s-i.digestLength-1,a),h=Ft.util.xorBytes(u,g,u.length),m=h.substring(0,i.digestLength),E=l!=="\0",b=0;b<i.digestLength;++b)E|=o.charAt(b)!==m.charAt(b);for(var I=1,x=i.digestLength,L=i.digestLength;L<h.length;L++){var P=h.charCodeAt(L),_=P&1^1,G=I?65534:0;E|=P&G,I=I&_,x+=I}if(E||h.charCodeAt(x)!==1)throw new Error("Invalid RSAES-OAEP padding.");return h.substring(x+1)};function Zn(e,t,n){n||(n=Ft.md.sha1.create());for(var r="",i=Math.ceil(t/n.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);n.start(),n.update(e+s),r+=n.digest().getBytes()}return r.substring(0,t)}var Zt=J;(function(){if(Zt.prime){Zt.prime;return}var e=Zt.prime=Zt.prime||{},t=Zt.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],r=new t(null);r.fromInt(30);var i=function(c,f){return c|f};e.generateProbablePrime=function(c,f,g){typeof f=="function"&&(g=f,f={}),f=f||{};var h=f.algorithm||"PRIMEINC";typeof h=="string"&&(h={name:h}),h.options=h.options||{};var m=f.prng||Zt.random,E={nextBytes:function(b){for(var I=m.getBytesSync(b.length),x=0;x<b.length;++x)b[x]=I.charCodeAt(x)}};if(h.name==="PRIMEINC")return a(c,E,h.options,g);throw new Error("Invalid prime generation algorithm: "+h.name)};function a(c,f,g,h){return"workers"in g?l(c,f,g,h):s(c,f,g,h)}function s(c,f,g,h){var m=d(c,f),E=0,b=u(m.bitLength());"millerRabinTests"in g&&(b=g.millerRabinTests);var I=10;"maxBlockTime"in g&&(I=g.maxBlockTime),o(m,c,f,E,b,I,h)}function o(c,f,g,h,m,E,b){var I=+new Date;do{if(c.bitLength()>f&&(c=d(f,g)),c.isProbablePrime(m))return b(null,c);c.dAddOffset(n[h++%8],0)}while(E<0||+new Date-I<E);Zt.util.setImmediate(function(){o(c,f,g,h,m,E,b)})}function l(c,f,g,h){if(typeof Worker>"u")return s(c,f,g,h);var m=d(c,f),E=g.workers,b=g.workLoad||100,I=b*30/8,x=g.workerScript||"forge/prime.worker.js";if(E===-1)return Zt.util.estimateCores(function(P,_){P&&(_=2),E=_-1,L()});L();function L(){E=Math.max(1,E);for(var P=[],_=0;_<E;++_)P[_]=new Worker(x);for(var _=0;_<E;++_)P[_].addEventListener("message",z);var G=!1;function z(Z){if(!G){var ie=Z.data;if(ie.found){for(var le=0;le<P.length;++le)P[le].terminate();return G=!0,h(null,new t(ie.prime,16))}m.bitLength()>c&&(m=d(c,f));var de=m.toString(16);Z.target.postMessage({hex:de,workLoad:b}),m.dAddOffset(I,0)}}}}function d(c,f){var g=new t(c,f),h=c-1;return g.testBit(h)||g.bitwiseTo(t.ONE.shiftLeft(h),i,g),g.dAddOffset(31-g.mod(r).byteValue(),0),g}function u(c){return c<=100?27:c<=150?18:c<=200?15:c<=250?12:c<=300?9:c<=350?8:c<=400?7:c<=500?6:c<=600?5:c<=800?4:c<=1250?3:2}})();var H=J;if(typeof oe>"u")var oe=H.jsbn.BigInteger;var xa=H.util.isNodejs?En():null,T=H.asn1,gt=H.util;H.pki=H.pki||{};H.pki.rsa=H.rsa=H.rsa||{};var Q=H.pki,_1=[6,4,2,4,2,4,6,2],N1={name:"PrivateKeyInfo",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:T.Class.UNIVERSAL,type:T.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},P1={name:"RSAPrivateKey",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},L1={name:"RSAPublicKey",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:T.Class.UNIVERSAL,type:T.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},O1=H.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:T.Class.UNIVERSAL,type:T.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},D1={name:"DigestInfo",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:T.Class.UNIVERSAL,type:T.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:T.Class.UNIVERSAL,type:T.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:T.Class.UNIVERSAL,type:T.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:T.Class.UNIVERSAL,type:T.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},k1=function(e){var t;if(e.algorithm in Q.oids)t=Q.oids[e.algorithm];else{var n=new Error("Unknown message digest algorithm.");throw n.algorithm=e.algorithm,n}var r=T.oidToDer(t).getBytes(),i=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]),a=T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[]);a.value.push(T.create(T.Class.UNIVERSAL,T.Type.OID,!1,r)),a.value.push(T.create(T.Class.UNIVERSAL,T.Type.NULL,!1,""));var s=T.create(T.Class.UNIVERSAL,T.Type.OCTETSTRING,!1,e.digest().getBytes());return i.value.push(a),i.value.push(s),T.toDer(i).getBytes()},du=function(e,t,n){if(n)return e.modPow(t.e,t.n);if(!t.p||!t.q)return e.modPow(t.d,t.n);t.dP||(t.dP=t.d.mod(t.p.subtract(oe.ONE))),t.dQ||(t.dQ=t.d.mod(t.q.subtract(oe.ONE))),t.qInv||(t.qInv=t.q.modInverse(t.p));var r;do r=new oe(H.util.bytesToHex(H.random.getBytes(t.n.bitLength()/8)),16);while(r.compareTo(t.n)>=0||!r.gcd(t.n).equals(oe.ONE));e=e.multiply(r.modPow(t.e,t.n)).mod(t.n);for(var i=e.mod(t.p).modPow(t.dP,t.p),a=e.mod(t.q).modPow(t.dQ,t.q);i.compareTo(a)<0;)i=i.add(t.p);var s=i.subtract(a).multiply(t.qInv).mod(t.p).multiply(t.q).add(a);return s=s.multiply(r.modInverse(t.n)).mod(t.n),s};Q.rsa.encrypt=function(e,t,n){var r=n,i,a=Math.ceil(t.n.bitLength()/8);n!==!1&&n!==!0?(r=n===2,i=cu(e,t,n)):(i=H.util.createBuffer(),i.putBytes(e));for(var s=new oe(i.toHex(),16),o=du(s,t,r),l=o.toString(16),d=H.util.createBuffer(),u=a-Math.ceil(l.length/2);u>0;)d.putByte(0),--u;return d.putBytes(H.util.hexToBytes(l)),d.getBytes()};Q.rsa.decrypt=function(e,t,n,r){var i=Math.ceil(t.n.bitLength()/8);if(e.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=e.length,a.expected=i,a}var s=new oe(H.util.createBuffer(e).toHex(),16);if(s.compareTo(t.n)>=0)throw new Error("Encrypted message is invalid.");for(var o=du(s,t,n),l=o.toString(16),d=H.util.createBuffer(),u=i-Math.ceil(l.length/2);u>0;)d.putByte(0),--u;return d.putBytes(H.util.hexToBytes(l)),r!==!1?ei(d.getBytes(),t,n):d.getBytes()};Q.rsa.createKeyPairGenerationState=function(e,t,n){typeof e=="string"&&(e=parseInt(e,10)),e=e||2048,n=n||{};var r=n.prng||H.random,i={nextBytes:function(o){for(var l=r.getBytesSync(o.length),d=0;d<o.length;++d)o[d]=l.charCodeAt(d)}},a=n.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:e,rng:i,eInt:t||65537,e:new oe(null),p:null,q:null,qBits:e>>1,pBits:e-(e>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};Q.rsa.stepKeyPairGenerationState=function(e,t){"algorithm"in e||(e.algorithm="PRIMEINC");var n=new oe(null);n.fromInt(30);for(var r=0,i=function(c,f){return c|f},a=+new Date,s,o=0;e.keys===null&&(t<=0||o<t);){if(e.state===0){var l=e.p===null?e.pBits:e.qBits,d=l-1;e.pqState===0?(e.num=new oe(l,e.rng),e.num.testBit(d)||e.num.bitwiseTo(oe.ONE.shiftLeft(d),i,e.num),e.num.dAddOffset(31-e.num.mod(n).byteValue(),0),r=0,++e.pqState):e.pqState===1?e.num.bitLength()>l?e.pqState=0:e.num.isProbablePrime(F1(e.num.bitLength()))?++e.pqState:e.num.dAddOffset(_1[r++%8],0):e.pqState===2?e.pqState=e.num.subtract(oe.ONE).gcd(e.e).compareTo(oe.ONE)===0?3:0:e.pqState===3&&(e.pqState=0,e.p===null?e.p=e.num:e.q=e.num,e.p!==null&&e.q!==null&&++e.state,e.num=null)}else if(e.state===1)e.p.compareTo(e.q)<0&&(e.num=e.p,e.p=e.q,e.q=e.num),++e.state;else if(e.state===2)e.p1=e.p.subtract(oe.ONE),e.q1=e.q.subtract(oe.ONE),e.phi=e.p1.multiply(e.q1),++e.state;else if(e.state===3)e.phi.gcd(e.e).compareTo(oe.ONE)===0?++e.state:(e.p=null,e.q=null,e.state=0);else if(e.state===4)e.n=e.p.multiply(e.q),e.n.bitLength()===e.bits?++e.state:(e.q=null,e.state=0);else if(e.state===5){var u=e.e.modInverse(e.phi);e.keys={privateKey:Q.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:Q.rsa.setPublicKey(e.n,e.e)}}s=+new Date,o+=s-a,a=s}return e.keys!==null};Q.rsa.generateKeyPair=function(e,t,n,r){if(arguments.length===1?typeof e=="object"?(n=e,e=void 0):typeof e=="function"&&(r=e,e=void 0):arguments.length===2?typeof e=="number"?typeof t=="function"?(r=t,t=void 0):typeof t!="number"&&(n=t,t=void 0):(n=e,r=t,e=void 0,t=void 0):arguments.length===3&&(typeof t=="number"?typeof n=="function"&&(r=n,n=void 0):(r=n,n=t,t=void 0)),n=n||{},e===void 0&&(e=n.bits||2048),t===void 0&&(t=n.e||65537),!H.options.usePureJavaScript&&!n.prng&&e>=256&&e<=16384&&(t===65537||t===3)){if(r){if(vo("generateKeyPair"))return xa.generateKeyPair("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(o,l,d){if(o)return r(o);r(null,{privateKey:Q.privateKeyFromPem(d),publicKey:Q.publicKeyFromPem(l)})});if(go("generateKey")&&go("exportKey"))return gt.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:Co(t),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(o){return gt.globalScope.crypto.subtle.exportKey("pkcs8",o.privateKey)}).then(void 0,function(o){r(o)}).then(function(o){if(o){var l=Q.privateKeyFromAsn1(T.fromDer(H.util.createBuffer(o)));r(null,{privateKey:l,publicKey:Q.setRsaPublicKey(l.n,l.e)})}});if(mo("generateKey")&&mo("exportKey")){var i=gt.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:e,publicExponent:Co(t),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(o){var l=o.target.result,d=gt.globalScope.msCrypto.subtle.exportKey("pkcs8",l.privateKey);d.oncomplete=function(u){var c=u.target.result,f=Q.privateKeyFromAsn1(T.fromDer(H.util.createBuffer(c)));r(null,{privateKey:f,publicKey:Q.setRsaPublicKey(f.n,f.e)})},d.onerror=function(u){r(u)}},i.onerror=function(o){r(o)};return}}else if(vo("generateKeyPairSync")){var a=xa.generateKeyPairSync("rsa",{modulusLength:e,publicExponent:t,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Q.privateKeyFromPem(a.privateKey),publicKey:Q.publicKeyFromPem(a.publicKey)}}}var s=Q.rsa.createKeyPairGenerationState(e,t,n);if(!r)return Q.rsa.stepKeyPairGenerationState(s,0),s.keys;U1(s,n,r)};Q.setRsaPublicKey=Q.rsa.setPublicKey=function(e,t){var n={n:e,e:t};return n.encrypt=function(r,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(o,l,d){return cu(o,l,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(o,l){return H.pkcs1.encode_rsa_oaep(l,o,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(o){return o}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(r,n,!0);return Q.rsa.encrypt(s,n,!0)},n.verify=function(r,i,a,s){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),a==="RSASSA-PKCS1-V1_5"?a={verify:function(l,d){d=ei(d,n,!0);var u=T.fromDer(d,{parseAllBytes:s._parseAllDigestBytes}),c={},f=[];if(!T.validate(u,D1,c,f)){var g=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw g.errors=f,g}var h=T.derToOid(c.algorithmIdentifier);if(!(h===H.oids.md2||h===H.oids.md5||h===H.oids.sha1||h===H.oids.sha224||h===H.oids.sha256||h===H.oids.sha384||h===H.oids.sha512||h===H.oids["sha512-224"]||h===H.oids["sha512-256"])){var g=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw g.oid=h,g}if((h===H.oids.md2||h===H.oids.md5)&&!("parameters"in c))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return l===c.digest}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(l,d){return d=ei(d,n,!0),l===d}});var o=Q.rsa.decrypt(i,n,!0,!1);return a.verify(r,o,n.n.bitLength())},n};Q.setRsaPrivateKey=Q.rsa.setPrivateKey=function(e,t,n,r,i,a,s,o){var l={n:e,e:t,d:n,p:r,q:i,dP:a,dQ:s,qInv:o};return l.decrypt=function(d,u,c){typeof u=="string"?u=u.toUpperCase():u===void 0&&(u="RSAES-PKCS1-V1_5");var f=Q.rsa.decrypt(d,l,!1,!1);if(u==="RSAES-PKCS1-V1_5")u={decode:ei};else if(u==="RSA-OAEP"||u==="RSAES-OAEP")u={decode:function(g,h){return H.pkcs1.decode_rsa_oaep(h,g,c)}};else if(["RAW","NONE","NULL",null].indexOf(u)!==-1)u={decode:function(g){return g}};else throw new Error('Unsupported encryption scheme: "'+u+'".');return u.decode(f,l,!1)},l.sign=function(d,u){var c=!1;typeof u=="string"&&(u=u.toUpperCase()),u===void 0||u==="RSASSA-PKCS1-V1_5"?(u={encode:k1},c=1):(u==="NONE"||u==="NULL"||u===null)&&(u={encode:function(){return d}},c=1);var f=u.encode(d,l.n.bitLength());return Q.rsa.encrypt(f,l,c)},l};Q.wrapRsaPrivateKey=function(e){return T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,T.integerToDer(0).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(Q.oids.rsaEncryption).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.NULL,!1,"")]),T.create(T.Class.UNIVERSAL,T.Type.OCTETSTRING,!1,T.toDer(e).getBytes())])};Q.privateKeyFromAsn1=function(e){var t={},n=[];if(T.validate(e,N1,t,n)&&(e=T.fromDer(H.util.createBuffer(t.privateKey))),t={},n=[],!T.validate(e,P1,t,n)){var r=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw r.errors=n,r}var i,a,s,o,l,d,u,c;return i=H.util.createBuffer(t.privateKeyModulus).toHex(),a=H.util.createBuffer(t.privateKeyPublicExponent).toHex(),s=H.util.createBuffer(t.privateKeyPrivateExponent).toHex(),o=H.util.createBuffer(t.privateKeyPrime1).toHex(),l=H.util.createBuffer(t.privateKeyPrime2).toHex(),d=H.util.createBuffer(t.privateKeyExponent1).toHex(),u=H.util.createBuffer(t.privateKeyExponent2).toHex(),c=H.util.createBuffer(t.privateKeyCoefficient).toHex(),Q.setRsaPrivateKey(new oe(i,16),new oe(a,16),new oe(s,16),new oe(o,16),new oe(l,16),new oe(d,16),new oe(u,16),new oe(c,16))};Q.privateKeyToAsn1=Q.privateKeyToRSAPrivateKey=function(e){return T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,T.integerToDer(0).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Rt(e.n)),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Rt(e.e)),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Rt(e.d)),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Rt(e.p)),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Rt(e.q)),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Rt(e.dP)),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Rt(e.dQ)),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Rt(e.qInv))])};Q.publicKeyFromAsn1=function(e){var t={},n=[];if(T.validate(e,O1,t,n)){var r=T.derToOid(t.publicKeyOid);if(r!==Q.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=r,i}e=t.rsaPublicKey}if(n=[],!T.validate(e,L1,t,n)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=n,i}var a=H.util.createBuffer(t.publicKeyModulus).toHex(),s=H.util.createBuffer(t.publicKeyExponent).toHex();return Q.setRsaPublicKey(new oe(a,16),new oe(s,16))};Q.publicKeyToAsn1=Q.publicKeyToSubjectPublicKeyInfo=function(e){return T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.OID,!1,T.oidToDer(Q.oids.rsaEncryption).getBytes()),T.create(T.Class.UNIVERSAL,T.Type.NULL,!1,"")]),T.create(T.Class.UNIVERSAL,T.Type.BITSTRING,!1,[Q.publicKeyToRSAPublicKey(e)])])};Q.publicKeyToRSAPublicKey=function(e){return T.create(T.Class.UNIVERSAL,T.Type.SEQUENCE,!0,[T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Rt(e.n)),T.create(T.Class.UNIVERSAL,T.Type.INTEGER,!1,Rt(e.e))])};function cu(e,t,n){var r=H.util.createBuffer(),i=Math.ceil(t.n.bitLength()/8);if(e.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=e.length,a.max=i-11,a}r.putByte(0),r.putByte(n);var s=i-3-e.length,o;if(n===0||n===1){o=n===0?0:255;for(var l=0;l<s;++l)r.putByte(o)}else for(;s>0;){for(var d=0,u=H.random.getBytes(s),l=0;l<s;++l)o=u.charCodeAt(l),o===0?++d:r.putByte(o);s=d}return r.putByte(0),r.putBytes(e),r}function ei(e,t,n,r){var i=Math.ceil(t.n.bitLength()/8),a=H.util.createBuffer(e),s=a.getByte(),o=a.getByte();if(s!==0||n&&o!==0&&o!==1||!n&&o!=2||n&&o===0&&typeof r>"u")throw new Error("Encryption block is invalid.");var l=0;if(o===0){l=i-3-r;for(var d=0;d<l;++d)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(o===1)for(l=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++l}else if(o===2)for(l=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++l}var u=a.getByte();if(u!==0||l!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function U1(e,t,n){typeof t=="function"&&(n=t,t={}),t=t||{};var r={algorithm:{name:t.algorithm||"PRIMEINC",options:{workers:t.workers||2,workLoad:t.workLoad||100,workerScript:t.workerScript}}};"prng"in t&&(r.prng=t.prng),i();function i(){a(e.pBits,function(o,l){if(o)return n(o);if(e.p=l,e.q!==null)return s(o,e.q);a(e.qBits,s)})}function a(o,l){H.prime.generateProbablePrime(o,r,l)}function s(o,l){if(o)return n(o);if(e.q=l,e.p.compareTo(e.q)<0){var d=e.p;e.p=e.q,e.q=d}if(e.p.subtract(oe.ONE).gcd(e.e).compareTo(oe.ONE)!==0){e.p=null,i();return}if(e.q.subtract(oe.ONE).gcd(e.e).compareTo(oe.ONE)!==0){e.q=null,a(e.qBits,s);return}if(e.p1=e.p.subtract(oe.ONE),e.q1=e.q.subtract(oe.ONE),e.phi=e.p1.multiply(e.q1),e.phi.gcd(e.e).compareTo(oe.ONE)!==0){e.p=e.q=null,i();return}if(e.n=e.p.multiply(e.q),e.n.bitLength()!==e.bits){e.q=null,a(e.qBits,s);return}var u=e.e.modInverse(e.phi);e.keys={privateKey:Q.rsa.setPrivateKey(e.n,e.e,u,e.p,e.q,u.mod(e.p1),u.mod(e.q1),e.q.modInverse(e.p)),publicKey:Q.rsa.setPublicKey(e.n,e.e)},n(null,e.keys)}}function Rt(e){var t=e.toString(16);t[0]>="8"&&(t="00"+t);var n=H.util.hexToBytes(t);return n.length>1&&(n.charCodeAt(0)===0&&!(n.charCodeAt(1)&128)||n.charCodeAt(0)===255&&(n.charCodeAt(1)&128)===128)?n.substr(1):n}function F1(e){return e<=100?27:e<=150?18:e<=200?15:e<=250?12:e<=300?9:e<=350?8:e<=400?7:e<=500?6:e<=600?5:e<=800?4:e<=1250?3:2}function vo(e){return H.util.isNodejs&&typeof xa[e]=="function"}function go(e){return typeof gt.globalScope<"u"&&typeof gt.globalScope.crypto=="object"&&typeof gt.globalScope.crypto.subtle=="object"&&typeof gt.globalScope.crypto.subtle[e]=="function"}function mo(e){return typeof gt.globalScope<"u"&&typeof gt.globalScope.msCrypto=="object"&&typeof gt.globalScope.msCrypto.subtle=="object"&&typeof gt.globalScope.msCrypto.subtle[e]=="function"}function Co(e){for(var t=H.util.hexToBytes(e.toString(16)),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}var M=J;if(typeof M1>"u")var M1=M.jsbn.BigInteger;var w=M.asn1,X=M.pki=M.pki||{};X.pbe=M.pbe=M.pbe||{};var pr=X.oids,K1={name:"EncryptedPrivateKeyInfo",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},V1={name:"PBES2Algorithms",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:w.Class.UNIVERSAL,type:w.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},G1={name:"pkcs-12PbeParams",tagClass:w.Class.UNIVERSAL,type:w.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:w.Class.UNIVERSAL,type:w.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:w.Class.UNIVERSAL,type:w.Type.INTEGER,constructed:!1,capture:"iterations"}]};X.encryptPrivateKeyInfo=function(e,t,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var r=M.random.getBytesSync(n.saltSize),i=n.count,a=w.integerToDer(i),s,o,l;if(n.algorithm.indexOf("aes")===0||n.algorithm==="des"){var d,u,c;switch(n.algorithm){case"aes128":s=16,d=16,u=pr["aes128-CBC"],c=M.aes.createEncryptionCipher;break;case"aes192":s=24,d=16,u=pr["aes192-CBC"],c=M.aes.createEncryptionCipher;break;case"aes256":s=32,d=16,u=pr["aes256-CBC"],c=M.aes.createEncryptionCipher;break;case"des":s=8,d=8,u=pr.desCBC,c=M.des.createEncryptionCipher;break;default:var f=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw f.algorithm=n.algorithm,f}var g="hmacWith"+n.prfAlgorithm.toUpperCase(),h=hu(g),m=M.pkcs5.pbkdf2(t,r,i,s,h),E=M.random.getBytesSync(d),b=c(m);b.start(E),b.update(w.toDer(e)),b.finish(),l=b.output.getBytes();var I=W1(r,a,s,g);o=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(pr.pkcs5PBES2).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(pr.pkcs5PBKDF2).getBytes()),I]),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(u).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,E)])])])}else if(n.algorithm==="3des"){s=24;var x=new M.util.ByteBuffer(r),m=X.pbe.generatePkcs12Key(t,x,1,i,s),E=X.pbe.generatePkcs12Key(t,x,2,i,s),b=M.des.createEncryptionCipher(m);b.start(E),b.update(w.toDer(e)),b.finish(),l=b.output.getBytes(),o=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(pr["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,r),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,a.getBytes())])])}else{var f=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw f.algorithm=n.algorithm,f}var L=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[o,w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,l)]);return L};X.decryptPrivateKeyInfo=function(e,t){var n=null,r={},i=[];if(!w.validate(e,K1,r,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=w.derToOid(r.encryptionOid),o=X.pbe.getCipher(s,r.encryptionParams,t),l=M.util.createBuffer(r.encryptedData);return o.update(l),o.finish()&&(n=w.fromDer(o.output)),n};X.encryptedPrivateKeyToPem=function(e,t){var n={type:"ENCRYPTED PRIVATE KEY",body:w.toDer(e).getBytes()};return M.pem.encode(n,{maxline:t})};X.encryptedPrivateKeyFromPem=function(e){var t=M.pem.decode(e)[0];if(t.type!=="ENCRYPTED PRIVATE KEY"){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return w.fromDer(t.body)};X.encryptRsaPrivateKey=function(e,t,n){if(n=n||{},!n.legacy){var r=X.wrapRsaPrivateKey(X.privateKeyToAsn1(e));return r=X.encryptPrivateKeyInfo(r,t,n),X.encryptedPrivateKeyToPem(r)}var i,a,s,o;switch(n.algorithm){case"aes128":i="AES-128-CBC",s=16,a=M.random.getBytesSync(16),o=M.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=M.random.getBytesSync(16),o=M.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=M.random.getBytesSync(16),o=M.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=M.random.getBytesSync(8),o=M.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,a=M.random.getBytesSync(8),o=M.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw l.algorithm=n.algorithm,l}var d=M.pbe.opensslDeriveBytes(t,a.substr(0,8),s),u=o(d);u.start(a),u.update(w.toDer(X.privateKeyToAsn1(e))),u.finish();var c={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:M.util.bytesToHex(a).toUpperCase()},body:u.output.getBytes()};return M.pem.encode(c)};X.decryptRsaPrivateKey=function(e,t){var n=null,r=M.pem.decode(e)[0];if(r.type!=="ENCRYPTED PRIVATE KEY"&&r.type!=="PRIVATE KEY"&&r.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(r.procType&&r.procType.type==="ENCRYPTED"){var a,s;switch(r.dekInfo.algorithm){case"DES-CBC":a=8,s=M.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=M.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=M.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=M.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=M.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(c){return M.rc2.createDecryptionCipher(c,40)};break;case"RC2-64-CBC":a=8,s=function(c){return M.rc2.createDecryptionCipher(c,64)};break;case"RC2-128-CBC":a=16,s=function(c){return M.rc2.createDecryptionCipher(c,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+r.dekInfo.algorithm+'".');throw i.algorithm=r.dekInfo.algorithm,i}var o=M.util.hexToBytes(r.dekInfo.parameters),l=M.pbe.opensslDeriveBytes(t,o.substr(0,8),a),d=s(l);if(d.start(o),d.update(M.util.createBuffer(r.body)),d.finish())n=d.output.getBytes();else return n}else n=r.body;return r.type==="ENCRYPTED PRIVATE KEY"?n=X.decryptPrivateKeyInfo(w.fromDer(n),t):n=w.fromDer(n),n!==null&&(n=X.privateKeyFromAsn1(n)),n};X.pbe.generatePkcs12Key=function(e,t,n,r,i,a){var s,o;if(typeof a>"u"||a===null){if(!("sha1"in M.md))throw new Error('"sha1" hash algorithm unavailable.');a=M.md.sha1.create()}var l=a.digestLength,d=a.blockLength,u=new M.util.ByteBuffer,c=new M.util.ByteBuffer;if(e!=null){for(o=0;o<e.length;o++)c.putInt16(e.charCodeAt(o));c.putInt16(0)}var f=c.length(),g=t.length(),h=new M.util.ByteBuffer;h.fillWithByte(n,d);var m=d*Math.ceil(g/d),E=new M.util.ByteBuffer;for(o=0;o<m;o++)E.putByte(t.at(o%g));var b=d*Math.ceil(f/d),I=new M.util.ByteBuffer;for(o=0;o<b;o++)I.putByte(c.at(o%f));var x=E;x.putBuffer(I);for(var L=Math.ceil(i/l),P=1;P<=L;P++){var _=new M.util.ByteBuffer;_.putBytes(h.bytes()),_.putBytes(x.bytes());for(var G=0;G<r;G++)a.start(),a.update(_.getBytes()),_=a.digest();var z=new M.util.ByteBuffer;for(o=0;o<d;o++)z.putByte(_.at(o%l));var Z=Math.ceil(g/d)+Math.ceil(f/d),ie=new M.util.ByteBuffer;for(s=0;s<Z;s++){var le=new M.util.ByteBuffer(x.getBytes(d)),de=511;for(o=z.length()-1;o>=0;o--)de=de>>8,de+=z.at(o)+le.at(o),le.setAt(o,de&255);ie.putBuffer(le)}x=ie,u.putBuffer(_)}return u.truncate(u.length()-i),u};X.pbe.getCipher=function(e,t,n){switch(e){case X.oids.pkcs5PBES2:return X.pbe.getCipherForPBES2(e,t,n);case X.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case X.oids["pbewithSHAAnd40BitRC2-CBC"]:return X.pbe.getCipherForPKCS12PBE(e,t,n);default:var r=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw r.oid=e,r.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],r}};X.pbe.getCipherForPBES2=function(e,t,n){var r={},i=[];if(!w.validate(t,V1,r,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(e=w.derToOid(r.kdfOid),e!==X.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=e,a.supportedOids=["pkcs5PBKDF2"],a}if(e=w.derToOid(r.encOid),e!==X.oids["aes128-CBC"]&&e!==X.oids["aes192-CBC"]&&e!==X.oids["aes256-CBC"]&&e!==X.oids["des-EDE3-CBC"]&&e!==X.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=e,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=r.kdfSalt,o=M.util.createBuffer(r.kdfIterationCount);o=o.getInt(o.length()<<3);var l,d;switch(X.oids[e]){case"aes128-CBC":l=16,d=M.aes.createDecryptionCipher;break;case"aes192-CBC":l=24,d=M.aes.createDecryptionCipher;break;case"aes256-CBC":l=32,d=M.aes.createDecryptionCipher;break;case"des-EDE3-CBC":l=24,d=M.des.createDecryptionCipher;break;case"desCBC":l=8,d=M.des.createDecryptionCipher;break}var u=fu(r.prfOid),c=M.pkcs5.pbkdf2(n,s,o,l,u),f=r.encIv,g=d(c);return g.start(f),g};X.pbe.getCipherForPKCS12PBE=function(e,t,n){var r={},i=[];if(!w.validate(t,G1,r,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=M.util.createBuffer(r.salt),o=M.util.createBuffer(r.iterations);o=o.getInt(o.length()<<3);var l,d,u;switch(e){case X.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:l=24,d=8,u=M.des.startDecrypting;break;case X.oids["pbewithSHAAnd40BitRC2-CBC"]:l=5,d=8,u=function(m,E){var b=M.rc2.createDecryptionCipher(m,40);return b.start(E,null),b};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=e,a}var c=fu(r.prfOid),f=X.pbe.generatePkcs12Key(n,s,1,o,l,c);c.start();var g=X.pbe.generatePkcs12Key(n,s,2,o,d,c);return u(f,g)};X.pbe.opensslDeriveBytes=function(e,t,n,r){if(typeof r>"u"||r===null){if(!("md5"in M.md))throw new Error('"md5" hash algorithm unavailable.');r=M.md.md5.create()}t===null&&(t="");for(var i=[Eo(r,e+t)],a=16,s=1;a<n;++s,a+=16)i.push(Eo(r,i[s-1]+e+t));return i.join("").substr(0,n)};function Eo(e,t){return e.start().update(t).digest().getBytes()}function fu(e){var t;if(!e)t="hmacWithSHA1";else if(t=X.oids[w.derToOid(e)],!t){var n=new Error("Unsupported PRF OID.");throw n.oid=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}return hu(t)}function hu(e){var t=M.md;switch(e){case"hmacWithSHA224":t=M.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":e=e.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=e,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!t||!(e in t))throw new Error("Unknown hash algorithm: "+e);return t[e].create()}function W1(e,t,n,r){var i=w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OCTETSTRING,!1,e),w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,t.getBytes())]);return r!=="hmacWithSHA1"&&i.value.push(w.create(w.Class.UNIVERSAL,w.Type.INTEGER,!1,M.util.hexToBytes(n.toString(16))),w.create(w.Class.UNIVERSAL,w.Type.SEQUENCE,!0,[w.create(w.Class.UNIVERSAL,w.Type.OID,!1,w.oidToDer(X.oids[r]).getBytes()),w.create(w.Class.UNIVERSAL,w.Type.NULL,!1,"")])),i}var Dr=J,U=Dr.asn1,jr=Dr.pkcs7asn1=Dr.pkcs7asn1||{};Dr.pkcs7=Dr.pkcs7||{};Dr.pkcs7.asn1=jr;var pu={name:"ContentInfo",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:U.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};jr.contentInfoValidator=pu;var yu={name:"EncryptedContentInfo",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:U.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:U.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};jr.envelopedDataValidator={name:"EnvelopedData",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:U.Class.UNIVERSAL,type:U.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:U.Class.UNIVERSAL,type:U.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(yu)};jr.encryptedDataValidator={name:"EncryptedData",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:U.Class.UNIVERSAL,type:U.Type.INTEGER,constructed:!1,capture:"version"}].concat(yu)};var H1={name:"SignerInfo",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:U.Class.UNIVERSAL,type:U.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:U.Class.UNIVERSAL,type:U.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:U.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:U.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:U.Class.UNIVERSAL,type:U.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:U.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};jr.signedDataValidator={name:"SignedData",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:U.Class.UNIVERSAL,type:U.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:U.Class.UNIVERSAL,type:U.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},pu,{name:"SignedData.Certificates",tagClass:U.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:U.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:U.Class.UNIVERSAL,type:U.Type.SET,capture:"signerInfos",optional:!0,value:[H1]}]};jr.recipientInfoValidator={name:"RecipientInfo",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:U.Class.UNIVERSAL,type:U.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:U.Class.UNIVERSAL,type:U.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:U.Class.UNIVERSAL,type:U.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:U.Class.UNIVERSAL,type:U.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:U.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:U.Class.UNIVERSAL,type:U.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]};var Sr=J;Sr.mgf=Sr.mgf||{};var q1=Sr.mgf.mgf1=Sr.mgf1=Sr.mgf1||{};q1.create=function(e){var t={generate:function(n,r){for(var i=new Sr.util.ByteBuffer,a=Math.ceil(r/e.digestLength),s=0;s<a;s++){var o=new Sr.util.ByteBuffer;o.putInt32(s),e.start(),e.update(n+o.getBytes()),i.putBuffer(e.digest())}return i.truncate(i.length()-r),i.getBytes()}};return t};var ti=J;ti.mgf=ti.mgf||{};ti.mgf.mgf1=ti.mgf1;var vr=J,j1=vr.pss=vr.pss||{};j1.create=function(e){arguments.length===3&&(e={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var t=e.md,n=e.mgf,r=t.digestLength,i=e.salt||null;typeof i=="string"&&(i=vr.util.createBuffer(i));var a;if("saltLength"in e)a=e.saltLength;else if(i!==null)a=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==a)throw new Error("Given salt length does not match length of given salt.");var s=e.prng||vr.random,o={};return o.encode=function(l,d){var u,c=d-1,f=Math.ceil(c/8),g=l.digest().getBytes();if(f<r+a+2)throw new Error("Message is too long to encrypt.");var h;i===null?h=s.getBytesSync(a):h=i.bytes();var m=new vr.util.ByteBuffer;m.fillWithByte(0,8),m.putBytes(g),m.putBytes(h),t.start(),t.update(m.getBytes());var E=t.digest().getBytes(),b=new vr.util.ByteBuffer;b.fillWithByte(0,f-a-r-2),b.putByte(1),b.putBytes(h);var I=b.getBytes(),x=f-r-1,L=n.generate(E,x),P="";for(u=0;u<x;u++)P+=String.fromCharCode(I.charCodeAt(u)^L.charCodeAt(u));var _=65280>>8*f-c&255;return P=String.fromCharCode(P.charCodeAt(0)&~_)+P.substr(1),P+E+"¼"},o.verify=function(l,d,u){var c,f=u-1,g=Math.ceil(f/8);if(d=d.substr(-g),g<r+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(d.charCodeAt(g-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var h=g-r-1,m=d.substr(0,h),E=d.substr(h,r),b=65280>>8*g-f&255;if(m.charCodeAt(0)&b)throw new Error("Bits beyond keysize not zero as expected.");var I=n.generate(E,h),x="";for(c=0;c<h;c++)x+=String.fromCharCode(m.charCodeAt(c)^I.charCodeAt(c));x=String.fromCharCode(x.charCodeAt(0)&~b)+x.substr(1);var L=g-r-a-2;for(c=0;c<L;c++)if(x.charCodeAt(c)!==0)throw new Error("Leftmost octets not zero as expected");if(x.charCodeAt(L)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var P=x.substr(-a),_=new vr.util.ByteBuffer;_.fillWithByte(0,8),_.putBytes(l),_.putBytes(P),t.start(),t.update(_.getBytes());var G=t.digest().getBytes();return E===G},o};var q=J,p=q.asn1,O=q.pki=q.pki||{},se=O.oids,Ie={};Ie.CN=se.commonName;Ie.commonName="CN";Ie.C=se.countryName;Ie.countryName="C";Ie.L=se.localityName;Ie.localityName="L";Ie.ST=se.stateOrProvinceName;Ie.stateOrProvinceName="ST";Ie.O=se.organizationName;Ie.organizationName="O";Ie.OU=se.organizationalUnitName;Ie.organizationalUnitName="OU";Ie.E=se.emailAddress;Ie.emailAddress="E";var vu=q.pki.rsa.publicKeyValidator,z1={name:"Certificate",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:p.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:p.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:p.Class.UNIVERSAL,type:p.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:p.Class.UNIVERSAL,type:p.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:p.Class.UNIVERSAL,type:p.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:p.Class.UNIVERSAL,type:p.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},vu,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:p.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:p.Class.UNIVERSAL,type:p.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:p.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:p.Class.UNIVERSAL,type:p.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:p.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:p.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:p.Class.UNIVERSAL,type:p.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},Q1={name:"rsapss",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:p.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:p.Class.UNIVERSAL,type:p.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:p.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:p.Class.UNIVERSAL,type:p.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:p.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:p.Class.UNIVERSAL,type:p.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:p.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:p.Class.UNIVERSAL,type:p.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},Y1={name:"CertificationRequestInfo",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:p.Class.UNIVERSAL,type:p.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},vu,{name:"CertificationRequestInfo.attributes",tagClass:p.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:p.Class.UNIVERSAL,type:p.Type.SET,constructed:!0}]}]}]},X1={name:"CertificationRequest",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[Y1,{name:"CertificationRequest.signatureAlgorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:p.Class.UNIVERSAL,type:p.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:p.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:p.Class.UNIVERSAL,type:p.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};O.RDNAttributesAsArray=function(e,t){for(var n=[],r,i,a,s=0;s<e.value.length;++s){r=e.value[s];for(var o=0;o<r.value.length;++o)a={},i=r.value[o],a.type=p.derToOid(i.value[0].value),a.value=i.value[1].value,a.valueTagClass=i.value[1].type,a.type in se&&(a.name=se[a.type],a.name in Ie&&(a.shortName=Ie[a.name])),t&&(t.update(a.type),t.update(a.value)),n.push(a)}return n};O.CRIAttributesAsArray=function(e){for(var t=[],n=0;n<e.length;++n)for(var r=e[n],i=p.derToOid(r.value[0].value),a=r.value[1].value,s=0;s<a.length;++s){var o={};if(o.type=i,o.value=a[s].value,o.valueTagClass=a[s].type,o.type in se&&(o.name=se[o.type],o.name in Ie&&(o.shortName=Ie[o.name])),o.type===se.extensionRequest){o.extensions=[];for(var l=0;l<o.value.length;++l)o.extensions.push(O.certificateExtensionFromAsn1(o.value[l]))}t.push(o)}return t};function dr(e,t){typeof t=="string"&&(t={shortName:t});for(var n=null,r,i=0;n===null&&i<e.attributes.length;++i)r=e.attributes[i],(t.type&&t.type===r.type||t.name&&t.name===r.name||t.shortName&&t.shortName===r.shortName)&&(n=r);return n}var ri=function(e,t,n){var r={};if(e!==se["RSASSA-PSS"])return r;n&&(r={hash:{algorithmOid:se.sha1},mgf:{algorithmOid:se.mgf1,hash:{algorithmOid:se.sha1}},saltLength:20});var i={},a=[];if(!p.validate(t,Q1,i,a)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=a,s}return i.hashOid!==void 0&&(r.hash=r.hash||{},r.hash.algorithmOid=p.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(r.mgf=r.mgf||{},r.mgf.algorithmOid=p.derToOid(i.maskGenOid),r.mgf.hash=r.mgf.hash||{},r.mgf.hash.algorithmOid=p.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(r.saltLength=i.saltLength.charCodeAt(0)),r},Si=function(e){switch(se[e.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return q.md.sha1.create();case"md5WithRSAEncryption":return q.md.md5.create();case"sha256WithRSAEncryption":return q.md.sha256.create();case"sha384WithRSAEncryption":return q.md.sha384.create();case"sha512WithRSAEncryption":return q.md.sha512.create();case"RSASSA-PSS":return q.md.sha256.create();default:var t=new Error("Could not compute "+e.type+" digest. Unknown signature OID.");throw t.signatureOid=e.signatureOid,t}},gu=function(e){var t=e.certificate,n;switch(t.signatureOid){case se.sha1WithRSAEncryption:case se.sha1WithRSASignature:break;case se["RSASSA-PSS"]:var r,i;if(r=se[t.signatureParameters.mgf.hash.algorithmOid],r===void 0||q.md[r]===void 0){var a=new Error("Unsupported MGF hash function.");throw a.oid=t.signatureParameters.mgf.hash.algorithmOid,a.name=r,a}if(i=se[t.signatureParameters.mgf.algorithmOid],i===void 0||q.mgf[i]===void 0){var a=new Error("Unsupported MGF function.");throw a.oid=t.signatureParameters.mgf.algorithmOid,a.name=i,a}if(i=q.mgf[i].create(q.md[r].create()),r=se[t.signatureParameters.hash.algorithmOid],r===void 0||q.md[r]===void 0){var a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=t.signatureParameters.hash.algorithmOid,a.name=r,a}n=q.pss.create(q.md[r].create(),i,t.signatureParameters.saltLength);break}return t.publicKey.verify(e.md.digest().getBytes(),e.signature,n)};O.certificateFromPem=function(e,t,n){var r=q.pem.decode(e)[0];if(r.type!=="CERTIFICATE"&&r.type!=="X509 CERTIFICATE"&&r.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=p.fromDer(r.body,n);return O.certificateFromAsn1(a,t)};O.certificateToPem=function(e,t){var n={type:"CERTIFICATE",body:p.toDer(O.certificateToAsn1(e)).getBytes()};return q.pem.encode(n,{maxline:t})};O.publicKeyFromPem=function(e){var t=q.pem.decode(e)[0];if(t.type!=="PUBLIC KEY"&&t.type!=="RSA PUBLIC KEY"){var n=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var r=p.fromDer(t.body);return O.publicKeyFromAsn1(r)};O.publicKeyToPem=function(e,t){var n={type:"PUBLIC KEY",body:p.toDer(O.publicKeyToAsn1(e)).getBytes()};return q.pem.encode(n,{maxline:t})};O.publicKeyToRSAPublicKeyPem=function(e,t){var n={type:"RSA PUBLIC KEY",body:p.toDer(O.publicKeyToRSAPublicKey(e)).getBytes()};return q.pem.encode(n,{maxline:t})};O.getPublicKeyFingerprint=function(e,t){t=t||{};var n=t.md||q.md.sha1.create(),r=t.type||"RSAPublicKey",i;switch(r){case"RSAPublicKey":i=p.toDer(O.publicKeyToRSAPublicKey(e)).getBytes();break;case"SubjectPublicKeyInfo":i=p.toDer(O.publicKeyToAsn1(e)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+t.type+'".')}n.start(),n.update(i);var a=n.digest();if(t.encoding==="hex"){var s=a.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}else{if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return a};O.certificationRequestFromPem=function(e,t,n){var r=q.pem.decode(e)[0];if(r.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=p.fromDer(r.body,n);return O.certificationRequestFromAsn1(a,t)};O.certificationRequestToPem=function(e,t){var n={type:"CERTIFICATE REQUEST",body:p.toDer(O.certificationRequestToAsn1(e)).getBytes()};return q.pem.encode(n,{maxline:t})};O.createCertificate=function(){var e={};return e.version=2,e.serialNumber="00",e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.validity={},e.validity.notBefore=new Date,e.validity.notAfter=new Date,e.issuer={},e.issuer.getField=function(t){return dr(e.issuer,t)},e.issuer.addField=function(t){mt([t]),e.issuer.attributes.push(t)},e.issuer.attributes=[],e.issuer.hash=null,e.subject={},e.subject.getField=function(t){return dr(e.subject,t)},e.subject.addField=function(t){mt([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.extensions=[],e.publicKey=null,e.md=null,e.setSubject=function(t,n){mt(t),e.subject.attributes=t,delete e.subject.uniqueId,n&&(e.subject.uniqueId=n),e.subject.hash=null},e.setIssuer=function(t,n){mt(t),e.issuer.attributes=t,delete e.issuer.uniqueId,n&&(e.issuer.uniqueId=n),e.issuer.hash=null},e.setExtensions=function(t){for(var n=0;n<t.length;++n)mu(t[n],{cert:e});e.extensions=t},e.getExtension=function(t){typeof t=="string"&&(t={name:t});for(var n=null,r,i=0;n===null&&i<e.extensions.length;++i)r=e.extensions[i],(t.id&&r.id===t.id||t.name&&r.name===t.name)&&(n=r);return n},e.sign=function(t,n){e.md=n||q.md.sha1.create();var r=se[e.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=r,e.tbsCertificate=O.getTBSCertificate(e);var a=p.toDer(e.tbsCertificate);e.md.update(a.getBytes()),e.signature=t.sign(e.md)},e.verify=function(t){var n=!1;if(!e.issued(t)){var r=t.issuer,i=e.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=i.attributes,a.actualIssuer=r.attributes,a}var s=t.md;if(s===null){s=Si({signatureOid:t.signatureOid,type:"certificate"});var o=t.tbsCertificate||O.getTBSCertificate(t),l=p.toDer(o);s.update(l.getBytes())}return s!==null&&(n=gu({certificate:e,md:s,signature:t.signature})),n},e.isIssuer=function(t){var n=!1,r=e.issuer,i=t.subject;if(r.hash&&i.hash)n=r.hash===i.hash;else if(r.attributes.length===i.attributes.length){n=!0;for(var a,s,o=0;n&&o<r.attributes.length;++o)a=r.attributes[o],s=i.attributes[o],(a.type!==s.type||a.value!==s.value)&&(n=!1)}return n},e.issued=function(t){return t.isIssuer(e)},e.generateSubjectKeyIdentifier=function(){return O.getPublicKeyFingerprint(e.publicKey,{type:"RSAPublicKey"})},e.verifySubjectKeyIdentifier=function(){for(var t=se.subjectKeyIdentifier,n=0;n<e.extensions.length;++n){var r=e.extensions[n];if(r.id===t){var i=e.generateSubjectKeyIdentifier().getBytes();return q.util.hexToBytes(r.subjectKeyIdentifier)===i}}return!1},e};O.certificateFromAsn1=function(e,t){var n={},r=[];if(!p.validate(e,z1,n,r)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=r,i}var a=p.derToOid(n.publicKeyOid);if(a!==O.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=O.createCertificate();s.version=n.certVersion?n.certVersion.charCodeAt(0):0;var o=q.util.createBuffer(n.certSerialNumber);s.serialNumber=o.toHex(),s.signatureOid=q.asn1.derToOid(n.certSignatureOid),s.signatureParameters=ri(s.signatureOid,n.certSignatureParams,!0),s.siginfo.algorithmOid=q.asn1.derToOid(n.certinfoSignatureOid),s.siginfo.parameters=ri(s.siginfo.algorithmOid,n.certinfoSignatureParams,!1),s.signature=n.certSignature;var l=[];if(n.certValidity1UTCTime!==void 0&&l.push(p.utcTimeToDate(n.certValidity1UTCTime)),n.certValidity2GeneralizedTime!==void 0&&l.push(p.generalizedTimeToDate(n.certValidity2GeneralizedTime)),n.certValidity3UTCTime!==void 0&&l.push(p.utcTimeToDate(n.certValidity3UTCTime)),n.certValidity4GeneralizedTime!==void 0&&l.push(p.generalizedTimeToDate(n.certValidity4GeneralizedTime)),l.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(l.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=l[0],s.validity.notAfter=l[1],s.tbsCertificate=n.tbsCertificate,t){s.md=Si({signatureOid:s.signatureOid,type:"certificate"});var d=p.toDer(s.tbsCertificate);s.md.update(d.getBytes())}var u=q.md.sha1.create(),c=p.toDer(n.certIssuer);u.update(c.getBytes()),s.issuer.getField=function(h){return dr(s.issuer,h)},s.issuer.addField=function(h){mt([h]),s.issuer.attributes.push(h)},s.issuer.attributes=O.RDNAttributesAsArray(n.certIssuer),n.certIssuerUniqueId&&(s.issuer.uniqueId=n.certIssuerUniqueId),s.issuer.hash=u.digest().toHex();var f=q.md.sha1.create(),g=p.toDer(n.certSubject);return f.update(g.getBytes()),s.subject.getField=function(h){return dr(s.subject,h)},s.subject.addField=function(h){mt([h]),s.subject.attributes.push(h)},s.subject.attributes=O.RDNAttributesAsArray(n.certSubject),n.certSubjectUniqueId&&(s.subject.uniqueId=n.certSubjectUniqueId),s.subject.hash=f.digest().toHex(),n.certExtensions?s.extensions=O.certificateExtensionsFromAsn1(n.certExtensions):s.extensions=[],s.publicKey=O.publicKeyFromAsn1(n.subjectPublicKeyInfo),s};O.certificateExtensionsFromAsn1=function(e){for(var t=[],n=0;n<e.value.length;++n)for(var r=e.value[n],i=0;i<r.value.length;++i)t.push(O.certificateExtensionFromAsn1(r.value[i]));return t};O.certificateExtensionFromAsn1=function(e){var t={};if(t.id=p.derToOid(e.value[0].value),t.critical=!1,e.value[1].type===p.Type.BOOLEAN?(t.critical=e.value[1].value.charCodeAt(0)!==0,t.value=e.value[2].value):t.value=e.value[1].value,t.id in se){if(t.name=se[t.id],t.name==="keyUsage"){var n=p.fromDer(t.value),r=0,i=0;n.value.length>1&&(r=n.value.charCodeAt(1),i=n.value.length>2?n.value.charCodeAt(2):0),t.digitalSignature=(r&128)===128,t.nonRepudiation=(r&64)===64,t.keyEncipherment=(r&32)===32,t.dataEncipherment=(r&16)===16,t.keyAgreement=(r&8)===8,t.keyCertSign=(r&4)===4,t.cRLSign=(r&2)===2,t.encipherOnly=(r&1)===1,t.decipherOnly=(i&128)===128}else if(t.name==="basicConstraints"){var n=p.fromDer(t.value);n.value.length>0&&n.value[0].type===p.Type.BOOLEAN?t.cA=n.value[0].value.charCodeAt(0)!==0:t.cA=!1;var a=null;n.value.length>0&&n.value[0].type===p.Type.INTEGER?a=n.value[0].value:n.value.length>1&&(a=n.value[1].value),a!==null&&(t.pathLenConstraint=p.derToInteger(a))}else if(t.name==="extKeyUsage")for(var n=p.fromDer(t.value),s=0;s<n.value.length;++s){var o=p.derToOid(n.value[s].value);o in se?t[se[o]]=!0:t[o]=!0}else if(t.name==="nsCertType"){var n=p.fromDer(t.value),r=0;n.value.length>1&&(r=n.value.charCodeAt(1)),t.client=(r&128)===128,t.server=(r&64)===64,t.email=(r&32)===32,t.objsign=(r&16)===16,t.reserved=(r&8)===8,t.sslCA=(r&4)===4,t.emailCA=(r&2)===2,t.objCA=(r&1)===1}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.altNames=[];for(var l,n=p.fromDer(t.value),d=0;d<n.value.length;++d){l=n.value[d];var u={type:l.type,value:l.value};switch(t.altNames.push(u),l.type){case 1:case 2:case 6:break;case 7:u.ip=q.util.bytesToIP(l.value);break;case 8:u.oid=p.derToOid(l.value);break}}}else if(t.name==="subjectKeyIdentifier"){var n=p.fromDer(t.value);t.subjectKeyIdentifier=q.util.bytesToHex(n.value)}}return t};O.certificationRequestFromAsn1=function(e,t){var n={},r=[];if(!p.validate(e,X1,n,r)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=r,i}var a=p.derToOid(n.publicKeyOid);if(a!==O.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=O.createCertificationRequest();if(s.version=n.csrVersion?n.csrVersion.charCodeAt(0):0,s.signatureOid=q.asn1.derToOid(n.csrSignatureOid),s.signatureParameters=ri(s.signatureOid,n.csrSignatureParams,!0),s.siginfo.algorithmOid=q.asn1.derToOid(n.csrSignatureOid),s.siginfo.parameters=ri(s.siginfo.algorithmOid,n.csrSignatureParams,!1),s.signature=n.csrSignature,s.certificationRequestInfo=n.certificationRequestInfo,t){s.md=Si({signatureOid:s.signatureOid,type:"certification request"});var o=p.toDer(s.certificationRequestInfo);s.md.update(o.getBytes())}var l=q.md.sha1.create();return s.subject.getField=function(d){return dr(s.subject,d)},s.subject.addField=function(d){mt([d]),s.subject.attributes.push(d)},s.subject.attributes=O.RDNAttributesAsArray(n.certificationRequestInfoSubject,l),s.subject.hash=l.digest().toHex(),s.publicKey=O.publicKeyFromAsn1(n.subjectPublicKeyInfo),s.getAttribute=function(d){return dr(s,d)},s.addAttribute=function(d){mt([d]),s.attributes.push(d)},s.attributes=O.CRIAttributesAsArray(n.certificationRequestInfoAttributes||[]),s};O.createCertificationRequest=function(){var e={};return e.version=0,e.signatureOid=null,e.signature=null,e.siginfo={},e.siginfo.algorithmOid=null,e.subject={},e.subject.getField=function(t){return dr(e.subject,t)},e.subject.addField=function(t){mt([t]),e.subject.attributes.push(t)},e.subject.attributes=[],e.subject.hash=null,e.publicKey=null,e.attributes=[],e.getAttribute=function(t){return dr(e,t)},e.addAttribute=function(t){mt([t]),e.attributes.push(t)},e.md=null,e.setSubject=function(t){mt(t),e.subject.attributes=t,e.subject.hash=null},e.setAttributes=function(t){mt(t),e.attributes=t},e.sign=function(t,n){e.md=n||q.md.sha1.create();var r=se[e.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=e.md.algorithm,i}e.signatureOid=e.siginfo.algorithmOid=r,e.certificationRequestInfo=O.getCertificationRequestInfo(e);var a=p.toDer(e.certificationRequestInfo);e.md.update(a.getBytes()),e.signature=t.sign(e.md)},e.verify=function(){var t=!1,n=e.md;if(n===null){n=Si({signatureOid:e.signatureOid,type:"certification request"});var r=e.certificationRequestInfo||O.getCertificationRequestInfo(e),i=p.toDer(r);n.update(i.getBytes())}return n!==null&&(t=gu({certificate:e,md:n,signature:e.signature})),t},e};function kr(e){for(var t=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]),n,r,i=e.attributes,a=0;a<i.length;++a){n=i[a];var s=n.value,o=p.Type.PRINTABLESTRING;"valueTagClass"in n&&(o=n.valueTagClass,o===p.Type.UTF8&&(s=q.util.encodeUtf8(s))),r=p.create(p.Class.UNIVERSAL,p.Type.SET,!0,[p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(n.type).getBytes()),p.create(p.Class.UNIVERSAL,o,!1,s)])]),t.value.push(r)}return t}function mt(e){for(var t,n=0;n<e.length;++n){if(t=e[n],typeof t.name>"u"&&(t.type&&t.type in O.oids?t.name=O.oids[t.type]:t.shortName&&t.shortName in Ie&&(t.name=O.oids[Ie[t.shortName]])),typeof t.type>"u")if(t.name&&t.name in O.oids)t.type=O.oids[t.name];else{var r=new Error("Attribute type not specified.");throw r.attribute=t,r}if(typeof t.shortName>"u"&&t.name&&t.name in Ie&&(t.shortName=Ie[t.name]),t.type===se.extensionRequest&&(t.valueConstructed=!0,t.valueTagClass=p.Type.SEQUENCE,!t.value&&t.extensions)){t.value=[];for(var i=0;i<t.extensions.length;++i)t.value.push(O.certificateExtensionToAsn1(mu(t.extensions[i])))}if(typeof t.value>"u"){var r=new Error("Attribute value not specified.");throw r.attribute=t,r}}}function mu(e,t){if(t=t||{},typeof e.name>"u"&&e.id&&e.id in O.oids&&(e.name=O.oids[e.id]),typeof e.id>"u")if(e.name&&e.name in O.oids)e.id=O.oids[e.name];else{var n=new Error("Extension ID not specified.");throw n.extension=e,n}if(typeof e.value<"u")return e;if(e.name==="keyUsage"){var r=0,i=0,a=0;e.digitalSignature&&(i|=128,r=7),e.nonRepudiation&&(i|=64,r=6),e.keyEncipherment&&(i|=32,r=5),e.dataEncipherment&&(i|=16,r=4),e.keyAgreement&&(i|=8,r=3),e.keyCertSign&&(i|=4,r=2),e.cRLSign&&(i|=2,r=1),e.encipherOnly&&(i|=1,r=0),e.decipherOnly&&(a|=128,r=7);var s=String.fromCharCode(r);a!==0?s+=String.fromCharCode(i)+String.fromCharCode(a):i!==0&&(s+=String.fromCharCode(i)),e.value=p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,s)}else if(e.name==="basicConstraints")e.value=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]),e.cA&&e.value.value.push(p.create(p.Class.UNIVERSAL,p.Type.BOOLEAN,!1,"ÿ")),"pathLenConstraint"in e&&e.value.value.push(p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(e.pathLenConstraint).getBytes()));else if(e.name==="extKeyUsage"){e.value=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);var o=e.value.value;for(var l in e)e[l]===!0&&(l in se?o.push(p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(se[l]).getBytes())):l.indexOf(".")!==-1&&o.push(p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(l).getBytes())))}else if(e.name==="nsCertType"){var r=0,i=0;e.client&&(i|=128,r=7),e.server&&(i|=64,r=6),e.email&&(i|=32,r=5),e.objsign&&(i|=16,r=4),e.reserved&&(i|=8,r=3),e.sslCA&&(i|=4,r=2),e.emailCA&&(i|=2,r=1),e.objCA&&(i|=1,r=0);var s=String.fromCharCode(r);i!==0&&(s+=String.fromCharCode(i)),e.value=p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,s)}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.value=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);for(var d,u=0;u<e.altNames.length;++u){d=e.altNames[u];var s=d.value;if(d.type===7&&d.ip){if(s=q.util.bytesFromIP(d.ip),s===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=e,n}}else d.type===8&&(d.oid?s=p.oidToDer(p.oidToDer(d.oid)):s=p.oidToDer(s));e.value.value.push(p.create(p.Class.CONTEXT_SPECIFIC,d.type,!1,s))}}else if(e.name==="nsComment"&&t.cert){if(!/^[\x00-\x7F]*$/.test(e.comment)||e.comment.length<1||e.comment.length>128)throw new Error('Invalid "nsComment" content.');e.value=p.create(p.Class.UNIVERSAL,p.Type.IA5STRING,!1,e.comment)}else if(e.name==="subjectKeyIdentifier"&&t.cert){var c=t.cert.generateSubjectKeyIdentifier();e.subjectKeyIdentifier=c.toHex(),e.value=p.create(p.Class.UNIVERSAL,p.Type.OCTETSTRING,!1,c.getBytes())}else if(e.name==="authorityKeyIdentifier"&&t.cert){e.value=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);var o=e.value.value;if(e.keyIdentifier){var f=e.keyIdentifier===!0?t.cert.generateSubjectKeyIdentifier().getBytes():e.keyIdentifier;o.push(p.create(p.Class.CONTEXT_SPECIFIC,0,!1,f))}if(e.authorityCertIssuer){var g=[p.create(p.Class.CONTEXT_SPECIFIC,4,!0,[kr(e.authorityCertIssuer===!0?t.cert.issuer:e.authorityCertIssuer)])];o.push(p.create(p.Class.CONTEXT_SPECIFIC,1,!0,g))}if(e.serialNumber){var h=q.util.hexToBytes(e.serialNumber===!0?t.cert.serialNumber:e.serialNumber);o.push(p.create(p.Class.CONTEXT_SPECIFIC,2,!1,h))}}else if(e.name==="cRLDistributionPoints"){e.value=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);for(var o=e.value.value,m=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]),E=p.create(p.Class.CONTEXT_SPECIFIC,0,!0,[]),d,u=0;u<e.altNames.length;++u){d=e.altNames[u];var s=d.value;if(d.type===7&&d.ip){if(s=q.util.bytesFromIP(d.ip),s===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=e,n}}else d.type===8&&(d.oid?s=p.oidToDer(p.oidToDer(d.oid)):s=p.oidToDer(s));E.value.push(p.create(p.Class.CONTEXT_SPECIFIC,d.type,!1,s))}m.value.push(p.create(p.Class.CONTEXT_SPECIFIC,0,!0,[E])),o.push(m)}if(typeof e.value>"u"){var n=new Error("Extension value not specified.");throw n.extension=e,n}return e}function us(e,t){switch(e){case se["RSASSA-PSS"]:var n=[];return t.hash.algorithmOid!==void 0&&n.push(p.create(p.Class.CONTEXT_SPECIFIC,0,!0,[p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(t.hash.algorithmOid).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,"")])])),t.mgf.algorithmOid!==void 0&&n.push(p.create(p.Class.CONTEXT_SPECIFIC,1,!0,[p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(t.mgf.algorithmOid).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(t.mgf.hash.algorithmOid).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,"")])])])),t.saltLength!==void 0&&n.push(p.create(p.Class.CONTEXT_SPECIFIC,2,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(t.saltLength).getBytes())])),p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,n);default:return p.create(p.Class.UNIVERSAL,p.Type.NULL,!1,"")}}function J1(e){var t=p.create(p.Class.CONTEXT_SPECIFIC,0,!0,[]);if(e.attributes.length===0)return t;for(var n=e.attributes,r=0;r<n.length;++r){var i=n[r],a=i.value,s=p.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===p.Type.UTF8&&(a=q.util.encodeUtf8(a));var o=!1;"valueConstructed"in i&&(o=i.valueConstructed);var l=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(i.type).getBytes()),p.create(p.Class.UNIVERSAL,p.Type.SET,!0,[p.create(p.Class.UNIVERSAL,s,o,a)])]);t.value.push(l)}return t}var Z1=new Date("1950-01-01T00:00:00Z"),ep=new Date("2050-01-01T00:00:00Z");function So(e){return e>=Z1&&e<ep?p.create(p.Class.UNIVERSAL,p.Type.UTCTIME,!1,p.dateToUtcTime(e)):p.create(p.Class.UNIVERSAL,p.Type.GENERALIZEDTIME,!1,p.dateToGeneralizedTime(e))}O.getTBSCertificate=function(e){var t=So(e.validity.notBefore),n=So(e.validity.notAfter),r=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.CONTEXT_SPECIFIC,0,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(e.version).getBytes())]),p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,q.util.hexToBytes(e.serialNumber)),p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(e.siginfo.algorithmOid).getBytes()),us(e.siginfo.algorithmOid,e.siginfo.parameters)]),kr(e.issuer),p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[t,n]),kr(e.subject),O.publicKeyToAsn1(e.publicKey)]);return e.issuer.uniqueId&&r.value.push(p.create(p.Class.CONTEXT_SPECIFIC,1,!0,[p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,"\0"+e.issuer.uniqueId)])),e.subject.uniqueId&&r.value.push(p.create(p.Class.CONTEXT_SPECIFIC,2,!0,[p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,"\0"+e.subject.uniqueId)])),e.extensions.length>0&&r.value.push(O.certificateExtensionsToAsn1(e.extensions)),r};O.getCertificationRequestInfo=function(e){var t=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.INTEGER,!1,p.integerToDer(e.version).getBytes()),kr(e.subject),O.publicKeyToAsn1(e.publicKey),J1(e)]);return t};O.distinguishedNameToAsn1=function(e){return kr(e)};O.certificateToAsn1=function(e){var t=e.tbsCertificate||O.getTBSCertificate(e);return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[t,p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(e.signatureOid).getBytes()),us(e.signatureOid,e.signatureParameters)]),p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,"\0"+e.signature)])};O.certificateExtensionsToAsn1=function(e){var t=p.create(p.Class.CONTEXT_SPECIFIC,3,!0,[]),n=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);t.value.push(n);for(var r=0;r<e.length;++r)n.value.push(O.certificateExtensionToAsn1(e[r]));return t};O.certificateExtensionToAsn1=function(e){var t=p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[]);t.value.push(p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(e.id).getBytes())),e.critical&&t.value.push(p.create(p.Class.UNIVERSAL,p.Type.BOOLEAN,!1,"ÿ"));var n=e.value;return typeof e.value!="string"&&(n=p.toDer(n).getBytes()),t.value.push(p.create(p.Class.UNIVERSAL,p.Type.OCTETSTRING,!1,n)),t};O.certificationRequestToAsn1=function(e){var t=e.certificationRequestInfo||O.getCertificationRequestInfo(e);return p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[t,p.create(p.Class.UNIVERSAL,p.Type.SEQUENCE,!0,[p.create(p.Class.UNIVERSAL,p.Type.OID,!1,p.oidToDer(e.signatureOid).getBytes()),us(e.signatureOid,e.signatureParameters)]),p.create(p.Class.UNIVERSAL,p.Type.BITSTRING,!1,"\0"+e.signature)])};O.createCaStore=function(e){var t={certs:{}};t.getIssuer=function(s){var o=n(s.issuer);return o},t.addCertificate=function(s){if(typeof s=="string"&&(s=q.pki.certificateFromPem(s)),r(s.subject),!t.hasCertificate(s))if(s.subject.hash in t.certs){var o=t.certs[s.subject.hash];q.util.isArray(o)||(o=[o]),o.push(s),t.certs[s.subject.hash]=o}else t.certs[s.subject.hash]=s},t.hasCertificate=function(s){typeof s=="string"&&(s=q.pki.certificateFromPem(s));var o=n(s.subject);if(!o)return!1;q.util.isArray(o)||(o=[o]);for(var l=p.toDer(O.certificateToAsn1(s)).getBytes(),d=0;d<o.length;++d){var u=p.toDer(O.certificateToAsn1(o[d])).getBytes();if(l===u)return!0}return!1},t.listAllCertificates=function(){var s=[];for(var o in t.certs)if(t.certs.hasOwnProperty(o)){var l=t.certs[o];if(!q.util.isArray(l))s.push(l);else for(var d=0;d<l.length;++d)s.push(l[d])}return s},t.removeCertificate=function(s){var o;if(typeof s=="string"&&(s=q.pki.certificateFromPem(s)),r(s.subject),!t.hasCertificate(s))return null;var l=n(s.subject);if(!q.util.isArray(l))return o=t.certs[s.subject.hash],delete t.certs[s.subject.hash],o;for(var d=p.toDer(O.certificateToAsn1(s)).getBytes(),u=0;u<l.length;++u){var c=p.toDer(O.certificateToAsn1(l[u])).getBytes();d===c&&(o=l[u],l.splice(u,1))}return l.length===0&&delete t.certs[s.subject.hash],o};function n(s){return r(s),t.certs[s.hash]||null}function r(s){if(!s.hash){var o=q.md.sha1.create();s.attributes=O.RDNAttributesAsArray(kr(s),o),s.hash=o.digest().toHex()}}if(e)for(var i=0;i<e.length;++i){var a=e[i];t.addCertificate(a)}return t};O.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};O.verifyCertificateChain=function(e,t,n){typeof n=="function"&&(n={verify:n}),n=n||{},t=t.slice(0);var r=t.slice(0),i=n.validityCheckDate;typeof i>"u"&&(i=new Date);var a=!0,s=null,o=0;do{var l=t.shift(),d=null,u=!1;if(i&&(i<l.validity.notBefore||i>l.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:O.certificateError.certificate_expired,notBefore:l.validity.notBefore,notAfter:l.validity.notAfter,now:i}),s===null){if(d=t[0]||e.getIssuer(l),d===null&&l.isIssuer(l)&&(u=!0,d=l),d){var c=d;q.util.isArray(c)||(c=[c]);for(var f=!1;!f&&c.length>0;){d=c.shift();try{f=d.verify(l)}catch{}}f||(s={message:"Certificate signature is invalid.",error:O.certificateError.bad_certificate})}s===null&&(!d||u)&&!e.hasCertificate(l)&&(s={message:"Certificate is not trusted.",error:O.certificateError.unknown_ca})}if(s===null&&d&&!l.isIssuer(d)&&(s={message:"Certificate issuer is invalid.",error:O.certificateError.bad_certificate}),s===null)for(var g={keyUsage:!0,basicConstraints:!0},h=0;s===null&&h<l.extensions.length;++h){var m=l.extensions[h];m.critical&&!(m.name in g)&&(s={message:"Certificate has an unsupported critical extension.",error:O.certificateError.unsupported_certificate})}if(s===null&&(!a||t.length===0&&(!d||u))){var E=l.getExtension("basicConstraints"),b=l.getExtension("keyUsage");if(b!==null&&(!b.keyCertSign||E===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:O.certificateError.bad_certificate}),s===null&&E!==null&&!E.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:O.certificateError.bad_certificate}),s===null&&b!==null&&"pathLenConstraint"in E){var I=o-1;I>E.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:O.certificateError.bad_certificate})}}var x=s===null?!0:s.error,L=n.verify?n.verify(x,o,r):x;if(L===!0)s=null;else throw x===!0&&(s={message:"The application rejected the certificate.",error:O.certificateError.bad_certificate}),(L||L===0)&&(typeof L=="object"&&!q.util.isArray(L)?(L.message&&(s.message=L.message),L.error&&(s.error=L.error)):typeof L=="string"&&(s.error=L)),s;a=!1,++o}while(t.length>0);return!0};var ve=J,C=ve.asn1,te=ve.pki,pn=ve.pkcs12=ve.pkcs12||{},Cu={name:"ContentInfo",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:C.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},tp={name:"PFX",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,capture:"version"},Cu,{name:"PFX.macData",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:C.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:C.Class.UNIVERSAL,type:C.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:C.Class.UNIVERSAL,type:C.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:C.Class.UNIVERSAL,type:C.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},rp={name:"SafeBag",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:C.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:C.Class.UNIVERSAL,type:C.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},np={name:"Attribute",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:C.Class.UNIVERSAL,type:C.Type.SET,constructed:!0,capture:"values"}]},ip={name:"CertBag",tagClass:C.Class.UNIVERSAL,type:C.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:C.Class.UNIVERSAL,type:C.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:C.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:C.Class.UNIVERSAL,type:C.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function Yr(e,t,n,r){for(var i=[],a=0;a<e.length;a++)for(var s=0;s<e[a].safeBags.length;s++){var o=e[a].safeBags[s];if(!(r!==void 0&&o.type!==r)){if(t===null){i.push(o);continue}o.attributes[t]!==void 0&&o.attributes[t].indexOf(n)>=0&&i.push(o)}}return i}pn.pkcs12FromAsn1=function(e,t,n){typeof t=="string"?(n=t,t=!0):t===void 0&&(t=!0);var r={},i=[];if(!C.validate(e,tp,r,i)){var a=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw a.errors=a,a}var s={version:r.version.charCodeAt(0),safeContents:[],getBags:function(E){var b={},I;return"localKeyId"in E?I=E.localKeyId:"localKeyIdHex"in E&&(I=ve.util.hexToBytes(E.localKeyIdHex)),I===void 0&&!("friendlyName"in E)&&"bagType"in E&&(b[E.bagType]=Yr(s.safeContents,null,null,E.bagType)),I!==void 0&&(b.localKeyId=Yr(s.safeContents,"localKeyId",I,E.bagType)),"friendlyName"in E&&(b.friendlyName=Yr(s.safeContents,"friendlyName",E.friendlyName,E.bagType)),b},getBagsByFriendlyName:function(E,b){return Yr(s.safeContents,"friendlyName",E,b)},getBagsByLocalKeyId:function(E,b){return Yr(s.safeContents,"localKeyId",E,b)}};if(r.version.charCodeAt(0)!==3){var a=new Error("PKCS#12 PFX of version other than 3 not supported.");throw a.version=r.version.charCodeAt(0),a}if(C.derToOid(r.contentType)!==te.oids.data){var a=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw a.oid=C.derToOid(r.contentType),a}var o=r.content.value[0];if(o.tagClass!==C.Class.UNIVERSAL||o.type!==C.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(o=ls(o),r.mac){var l=null,d=0,u=C.derToOid(r.macAlgorithm);switch(u){case te.oids.sha1:l=ve.md.sha1.create(),d=20;break;case te.oids.sha256:l=ve.md.sha256.create(),d=32;break;case te.oids.sha384:l=ve.md.sha384.create(),d=48;break;case te.oids.sha512:l=ve.md.sha512.create(),d=64;break;case te.oids.md5:l=ve.md.md5.create(),d=16;break}if(l===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+u);var c=new ve.util.ByteBuffer(r.macSalt),f="macIterations"in r?parseInt(ve.util.bytesToHex(r.macIterations),16):1,g=pn.generateKey(n,c,3,f,d,l),h=ve.hmac.create();h.start(l,g),h.update(o.value);var m=h.getMac();if(m.getBytes()!==r.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return ap(s,o.value,t,n),s};function ls(e){if(e.composed||e.constructed){for(var t=ve.util.createBuffer(),n=0;n<e.value.length;++n)t.putBytes(e.value[n].value);e.composed=e.constructed=!1,e.value=t.getBytes()}return e}function ap(e,t,n,r){if(t=C.fromDer(t,n),t.tagClass!==C.Class.UNIVERSAL||t.type!==C.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<t.value.length;i++){var a=t.value[i],s={},o=[];if(!C.validate(a,Cu,s,o)){var l=new Error("Cannot read ContentInfo.");throw l.errors=o,l}var d={encrypted:!1},u=null,c=s.content.value[0];switch(C.derToOid(s.contentType)){case te.oids.data:if(c.tagClass!==C.Class.UNIVERSAL||c.type!==C.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");u=ls(c).value;break;case te.oids.encryptedData:u=sp(c,r),d.encrypted=!0;break;default:var l=new Error("Unsupported PKCS#12 contentType.");throw l.contentType=C.derToOid(s.contentType),l}d.safeBags=op(u,n,r),e.safeContents.push(d)}}function sp(e,t){var n={},r=[];if(!C.validate(e,ve.pkcs7.asn1.encryptedDataValidator,n,r)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=r,i}var a=C.derToOid(n.contentType);if(a!==te.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=a,i}a=C.derToOid(n.encAlgorithm);var s=te.pbe.getCipher(a,n.encParameter,t),o=ls(n.encryptedContentAsn1),l=ve.util.createBuffer(o.value);if(s.update(l),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function op(e,t,n){if(!t&&e.length===0)return[];if(e=C.fromDer(e,t),e.tagClass!==C.Class.UNIVERSAL||e.type!==C.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var r=[],i=0;i<e.value.length;i++){var a=e.value[i],s={},o=[];if(!C.validate(a,rp,s,o)){var l=new Error("Cannot read SafeBag.");throw l.errors=o,l}var d={type:C.derToOid(s.bagId),attributes:up(s.bagAttributes)};r.push(d);var u,c,f=s.bagValue.value[0];switch(d.type){case te.oids.pkcs8ShroudedKeyBag:if(f=te.decryptPrivateKeyInfo(f,n),f===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case te.oids.keyBag:try{d.key=te.privateKeyFromAsn1(f)}catch{d.key=null,d.asn1=f}continue;case te.oids.certBag:u=ip,c=function(){if(C.derToOid(s.certId)!==te.oids.x509Certificate){var h=new Error("Unsupported certificate type, only X.509 supported.");throw h.oid=C.derToOid(s.certId),h}var m=C.fromDer(s.cert,t);try{d.cert=te.certificateFromAsn1(m,!0)}catch{d.cert=null,d.asn1=m}};break;default:var l=new Error("Unsupported PKCS#12 SafeBag type.");throw l.oid=d.type,l}if(u!==void 0&&!C.validate(f,u,s,o)){var l=new Error("Cannot read PKCS#12 "+u.name);throw l.errors=o,l}c()}return r}function up(e){var t={};if(e!==void 0)for(var n=0;n<e.length;++n){var r={},i=[];if(!C.validate(e[n],np,r,i)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=i,a}var s=C.derToOid(r.oid);if(te.oids[s]!==void 0){t[te.oids[s]]=[];for(var o=0;o<r.values.length;++o)t[te.oids[s]].push(r.values[o].value)}}return t}pn.toPkcs12Asn1=function(e,t,n,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||r.encAlgorithm||"aes128","useMac"in r||(r.useMac=!0),"localKeyId"in r||(r.localKeyId=null),"generateLocalKeyId"in r||(r.generateLocalKeyId=!0);var i=r.localKeyId,a;if(i!==null)i=ve.util.hexToBytes(i);else if(r.generateLocalKeyId)if(t){var s=ve.util.isArray(t)?t[0]:t;typeof s=="string"&&(s=te.certificateFromPem(s));var o=ve.md.sha1.create();o.update(C.toDer(te.certificateToAsn1(s)).getBytes()),i=o.digest().getBytes()}else i=ve.random.getBytes(20);var l=[];i!==null&&l.push(C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(te.oids.localKeyId).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.SET,!0,[C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,i)])])),"friendlyName"in r&&l.push(C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(te.oids.friendlyName).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.SET,!0,[C.create(C.Class.UNIVERSAL,C.Type.BMPSTRING,!1,r.friendlyName)])])),l.length>0&&(a=C.create(C.Class.UNIVERSAL,C.Type.SET,!0,l));var d=[],u=[];t!==null&&(ve.util.isArray(t)?u=t:u=[t]);for(var c=[],f=0;f<u.length;++f){t=u[f],typeof t=="string"&&(t=te.certificateFromPem(t));var g=f===0?a:void 0,h=te.certificateToAsn1(t),m=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(te.oids.certBag).getBytes()),C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(te.oids.x509Certificate).getBytes()),C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,C.toDer(h).getBytes())])])]),g]);c.push(m)}if(c.length>0){var E=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,c),b=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(te.oids.data).getBytes()),C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,C.toDer(E).getBytes())])]);d.push(b)}var I=null;if(e!==null){var x=te.wrapRsaPrivateKey(te.privateKeyToAsn1(e));n===null?I=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(te.oids.keyBag).getBytes()),C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[x]),a]):I=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(te.oids.pkcs8ShroudedKeyBag).getBytes()),C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[te.encryptPrivateKeyInfo(x,n,r)]),a]);var L=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[I]),P=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(te.oids.data).getBytes()),C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,C.toDer(L).getBytes())])]);d.push(P)}var _=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,d),G;if(r.useMac){var o=ve.md.sha1.create(),z=new ve.util.ByteBuffer(ve.random.getBytes(r.saltSize)),Z=r.count,e=pn.generateKey(n,z,3,Z,20),ie=ve.hmac.create();ie.start(o,e),ie.update(C.toDer(_).getBytes());var le=ie.getMac();G=C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(te.oids.sha1).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.NULL,!1,"")]),C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,le.getBytes())]),C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,z.getBytes()),C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,C.integerToDer(Z).getBytes())])}return C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.INTEGER,!1,C.integerToDer(3).getBytes()),C.create(C.Class.UNIVERSAL,C.Type.SEQUENCE,!0,[C.create(C.Class.UNIVERSAL,C.Type.OID,!1,C.oidToDer(te.oids.data).getBytes()),C.create(C.Class.CONTEXT_SPECIFIC,0,!0,[C.create(C.Class.UNIVERSAL,C.Type.OCTETSTRING,!1,C.toDer(_).getBytes())])]),G])};pn.generateKey=ve.pbe.generatePkcs12Key;var cr=J,ds=cr.asn1,Ur=cr.pki=cr.pki||{};Ur.pemToDer=function(e){var t=cr.pem.decode(e)[0];if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return cr.util.createBuffer(t.body)};Ur.privateKeyFromPem=function(e){var t=cr.pem.decode(e)[0];if(t.type!=="PRIVATE KEY"&&t.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var r=ds.fromDer(t.body);return Ur.privateKeyFromAsn1(r)};Ur.privateKeyToPem=function(e,t){var n={type:"RSA PRIVATE KEY",body:ds.toDer(Ur.privateKeyToAsn1(e)).getBytes()};return cr.pem.encode(n,{maxline:t})};Ur.privateKeyInfoToPem=function(e,t){var n={type:"PRIVATE KEY",body:ds.toDer(e).getBytes()};return cr.pem.encode(n,{maxline:t})};var B=J,$i=function(e,t,n,r){var i=B.util.createBuffer(),a=e.length>>1,s=a+(e.length&1),o=e.substr(0,s),l=e.substr(a,s),d=B.util.createBuffer(),u=B.hmac.create();n=t+n;var c=Math.ceil(r/16),f=Math.ceil(r/20);u.start("MD5",o);var g=B.util.createBuffer();d.putBytes(n);for(var h=0;h<c;++h)u.start(null,null),u.update(d.getBytes()),d.putBuffer(u.digest()),u.start(null,null),u.update(d.bytes()+n),g.putBuffer(u.digest());u.start("SHA1",l);var m=B.util.createBuffer();d.clear(),d.putBytes(n);for(var h=0;h<f;++h)u.start(null,null),u.update(d.getBytes()),d.putBuffer(u.digest()),u.start(null,null),u.update(d.bytes()+n),m.putBuffer(u.digest());return i.putBytes(B.util.xorBytes(g.getBytes(),m.getBytes(),r)),i},lp=function(e,t,n){var r=B.hmac.create();r.start("SHA1",e);var i=B.util.createBuffer();return i.putInt32(t[0]),i.putInt32(t[1]),i.putByte(n.type),i.putByte(n.version.major),i.putByte(n.version.minor),i.putInt16(n.length),i.putBytes(n.fragment.bytes()),r.update(i.getBytes()),r.digest().getBytes()},dp=function(e,t,n){var r=!1;try{var i=e.deflate(t.fragment.getBytes());t.fragment=B.util.createBuffer(i),t.length=i.length,r=!0}catch{}return r},cp=function(e,t,n){var r=!1;try{var i=e.inflate(t.fragment.getBytes());t.fragment=B.util.createBuffer(i),t.length=i.length,r=!0}catch{}return r},ft=function(e,t){var n=0;switch(t){case 1:n=e.getByte();break;case 2:n=e.getInt16();break;case 3:n=e.getInt24();break;case 4:n=e.getInt32();break}return B.util.createBuffer(e.getBytes(n))},yt=function(e,t,n){e.putInt(n.length(),t<<3),e.putBuffer(n)},v={};v.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};v.SupportedVersions=[v.Versions.TLS_1_1,v.Versions.TLS_1_0];v.Version=v.SupportedVersions[0];v.MaxFragment=15360;v.ConnectionEnd={server:0,client:1};v.PRFAlgorithm={tls_prf_sha256:0};v.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};v.CipherType={stream:0,block:1,aead:2};v.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};v.CompressionMethod={none:0,deflate:1};v.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};v.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};v.Alert={};v.Alert.Level={warning:1,fatal:2};v.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};v.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};v.CipherSuites={};v.getCipherSuite=function(e){var t=null;for(var n in v.CipherSuites){var r=v.CipherSuites[n];if(r.id[0]===e.charCodeAt(0)&&r.id[1]===e.charCodeAt(1)){t=r;break}}return t};v.handleUnexpected=function(e,t){var n=!e.open&&e.entity===v.ConnectionEnd.client;n||e.error(e,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.unexpected_message}})};v.handleHelloRequest=function(e,t,n){!e.handshaking&&e.handshakes>0&&(v.queue(e,v.createAlert(e,{level:v.Alert.Level.warning,description:v.Alert.Description.no_renegotiation})),v.flush(e)),e.process()};v.parseHelloMessage=function(e,t,n){var r=null,i=e.entity===v.ConnectionEnd.client;if(n<38)e.error(e,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.illegal_parameter}});else{var a=t.fragment,s=a.length();if(r={version:{major:a.getByte(),minor:a.getByte()},random:B.util.createBuffer(a.getBytes(32)),session_id:ft(a,1),extensions:[]},i?(r.cipher_suite=a.getBytes(2),r.compression_method=a.getByte()):(r.cipher_suites=ft(a,2),r.compression_methods=ft(a,1)),s=n-(s-a.length()),s>0){for(var o=ft(a,2);o.length()>0;)r.extensions.push({type:[o.getByte(),o.getByte()],data:ft(o,2)});if(!i)for(var l=0;l<r.extensions.length;++l){var d=r.extensions[l];if(d.type[0]===0&&d.type[1]===0)for(var u=ft(d.data,2);u.length()>0;){var c=u.getByte();if(c!==0)break;e.session.extensions.server_name.serverNameList.push(ft(u,2).getBytes())}}}if(e.session.version&&(r.version.major!==e.session.version.major||r.version.minor!==e.session.version.minor))return e.error(e,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.protocol_version}});if(i)e.session.cipherSuite=v.getCipherSuite(r.cipher_suite);else for(var f=B.util.createBuffer(r.cipher_suites.bytes());f.length()>0&&(e.session.cipherSuite=v.getCipherSuite(f.getBytes(2)),e.session.cipherSuite===null););if(e.session.cipherSuite===null)return e.error(e,{message:"No cipher suites in common.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.handshake_failure},cipherSuite:B.util.bytesToHex(r.cipher_suite)});i?e.session.compressionMethod=r.compression_method:e.session.compressionMethod=v.CompressionMethod.none}return r};v.createSecurityParameters=function(e,t){var n=e.entity===v.ConnectionEnd.client,r=t.random.bytes(),i=n?e.session.sp.client_random:r,a=n?r:v.createRandom().getBytes();e.session.sp={entity:e.entity,prf_algorithm:v.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:e.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:a}};v.handleServerHello=function(e,t,n){var r=v.parseHelloMessage(e,t,n);if(!e.fail){if(r.version.minor<=e.version.minor)e.version.minor=r.version.minor;else return e.error(e,{message:"Incompatible TLS version.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.protocol_version}});e.session.version=e.version;var i=r.session_id.bytes();i.length>0&&i===e.session.id?(e.expect=Eu,e.session.resuming=!0,e.session.sp.server_random=r.random.bytes()):(e.expect=hp,e.session.resuming=!1,v.createSecurityParameters(e,r)),e.session.id=i,e.process()}};v.handleClientHello=function(e,t,n){var r=v.parseHelloMessage(e,t,n);if(!e.fail){var i=r.session_id.bytes(),a=null;if(e.sessionCache&&(a=e.sessionCache.getSession(i),a===null?i="":(a.version.major!==r.version.major||a.version.minor>r.version.minor)&&(a=null,i="")),i.length===0&&(i=B.random.getBytes(32)),e.session.id=i,e.session.clientHelloVersion=r.version,e.session.sp={},a)e.version=e.session.version=a.version,e.session.sp=a.sp;else{for(var s,o=1;o<v.SupportedVersions.length&&(s=v.SupportedVersions[o],!(s.minor<=r.version.minor));++o);e.version={major:s.major,minor:s.minor},e.session.version=e.version}a!==null?(e.expect=cs,e.session.resuming=!0,e.session.sp.client_random=r.random.bytes()):(e.expect=e.verifyClient!==!1?Ep:Ta,e.session.resuming=!1,v.createSecurityParameters(e,r)),e.open=!0,v.queue(e,v.createRecord(e,{type:v.ContentType.handshake,data:v.createServerHello(e)})),e.session.resuming?(v.queue(e,v.createRecord(e,{type:v.ContentType.change_cipher_spec,data:v.createChangeCipherSpec()})),e.state.pending=v.createConnectionState(e),e.state.current.write=e.state.pending.write,v.queue(e,v.createRecord(e,{type:v.ContentType.handshake,data:v.createFinished(e)}))):(v.queue(e,v.createRecord(e,{type:v.ContentType.handshake,data:v.createCertificate(e)})),e.fail||(v.queue(e,v.createRecord(e,{type:v.ContentType.handshake,data:v.createServerKeyExchange(e)})),e.verifyClient!==!1&&v.queue(e,v.createRecord(e,{type:v.ContentType.handshake,data:v.createCertificateRequest(e)})),v.queue(e,v.createRecord(e,{type:v.ContentType.handshake,data:v.createServerHelloDone(e)})))),v.flush(e),e.process()}};v.handleCertificate=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.illegal_parameter}});var r=t.fragment,i={certificate_list:ft(r,3)},a,s,o=[];try{for(;i.certificate_list.length()>0;)a=ft(i.certificate_list,3),s=B.asn1.fromDer(a),a=B.pki.certificateFromAsn1(s,!0),o.push(a)}catch(d){return e.error(e,{message:"Could not parse certificate list.",cause:d,send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.bad_certificate}})}var l=e.entity===v.ConnectionEnd.client;(l||e.verifyClient===!0)&&o.length===0?e.error(e,{message:l?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.illegal_parameter}}):o.length===0?e.expect=l?$o:Ta:(l?e.session.serverCertificate=o[0]:e.session.clientCertificate=o[0],v.verifyCertificateChain(e,o)&&(e.expect=l?$o:Ta)),e.process()};v.handleServerKeyExchange=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.unsupported_certificate}});e.expect=pp,e.process()};v.handleClientKeyExchange=function(e,t,n){if(n<48)return e.error(e,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.unsupported_certificate}});var r=t.fragment,i={enc_pre_master_secret:ft(r,2).getBytes()},a=null;if(e.getPrivateKey)try{a=e.getPrivateKey(e,e.session.serverCertificate),a=B.pki.privateKeyFromPem(a)}catch(l){e.error(e,{message:"Could not get private key.",cause:l,send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.internal_error}})}if(a===null)return e.error(e,{message:"No private key set.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.internal_error}});try{var s=e.session.sp;s.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var o=e.session.clientHelloVersion;if(o.major!==s.pre_master_secret.charCodeAt(0)||o.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{s.pre_master_secret=B.random.getBytes(48)}e.expect=cs,e.session.clientCertificate!==null&&(e.expect=Sp),e.process()};v.handleCertificateRequest=function(e,t,n){if(n<3)return e.error(e,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.illegal_parameter}});var r=t.fragment,i={certificate_types:ft(r,1),certificate_authorities:ft(r,2)};e.session.certificateRequest=i,e.expect=yp,e.process()};v.handleCertificateVerify=function(e,t,n){if(n<2)return e.error(e,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.illegal_parameter}});var r=t.fragment;r.read-=4;var i=r.bytes();r.read+=4;var a={signature:ft(r,2).getBytes()},s=B.util.createBuffer();s.putBuffer(e.session.md5.digest()),s.putBuffer(e.session.sha1.digest()),s=s.getBytes();try{var o=e.session.clientCertificate;if(!o.publicKey.verify(s,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");e.session.md5.update(i),e.session.sha1.update(i)}catch{return e.error(e,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.handshake_failure}})}e.expect=cs,e.process()};v.handleServerHelloDone=function(e,t,n){if(n>0)return e.error(e,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.record_overflow}});if(e.serverCertificate===null){var r={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.insufficient_security}},i=0,a=e.verify(e,r.alert.description,i,[]);if(a!==!0)return(a||a===0)&&(typeof a=="object"&&!B.util.isArray(a)?(a.message&&(r.message=a.message),a.alert&&(r.alert.description=a.alert)):typeof a=="number"&&(r.alert.description=a)),e.error(e,r)}e.session.certificateRequest!==null&&(t=v.createRecord(e,{type:v.ContentType.handshake,data:v.createCertificate(e)}),v.queue(e,t)),t=v.createRecord(e,{type:v.ContentType.handshake,data:v.createClientKeyExchange(e)}),v.queue(e,t),e.expect=mp;var s=function(o,l){o.session.certificateRequest!==null&&o.session.clientCertificate!==null&&v.queue(o,v.createRecord(o,{type:v.ContentType.handshake,data:v.createCertificateVerify(o,l)})),v.queue(o,v.createRecord(o,{type:v.ContentType.change_cipher_spec,data:v.createChangeCipherSpec()})),o.state.pending=v.createConnectionState(o),o.state.current.write=o.state.pending.write,v.queue(o,v.createRecord(o,{type:v.ContentType.handshake,data:v.createFinished(o)})),o.expect=Eu,v.flush(o),o.process()};if(e.session.certificateRequest===null||e.session.clientCertificate===null)return s(e,null);v.getClientSignature(e,s)};v.handleChangeCipherSpec=function(e,t){if(t.fragment.getByte()!==1)return e.error(e,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.illegal_parameter}});var n=e.entity===v.ConnectionEnd.client;(e.session.resuming&&n||!e.session.resuming&&!n)&&(e.state.pending=v.createConnectionState(e)),e.state.current.read=e.state.pending.read,(!e.session.resuming&&n||e.session.resuming&&!n)&&(e.state.pending=null),e.expect=n?vp:$p,e.process()};v.handleFinished=function(e,t,n){var r=t.fragment;r.read-=4;var i=r.bytes();r.read+=4;var a=t.fragment.getBytes();r=B.util.createBuffer(),r.putBuffer(e.session.md5.digest()),r.putBuffer(e.session.sha1.digest());var s=e.entity===v.ConnectionEnd.client,o=s?"server finished":"client finished",l=e.session.sp,d=12,u=$i;if(r=u(l.master_secret,o,r.getBytes(),d),r.getBytes()!==a)return e.error(e,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.decrypt_error}});e.session.md5.update(i),e.session.sha1.update(i),(e.session.resuming&&s||!e.session.resuming&&!s)&&(v.queue(e,v.createRecord(e,{type:v.ContentType.change_cipher_spec,data:v.createChangeCipherSpec()})),e.state.current.write=e.state.pending.write,e.state.pending=null,v.queue(e,v.createRecord(e,{type:v.ContentType.handshake,data:v.createFinished(e)}))),e.expect=s?gp:bp,e.handshaking=!1,++e.handshakes,e.peerCertificate=s?e.session.serverCertificate:e.session.clientCertificate,v.flush(e),e.isConnected=!0,e.connected(e),e.process()};v.handleAlert=function(e,t){var n=t.fragment,r={level:n.getByte(),description:n.getByte()},i;switch(r.description){case v.Alert.Description.close_notify:i="Connection closed.";break;case v.Alert.Description.unexpected_message:i="Unexpected message.";break;case v.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case v.Alert.Description.decryption_failed:i="Decryption failed.";break;case v.Alert.Description.record_overflow:i="Record overflow.";break;case v.Alert.Description.decompression_failure:i="Decompression failed.";break;case v.Alert.Description.handshake_failure:i="Handshake failure.";break;case v.Alert.Description.bad_certificate:i="Bad certificate.";break;case v.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case v.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case v.Alert.Description.certificate_expired:i="Certificate expired.";break;case v.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case v.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case v.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case v.Alert.Description.access_denied:i="Access denied.";break;case v.Alert.Description.decode_error:i="Decode error.";break;case v.Alert.Description.decrypt_error:i="Decrypt error.";break;case v.Alert.Description.export_restriction:i="Export restriction.";break;case v.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case v.Alert.Description.insufficient_security:i="Insufficient security.";break;case v.Alert.Description.internal_error:i="Internal error.";break;case v.Alert.Description.user_canceled:i="User canceled.";break;case v.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(r.description===v.Alert.Description.close_notify)return e.close();e.error(e,{message:i,send:!1,origin:e.entity===v.ConnectionEnd.client?"server":"client",alert:r}),e.process()};v.handleHandshake=function(e,t){var n=t.fragment,r=n.getByte(),i=n.getInt24();if(i>n.length())return e.fragmented=t,t.fragment=B.util.createBuffer(),n.read-=4,e.process();e.fragmented=null,n.read-=4;var a=n.bytes(i+4);n.read+=4,r in ni[e.entity][e.expect]?(e.entity===v.ConnectionEnd.server&&!e.open&&!e.fail&&(e.handshaking=!0,e.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:B.md.md5.create(),sha1:B.md.sha1.create()}),r!==v.HandshakeType.hello_request&&r!==v.HandshakeType.certificate_verify&&r!==v.HandshakeType.finished&&(e.session.md5.update(a),e.session.sha1.update(a)),ni[e.entity][e.expect][r](e,t,i)):v.handleUnexpected(e,t)};v.handleApplicationData=function(e,t){e.data.putBuffer(t.fragment),e.dataReady(e),e.process()};v.handleHeartbeat=function(e,t){var n=t.fragment,r=n.getByte(),i=n.getInt16(),a=n.getBytes(i);if(r===v.HeartbeatMessageType.heartbeat_request){if(e.handshaking||i>a.length)return e.process();v.queue(e,v.createRecord(e,{type:v.ContentType.heartbeat,data:v.createHeartbeat(v.HeartbeatMessageType.heartbeat_response,a)})),v.flush(e)}else if(r===v.HeartbeatMessageType.heartbeat_response){if(a!==e.expectedHeartbeatPayload)return e.process();e.heartbeatReceived&&e.heartbeatReceived(e,B.util.createBuffer(a))}e.process()};var fp=0,hp=1,$o=2,pp=3,yp=4,Eu=5,vp=6,gp=7,mp=8,Cp=0,Ep=1,Ta=2,Sp=3,cs=4,$p=5,bp=6,y=v.handleUnexpected,Su=v.handleChangeCipherSpec,ke=v.handleAlert,it=v.handleHandshake,$u=v.handleApplicationData,Ue=v.handleHeartbeat,hs=[];hs[v.ConnectionEnd.client]=[[y,ke,it,y,Ue],[y,ke,it,y,Ue],[y,ke,it,y,Ue],[y,ke,it,y,Ue],[y,ke,it,y,Ue],[Su,ke,y,y,Ue],[y,ke,it,y,Ue],[y,ke,it,$u,Ue],[y,ke,it,y,Ue]];hs[v.ConnectionEnd.server]=[[y,ke,it,y,Ue],[y,ke,it,y,Ue],[y,ke,it,y,Ue],[y,ke,it,y,Ue],[Su,ke,y,y,Ue],[y,ke,it,y,Ue],[y,ke,it,$u,Ue],[y,ke,it,y,Ue]];var er=v.handleHelloRequest,xp=v.handleServerHello,bu=v.handleCertificate,bo=v.handleServerKeyExchange,Gi=v.handleCertificateRequest,Rn=v.handleServerHelloDone,xu=v.handleFinished,ni=[];ni[v.ConnectionEnd.client]=[[y,y,xp,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[er,y,y,y,y,y,y,y,y,y,y,bu,bo,Gi,Rn,y,y,y,y,y,y],[er,y,y,y,y,y,y,y,y,y,y,y,bo,Gi,Rn,y,y,y,y,y,y],[er,y,y,y,y,y,y,y,y,y,y,y,y,Gi,Rn,y,y,y,y,y,y],[er,y,y,y,y,y,y,y,y,y,y,y,y,y,Rn,y,y,y,y,y,y],[er,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[er,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,xu],[er,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[er,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y]];var Tp=v.handleClientHello,Ip=v.handleClientKeyExchange,Ap=v.handleCertificateVerify;ni[v.ConnectionEnd.server]=[[y,Tp,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,bu,y,y,y,y,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Ip,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,Ap,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,xu],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y],[y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y,y]];v.generateKeys=function(e,t){var n=$i,r=t.client_random+t.server_random;e.session.resuming||(t.master_secret=n(t.pre_master_secret,"master secret",r,48).bytes(),t.pre_master_secret=null),r=t.server_random+t.client_random;var i=2*t.mac_key_length+2*t.enc_key_length,a=e.version.major===v.Versions.TLS_1_0.major&&e.version.minor===v.Versions.TLS_1_0.minor;a&&(i+=2*t.fixed_iv_length);var s=n(t.master_secret,"key expansion",r,i),o={client_write_MAC_key:s.getBytes(t.mac_key_length),server_write_MAC_key:s.getBytes(t.mac_key_length),client_write_key:s.getBytes(t.enc_key_length),server_write_key:s.getBytes(t.enc_key_length)};return a&&(o.client_write_IV=s.getBytes(t.fixed_iv_length),o.server_write_IV=s.getBytes(t.fixed_iv_length)),o};v.createConnectionState=function(e){var t=e.entity===v.ConnectionEnd.client,n=function(){var a={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){a.sequenceNumber[1]===4294967295?(a.sequenceNumber[1]=0,++a.sequenceNumber[0]):++a.sequenceNumber[1]}};return a},r={read:n(),write:n()};if(r.read.update=function(a,s){return r.read.cipherFunction(s,r.read)?r.read.compressFunction(a,s,r.read)||a.error(a,{message:"Could not decompress record.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.decompression_failure}}):a.error(a,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.bad_record_mac}}),!a.fail},r.write.update=function(a,s){return r.write.compressFunction(a,s,r.write)?r.write.cipherFunction(s,r.write)||a.error(a,{message:"Could not encrypt record.",send:!1,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.internal_error}}):a.error(a,{message:"Could not compress record.",send:!1,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.internal_error}}),!a.fail},e.session){var i=e.session.sp;switch(e.session.cipherSuite.initSecurityParameters(i),i.keys=v.generateKeys(e,i),r.read.macKey=t?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,r.write.macKey=t?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,e.session.cipherSuite.initConnectionState(r,e,i),i.compression_algorithm){case v.CompressionMethod.none:break;case v.CompressionMethod.deflate:r.read.compressFunction=cp,r.write.compressFunction=dp;break;default:throw new Error("Unsupported compression algorithm.")}}return r};v.createRandom=function(){var e=new Date,t=+e+e.getTimezoneOffset()*6e4,n=B.util.createBuffer();return n.putInt32(t),n.putBytes(B.random.getBytes(28)),n};v.createRecord=function(e,t){if(!t.data)return null;var n={type:t.type,version:{major:e.version.major,minor:e.version.minor},length:t.data.length(),fragment:t.data};return n};v.createAlert=function(e,t){var n=B.util.createBuffer();return n.putByte(t.level),n.putByte(t.description),v.createRecord(e,{type:v.ContentType.alert,data:n})};v.createClientHello=function(e){e.session.clientHelloVersion={major:e.version.major,minor:e.version.minor};for(var t=B.util.createBuffer(),n=0;n<e.cipherSuites.length;++n){var r=e.cipherSuites[n];t.putByte(r.id[0]),t.putByte(r.id[1])}var i=t.length(),a=B.util.createBuffer();a.putByte(v.CompressionMethod.none);var s=a.length(),o=B.util.createBuffer();if(e.virtualHost){var l=B.util.createBuffer();l.putByte(0),l.putByte(0);var d=B.util.createBuffer();d.putByte(0),yt(d,2,B.util.createBuffer(e.virtualHost));var u=B.util.createBuffer();yt(u,2,d),yt(l,2,u),o.putBuffer(l)}var c=o.length();c>0&&(c+=2);var f=e.session.id,g=f.length+1+2+4+28+2+i+1+s+c,h=B.util.createBuffer();return h.putByte(v.HandshakeType.client_hello),h.putInt24(g),h.putByte(e.version.major),h.putByte(e.version.minor),h.putBytes(e.session.sp.client_random),yt(h,1,B.util.createBuffer(f)),yt(h,2,t),yt(h,1,a),c>0&&yt(h,2,o),h};v.createServerHello=function(e){var t=e.session.id,n=t.length+1+2+4+28+2+1,r=B.util.createBuffer();return r.putByte(v.HandshakeType.server_hello),r.putInt24(n),r.putByte(e.version.major),r.putByte(e.version.minor),r.putBytes(e.session.sp.server_random),yt(r,1,B.util.createBuffer(t)),r.putByte(e.session.cipherSuite.id[0]),r.putByte(e.session.cipherSuite.id[1]),r.putByte(e.session.compressionMethod),r};v.createCertificate=function(e){var t=e.entity===v.ConnectionEnd.client,n=null;if(e.getCertificate){var r;t?r=e.session.certificateRequest:r=e.session.extensions.server_name.serverNameList,n=e.getCertificate(e,r)}var i=B.util.createBuffer();if(n!==null)try{B.util.isArray(n)||(n=[n]);for(var a=null,s=0;s<n.length;++s){var o=B.pem.decode(n[s])[0];if(o.type!=="CERTIFICATE"&&o.type!=="X509 CERTIFICATE"&&o.type!=="TRUSTED CERTIFICATE"){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=o.type,l}if(o.procType&&o.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var d=B.util.createBuffer(o.body);a===null&&(a=B.asn1.fromDer(d.bytes(),!1));var u=B.util.createBuffer();yt(u,3,d),i.putBuffer(u)}n=B.pki.certificateFromAsn1(a),t?e.session.clientCertificate=n:e.session.serverCertificate=n}catch(g){return e.error(e,{message:"Could not send certificate list.",cause:g,send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.bad_certificate}})}var c=3+i.length(),f=B.util.createBuffer();return f.putByte(v.HandshakeType.certificate),f.putInt24(c),yt(f,3,i),f};v.createClientKeyExchange=function(e){var t=B.util.createBuffer();t.putByte(e.session.clientHelloVersion.major),t.putByte(e.session.clientHelloVersion.minor),t.putBytes(B.random.getBytes(46));var n=e.session.sp;n.pre_master_secret=t.getBytes();var r=e.session.serverCertificate.publicKey;t=r.encrypt(n.pre_master_secret);var i=t.length+2,a=B.util.createBuffer();return a.putByte(v.HandshakeType.client_key_exchange),a.putInt24(i),a.putInt16(t.length),a.putBytes(t),a};v.createServerKeyExchange=function(e){var t=B.util.createBuffer();return t};v.getClientSignature=function(e,t){var n=B.util.createBuffer();n.putBuffer(e.session.md5.digest()),n.putBuffer(e.session.sha1.digest()),n=n.getBytes(),e.getSignature=e.getSignature||function(r,i,a){var s=null;if(r.getPrivateKey)try{s=r.getPrivateKey(r,r.session.clientCertificate),s=B.pki.privateKeyFromPem(s)}catch(o){r.error(r,{message:"Could not get private key.",cause:o,send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.internal_error}})}s===null?r.error(r,{message:"No private key set.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.internal_error}}):i=s.sign(i,null),a(r,i)},e.getSignature(e,n,t)};v.createCertificateVerify=function(e,t){var n=t.length+2,r=B.util.createBuffer();return r.putByte(v.HandshakeType.certificate_verify),r.putInt24(n),r.putInt16(t.length),r.putBytes(t),r};v.createCertificateRequest=function(e){var t=B.util.createBuffer();t.putByte(1);var n=B.util.createBuffer();for(var r in e.caStore.certs){var i=e.caStore.certs[r],a=B.pki.distinguishedNameToAsn1(i.subject),s=B.asn1.toDer(a);n.putInt16(s.length()),n.putBuffer(s)}var o=1+t.length()+2+n.length(),l=B.util.createBuffer();return l.putByte(v.HandshakeType.certificate_request),l.putInt24(o),yt(l,1,t),yt(l,2,n),l};v.createServerHelloDone=function(e){var t=B.util.createBuffer();return t.putByte(v.HandshakeType.server_hello_done),t.putInt24(0),t};v.createChangeCipherSpec=function(){var e=B.util.createBuffer();return e.putByte(1),e};v.createFinished=function(e){var t=B.util.createBuffer();t.putBuffer(e.session.md5.digest()),t.putBuffer(e.session.sha1.digest());var n=e.entity===v.ConnectionEnd.client,r=e.session.sp,i=12,a=$i,s=n?"client finished":"server finished";t=a(r.master_secret,s,t.getBytes(),i);var o=B.util.createBuffer();return o.putByte(v.HandshakeType.finished),o.putInt24(t.length()),o.putBuffer(t),o};v.createHeartbeat=function(e,t,n){typeof n>"u"&&(n=t.length);var r=B.util.createBuffer();r.putByte(e),r.putInt16(n),r.putBytes(t);var i=r.length(),a=Math.max(16,i-n-3);return r.putBytes(B.random.getBytes(a)),r};v.queue=function(e,t){if(t&&!(t.fragment.length()===0&&(t.type===v.ContentType.handshake||t.type===v.ContentType.alert||t.type===v.ContentType.change_cipher_spec))){if(t.type===v.ContentType.handshake){var n=t.fragment.bytes();e.session.md5.update(n),e.session.sha1.update(n),n=null}var r;if(t.fragment.length()<=v.MaxFragment)r=[t];else{r=[];for(var i=t.fragment.bytes();i.length>v.MaxFragment;)r.push(v.createRecord(e,{type:t.type,data:B.util.createBuffer(i.slice(0,v.MaxFragment))})),i=i.slice(v.MaxFragment);i.length>0&&r.push(v.createRecord(e,{type:t.type,data:B.util.createBuffer(i)}))}for(var a=0;a<r.length&&!e.fail;++a){var s=r[a],o=e.state.current.write;o.update(e,s)&&e.records.push(s)}}};v.flush=function(e){for(var t=0;t<e.records.length;++t){var n=e.records[t];e.tlsData.putByte(n.type),e.tlsData.putByte(n.version.major),e.tlsData.putByte(n.version.minor),e.tlsData.putInt16(n.fragment.length()),e.tlsData.putBuffer(e.records[t].fragment)}return e.records=[],e.tlsDataReady(e)};var Wi=function(e){switch(e){case!0:return!0;case B.pki.certificateError.bad_certificate:return v.Alert.Description.bad_certificate;case B.pki.certificateError.unsupported_certificate:return v.Alert.Description.unsupported_certificate;case B.pki.certificateError.certificate_revoked:return v.Alert.Description.certificate_revoked;case B.pki.certificateError.certificate_expired:return v.Alert.Description.certificate_expired;case B.pki.certificateError.certificate_unknown:return v.Alert.Description.certificate_unknown;case B.pki.certificateError.unknown_ca:return v.Alert.Description.unknown_ca;default:return v.Alert.Description.bad_certificate}},wp=function(e){switch(e){case!0:return!0;case v.Alert.Description.bad_certificate:return B.pki.certificateError.bad_certificate;case v.Alert.Description.unsupported_certificate:return B.pki.certificateError.unsupported_certificate;case v.Alert.Description.certificate_revoked:return B.pki.certificateError.certificate_revoked;case v.Alert.Description.certificate_expired:return B.pki.certificateError.certificate_expired;case v.Alert.Description.certificate_unknown:return B.pki.certificateError.certificate_unknown;case v.Alert.Description.unknown_ca:return B.pki.certificateError.unknown_ca;default:return B.pki.certificateError.bad_certificate}};v.verifyCertificateChain=function(e,t){try{var n={};for(var r in e.verifyOptions)n[r]=e.verifyOptions[r];n.verify=function(a,s,o){var l=Wi(a),d=e.verify(e,a,s,o);if(d!==!0){if(typeof d=="object"&&!B.util.isArray(d)){var u=new Error("The application rejected the certificate.");throw u.send=!0,u.alert={level:v.Alert.Level.fatal,description:v.Alert.Description.bad_certificate},d.message&&(u.message=d.message),d.alert&&(u.alert.description=d.alert),u}d!==a&&(d=wp(d))}return d},B.pki.verifyCertificateChain(e.caStore,t,n)}catch(a){var i=a;(typeof i!="object"||B.util.isArray(i))&&(i={send:!0,alert:{level:v.Alert.Level.fatal,description:Wi(a)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:v.Alert.Level.fatal,description:Wi(i.error)}),e.error(e,i)}return!e.fail};v.createSessionCache=function(e,t){var n=null;if(e&&e.getSession&&e.setSession&&e.order)n=e;else{n={},n.cache=e||{},n.capacity=Math.max(t||100,1),n.order=[];for(var r in e)n.order.length<=t?n.order.push(r):delete e[r];n.getSession=function(i){var a=null,s=null;if(i?s=B.util.bytesToHex(i):n.order.length>0&&(s=n.order[0]),s!==null&&s in n.cache){a=n.cache[s],delete n.cache[s];for(var o in n.order)if(n.order[o]===s){n.order.splice(o,1);break}}return a},n.setSession=function(i,a){if(n.order.length===n.capacity){var s=n.order.shift();delete n.cache[s]}var s=B.util.bytesToHex(i);n.order.push(s),n.cache[s]=a}}return n};v.createConnection=function(e){var t=null;e.caStore?B.util.isArray(e.caStore)?t=B.pki.createCaStore(e.caStore):t=e.caStore:t=B.pki.createCaStore();var n=e.cipherSuites||null;if(n===null){n=[];for(var r in v.CipherSuites)n.push(v.CipherSuites[r])}var i=e.server?v.ConnectionEnd.server:v.ConnectionEnd.client,a=e.sessionCache?v.createSessionCache(e.sessionCache):null,s={version:{major:v.Version.major,minor:v.Version.minor},entity:i,sessionId:e.sessionId,caStore:t,sessionCache:a,cipherSuites:n,connected:e.connected,virtualHost:e.virtualHost||null,verifyClient:e.verifyClient||!1,verify:e.verify||function(u,c,f,g){return c},verifyOptions:e.verifyOptions||{},getCertificate:e.getCertificate||null,getPrivateKey:e.getPrivateKey||null,getSignature:e.getSignature||null,input:B.util.createBuffer(),tlsData:B.util.createBuffer(),data:B.util.createBuffer(),tlsDataReady:e.tlsDataReady,dataReady:e.dataReady,heartbeatReceived:e.heartbeatReceived,closed:e.closed,error:function(u,c){c.origin=c.origin||(u.entity===v.ConnectionEnd.client?"client":"server"),c.send&&(v.queue(u,v.createAlert(u,c.alert)),v.flush(u));var f=c.fatal!==!1;f&&(u.fail=!0),e.error(u,c),f&&u.close(!1)},deflate:e.deflate||null,inflate:e.inflate||null};s.reset=function(u){s.version={major:v.Version.major,minor:v.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===v.ConnectionEnd.client?fp:Cp,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(u||typeof u>"u"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=v.createConnectionState(s)},s.reset();var o=function(u,c){var f=c.type-v.ContentType.change_cipher_spec,g=hs[u.entity][u.expect];f in g?g[f](u,c):v.handleUnexpected(u,c)},l=function(u){var c=0,f=u.input,g=f.length();if(g<5)c=5-g;else{u.record={type:f.getByte(),version:{major:f.getByte(),minor:f.getByte()},length:f.getInt16(),fragment:B.util.createBuffer(),ready:!1};var h=u.record.version.major===u.version.major;h&&u.session&&u.session.version&&(h=u.record.version.minor===u.version.minor),h||u.error(u,{message:"Incompatible TLS version.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.protocol_version}})}return c},d=function(u){var c=0,f=u.input,g=f.length();if(g<u.record.length)c=u.record.length-g;else{u.record.fragment.putBytes(f.getBytes(u.record.length)),f.compact();var h=u.state.current.read;h.update(u,u.record)&&(u.fragmented!==null&&(u.fragmented.type===u.record.type?(u.fragmented.fragment.putBuffer(u.record.fragment),u.record=u.fragmented):u.error(u,{message:"Invalid fragmented record.",send:!0,alert:{level:v.Alert.Level.fatal,description:v.Alert.Description.unexpected_message}})),u.record.ready=!0)}return c};return s.handshake=function(u){if(s.entity!==v.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,u=u||"";var c=null;u.length>0&&(s.sessionCache&&(c=s.sessionCache.getSession(u)),c===null&&(u="")),u.length===0&&s.sessionCache&&(c=s.sessionCache.getSession(),c!==null&&(u=c.id)),s.session={id:u,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:B.md.md5.create(),sha1:B.md.sha1.create()},c&&(s.version=c.version,s.session.sp=c.sp),s.session.sp.client_random=v.createRandom().getBytes(),s.open=!0,v.queue(s,v.createRecord(s,{type:v.ContentType.handshake,data:v.createClientHello(s)})),v.flush(s)}},s.process=function(u){var c=0;return u&&s.input.putBytes(u),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(c=l(s)),!s.fail&&s.record!==null&&!s.record.ready&&(c=d(s)),!s.fail&&s.record!==null&&s.record.ready&&o(s,s.record)),c},s.prepare=function(u){return v.queue(s,v.createRecord(s,{type:v.ContentType.application_data,data:B.util.createBuffer(u)})),v.flush(s)},s.prepareHeartbeatRequest=function(u,c){return u instanceof B.util.ByteBuffer&&(u=u.bytes()),typeof c>"u"&&(c=u.length),s.expectedHeartbeatPayload=u,v.queue(s,v.createRecord(s,{type:v.ContentType.heartbeat,data:v.createHeartbeat(v.HeartbeatMessageType.heartbeat_request,u,c)})),v.flush(s)},s.close=function(u){if(!s.fail&&s.sessionCache&&s.session){var c={id:s.session.id,version:s.session.version,sp:s.session.sp};c.sp.keys=null,s.sessionCache.setSession(c.id,c)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,v.queue(s,v.createAlert(s,{level:v.Alert.Level.warning,description:v.Alert.Description.close_notify})),v.flush(s)),s.closed(s)),s.reset(u)},s};B.tls=B.tls||{};for(var Hi in v)typeof v[Hi]!="function"&&(B.tls[Hi]=v[Hi]);B.tls.prf_tls1=$i;B.tls.hmac_sha1=lp;B.tls.createSessionCache=v.createSessionCache;B.tls.createConnection=v.createConnection;var lr=J,Ct=lr.tls;Ct.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=Ct.BulkCipherAlgorithm.aes,e.cipher_type=Ct.CipherType.block,e.enc_key_length=16,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=Ct.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:Tu};Ct.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(e){e.bulk_cipher_algorithm=Ct.BulkCipherAlgorithm.aes,e.cipher_type=Ct.CipherType.block,e.enc_key_length=32,e.block_length=16,e.fixed_iv_length=16,e.record_iv_length=16,e.mac_algorithm=Ct.MACAlgorithm.hmac_sha1,e.mac_length=20,e.mac_key_length=20},initConnectionState:Tu};function Tu(e,t,n){var r=t.entity===lr.tls.ConnectionEnd.client;e.read.cipherState={init:!1,cipher:lr.cipher.createDecipher("AES-CBC",r?n.keys.server_write_key:n.keys.client_write_key),iv:r?n.keys.server_write_IV:n.keys.client_write_IV},e.write.cipherState={init:!1,cipher:lr.cipher.createCipher("AES-CBC",r?n.keys.client_write_key:n.keys.server_write_key),iv:r?n.keys.client_write_IV:n.keys.server_write_IV},e.read.cipherFunction=Np,e.write.cipherFunction=Bp,e.read.macLength=e.write.macLength=n.mac_length,e.read.macFunction=e.write.macFunction=Ct.hmac_sha1}function Bp(e,t){var n=!1,r=t.macFunction(t.macKey,t.sequenceNumber,e);e.fragment.putBytes(r),t.updateSequenceNumber();var i;e.version.minor===Ct.Versions.TLS_1_0.minor?i=t.cipherState.init?null:t.cipherState.iv:i=lr.random.getBytesSync(16),t.cipherState.init=!0;var a=t.cipherState.cipher;return a.start({iv:i}),e.version.minor>=Ct.Versions.TLS_1_1.minor&&a.output.putBytes(i),a.update(e.fragment),a.finish(Rp)&&(e.fragment=a.output,e.length=e.fragment.length(),n=!0),n}function Rp(e,t,n){if(!n){var r=e-t.length()%e;t.fillWithByte(r-1,r)}return!0}function _p(e,t,n){var r=!0;if(n){for(var i=t.length(),a=t.last(),s=i-1-a;s<i-1;++s)r=r&&t.at(s)==a;r&&t.truncate(a+1)}return r}function Np(e,t){var n=!1,r;e.version.minor===Ct.Versions.TLS_1_0.minor?r=t.cipherState.init?null:t.cipherState.iv:r=e.fragment.getBytes(16),t.cipherState.init=!0;var i=t.cipherState.cipher;i.start({iv:r}),i.update(e.fragment),n=i.finish(_p);var a=t.macLength,s=lr.random.getBytesSync(a),o=i.output.length();o>=a?(e.fragment=i.output.getBytes(o-a),s=i.output.getBytes(a)):e.fragment=i.output.getBytes(),e.fragment=lr.util.createBuffer(e.fragment),e.length=e.fragment.length();var l=t.macFunction(t.macKey,t.sequenceNumber,e);return t.updateSequenceNumber(),n=Pp(t.macKey,s,l)&&n,n}function Pp(e,t,n){var r=lr.hmac.create();return r.start("SHA1",e),r.update(t),t=r.digest().getBytes(),r.start(null,null),r.update(n),n=r.digest().getBytes(),t===n}var Ee=J,Tn=Ee.sha512=Ee.sha512||{};Ee.md.sha512=Ee.md.algorithms.sha512=Tn;var Iu=Ee.sha384=Ee.sha512.sha384=Ee.sha512.sha384||{};Iu.create=function(){return Tn.create("SHA-384")};Ee.md.sha384=Ee.md.algorithms.sha384=Iu;Ee.sha512.sha256=Ee.sha512.sha256||{create:function(){return Tn.create("SHA-512/256")}};Ee.md["sha512/256"]=Ee.md.algorithms["sha512/256"]=Ee.sha512.sha256;Ee.sha512.sha224=Ee.sha512.sha224||{create:function(){return Tn.create("SHA-512/224")}};Ee.md["sha512/224"]=Ee.md.algorithms["sha512/224"]=Ee.sha512.sha224;Tn.create=function(e){if(Au||Lp(),typeof e>"u"&&(e="SHA-512"),!(e in gr))throw new Error("Invalid SHA-512 algorithm: "+e);for(var t=gr[e],n=null,r=Ee.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var s=64;switch(e){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var o={algorithm:e.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return o.start=function(){o.messageLength=0,o.fullMessageLength=o.messageLength128=[];for(var l=o.messageLengthSize/4,d=0;d<l;++d)o.fullMessageLength.push(0);r=Ee.util.createBuffer(),n=new Array(t.length);for(var d=0;d<t.length;++d)n[d]=t[d].slice(0);return o},o.start(),o.update=function(l,d){d==="utf8"&&(l=Ee.util.encodeUtf8(l));var u=l.length;o.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var c=o.fullMessageLength.length-1;c>=0;--c)o.fullMessageLength[c]+=u[1],u[1]=u[0]+(o.fullMessageLength[c]/4294967296>>>0),o.fullMessageLength[c]=o.fullMessageLength[c]>>>0,u[0]=u[1]/4294967296>>>0;return r.putBytes(l),xo(n,i,r),(r.read>2048||r.length()===0)&&r.compact(),o},o.digest=function(){var l=Ee.util.createBuffer();l.putBytes(r.bytes());var d=o.fullMessageLength[o.fullMessageLength.length-1]+o.messageLengthSize,u=d&o.blockLength-1;l.putBytes(Ia.substr(0,o.blockLength-u));for(var c,f,g=o.fullMessageLength[0]*8,h=0;h<o.fullMessageLength.length-1;++h)c=o.fullMessageLength[h+1]*8,f=c/4294967296>>>0,g+=f,l.putInt32(g>>>0),g=c>>>0;l.putInt32(g);for(var m=new Array(n.length),h=0;h<n.length;++h)m[h]=n[h].slice(0);xo(m,i,l);var E=Ee.util.createBuffer(),b;e==="SHA-512"?b=m.length:e==="SHA-384"?b=m.length-2:b=m.length-4;for(var h=0;h<b;++h)E.putInt32(m[h][0]),(h!==b-1||e!=="SHA-512/224")&&E.putInt32(m[h][1]);return E},o};var Ia=null,Au=!1,Aa=null,gr=null;function Lp(){Ia="",Ia+=Ee.util.fillString("\0",128),Aa=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],gr={},gr["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],gr["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],gr["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],gr["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],Au=!0}function xo(e,t,n){for(var r,i,a,s,o,l,d,u,c,f,g,h,m,E,b,I,x,L,P,_,G,z,Z,ie,le,de,me,Ae,ee,ye,V,Vt,Gt,Se,we,Re=n.length();Re>=128;){for(ee=0;ee<16;++ee)t[ee][0]=n.getInt32()>>>0,t[ee][1]=n.getInt32()>>>0;for(;ee<80;++ee)Vt=t[ee-2],ye=Vt[0],V=Vt[1],r=((ye>>>19|V<<13)^(V>>>29|ye<<3)^ye>>>6)>>>0,i=((ye<<13|V>>>19)^(V<<3|ye>>>29)^(ye<<26|V>>>6))>>>0,Se=t[ee-15],ye=Se[0],V=Se[1],a=((ye>>>1|V<<31)^(ye>>>8|V<<24)^ye>>>7)>>>0,s=((ye<<31|V>>>1)^(ye<<24|V>>>8)^(ye<<25|V>>>7))>>>0,Gt=t[ee-7],we=t[ee-16],V=i+Gt[1]+s+we[1],t[ee][0]=r+Gt[0]+a+we[0]+(V/4294967296>>>0)>>>0,t[ee][1]=V>>>0;for(m=e[0][0],E=e[0][1],b=e[1][0],I=e[1][1],x=e[2][0],L=e[2][1],P=e[3][0],_=e[3][1],G=e[4][0],z=e[4][1],Z=e[5][0],ie=e[5][1],le=e[6][0],de=e[6][1],me=e[7][0],Ae=e[7][1],ee=0;ee<80;++ee)d=((G>>>14|z<<18)^(G>>>18|z<<14)^(z>>>9|G<<23))>>>0,u=((G<<18|z>>>14)^(G<<14|z>>>18)^(z<<23|G>>>9))>>>0,c=(le^G&(Z^le))>>>0,f=(de^z&(ie^de))>>>0,o=((m>>>28|E<<4)^(E>>>2|m<<30)^(E>>>7|m<<25))>>>0,l=((m<<4|E>>>28)^(E<<30|m>>>2)^(E<<25|m>>>7))>>>0,g=(m&b|x&(m^b))>>>0,h=(E&I|L&(E^I))>>>0,V=Ae+u+f+Aa[ee][1]+t[ee][1],r=me+d+c+Aa[ee][0]+t[ee][0]+(V/4294967296>>>0)>>>0,i=V>>>0,V=l+h,a=o+g+(V/4294967296>>>0)>>>0,s=V>>>0,me=le,Ae=de,le=Z,de=ie,Z=G,ie=z,V=_+i,G=P+r+(V/4294967296>>>0)>>>0,z=V>>>0,P=x,_=L,x=b,L=I,b=m,I=E,V=i+s,m=r+a+(V/4294967296>>>0)>>>0,E=V>>>0;V=e[0][1]+E,e[0][0]=e[0][0]+m+(V/4294967296>>>0)>>>0,e[0][1]=V>>>0,V=e[1][1]+I,e[1][0]=e[1][0]+b+(V/4294967296>>>0)>>>0,e[1][1]=V>>>0,V=e[2][1]+L,e[2][0]=e[2][0]+x+(V/4294967296>>>0)>>>0,e[2][1]=V>>>0,V=e[3][1]+_,e[3][0]=e[3][0]+P+(V/4294967296>>>0)>>>0,e[3][1]=V>>>0,V=e[4][1]+z,e[4][0]=e[4][0]+G+(V/4294967296>>>0)>>>0,e[4][1]=V>>>0,V=e[5][1]+ie,e[5][0]=e[5][0]+Z+(V/4294967296>>>0)>>>0,e[5][1]=V>>>0,V=e[6][1]+de,e[6][0]=e[6][0]+le+(V/4294967296>>>0)>>>0,e[6][1]=V>>>0,V=e[7][1]+Ae,e[7][0]=e[7][0]+me+(V/4294967296>>>0)>>>0,e[7][1]=V>>>0,Re-=128}}var ps={},Op=J,Le=Op.asn1;ps.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Le.Class.UNIVERSAL,type:Le.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Le.Class.UNIVERSAL,type:Le.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Le.Class.UNIVERSAL,type:Le.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};ps.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Le.Class.UNIVERSAL,type:Le.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Le.Class.UNIVERSAL,type:Le.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Le.Class.UNIVERSAL,type:Le.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]};var Me=J,wu=ps,Dp=wu.publicKeyValidator,kp=wu.privateKeyValidator;if(typeof Up>"u")var Up=Me.jsbn.BigInteger;var wa=Me.util.ByteBuffer,dt=typeof W.Buffer>"u"?Uint8Array:W.Buffer;Me.pki=Me.pki||{};Me.pki.ed25519=Me.ed25519=Me.ed25519||{};var re=Me.ed25519;re.constants={};re.constants.PUBLIC_KEY_BYTE_LENGTH=32;re.constants.PRIVATE_KEY_BYTE_LENGTH=64;re.constants.SEED_BYTE_LENGTH=32;re.constants.SIGN_BYTE_LENGTH=64;re.constants.HASH_BYTE_LENGTH=64;re.generateKeyPair=function(e){e=e||{};var t=e.seed;if(t===void 0)t=Me.random.getBytesSync(re.constants.SEED_BYTE_LENGTH);else if(typeof t=="string"){if(t.length!==re.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+re.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');t=Qt({message:t,encoding:"binary"});for(var n=new dt(re.constants.PUBLIC_KEY_BYTE_LENGTH),r=new dt(re.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)r[i]=t[i];return Vp(n,r),{publicKey:n,privateKey:r}};re.privateKeyFromAsn1=function(e){var t={},n=[],r=Me.asn1.validate(e,kp,t,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var a=Me.asn1.derToOid(t.privateKeyOid),s=Me.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var o=t.privateKey,l=Qt({message:Me.asn1.fromDer(o).value,encoding:"binary"});return{privateKeyBytes:l}};re.publicKeyFromAsn1=function(e){var t={},n=[],r=Me.asn1.validate(e,Dp,t,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var a=Me.asn1.derToOid(t.publicKeyOid),s=Me.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var o=t.ed25519PublicKey;if(o.length!==re.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Qt({message:o,encoding:"binary"})};re.publicKeyFromPrivateKey=function(e){e=e||{};var t=Qt({message:e.privateKey,encoding:"binary"});if(t.length!==re.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+re.constants.PRIVATE_KEY_BYTE_LENGTH);for(var n=new dt(re.constants.PUBLIC_KEY_BYTE_LENGTH),r=0;r<n.length;++r)n[r]=t[32+r];return n};re.sign=function(e){e=e||{};var t=Qt(e),n=Qt({message:e.privateKey,encoding:"binary"});if(n.length===re.constants.SEED_BYTE_LENGTH){var r=re.generateKeyPair({seed:n});n=r.privateKey}else if(n.length!==re.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+re.constants.SEED_BYTE_LENGTH+" or "+re.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new dt(re.constants.SIGN_BYTE_LENGTH+t.length);Gp(i,t,t.length,n);for(var a=new dt(re.constants.SIGN_BYTE_LENGTH),s=0;s<a.length;++s)a[s]=i[s];return a};re.verify=function(e){e=e||{};var t=Qt(e);if(e.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var n=Qt({message:e.signature,encoding:"binary"});if(n.length!==re.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+re.constants.SIGN_BYTE_LENGTH);var r=Qt({message:e.publicKey,encoding:"binary"});if(r.length!==re.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+re.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new dt(re.constants.SIGN_BYTE_LENGTH+t.length),a=new dt(re.constants.SIGN_BYTE_LENGTH+t.length),s;for(s=0;s<re.constants.SIGN_BYTE_LENGTH;++s)i[s]=n[s];for(s=0;s<t.length;++s)i[s+re.constants.SIGN_BYTE_LENGTH]=t[s];return Wp(a,i,i.length,r)>=0};function Qt(e){var t=e.message;if(t instanceof Uint8Array||t instanceof dt)return t;var n=e.encoding;if(t===void 0)if(e.md)t=e.md.digest().getBytes(),n="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof t=="string"&&!n)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof t=="string"){if(typeof W.Buffer<"u")return W.Buffer.from(t,n);t=new wa(t,n)}else if(!(t instanceof wa))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var r=new dt(t.length()),i=0;i<r.length;++i)r[i]=t.at(i);return r}var Ba=j(),ii=j([1]),Fp=j([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),Mp=j([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),To=j([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Io=j([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),qi=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),Kp=j([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function sn(e,t){var n=Me.md.sha512.create(),r=new wa(e);n.update(r.getBytes(t),"binary");var i=n.digest().getBytes();if(typeof W.Buffer<"u")return W.Buffer.from(i,"binary");for(var a=new dt(re.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function Vp(e,t){var n=[j(),j(),j(),j()],r,i=sn(t,32);for(i[0]&=248,i[31]&=127,i[31]|=64,vs(n,i),ys(e,n),r=0;r<32;++r)t[r+32]=e[r];return 0}function Gp(e,t,n,r){var i,a,s=new Float64Array(64),o=[j(),j(),j(),j()],l=sn(r,32);l[0]&=248,l[31]&=127,l[31]|=64;var d=n+64;for(i=0;i<n;++i)e[64+i]=t[i];for(i=0;i<32;++i)e[32+i]=l[32+i];var u=sn(e.subarray(32),n+32);for(Ra(u),vs(o,u),ys(e,o),i=32;i<64;++i)e[i]=r[i];var c=sn(e,n+64);for(Ra(c),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=u[i];for(i=0;i<32;++i)for(a=0;a<32;a++)s[i+a]+=c[i]*l[a];return Bu(e.subarray(32),s),d}function Wp(e,t,n,r){var i,a,s=new dt(32),o=[j(),j(),j(),j()],l=[j(),j(),j(),j()];if(a=-1,n<64||Hp(l,r))return-1;for(i=0;i<n;++i)e[i]=t[i];for(i=0;i<32;++i)e[i+32]=r[i];var d=sn(e,n);if(Ra(d),Nu(o,l,d),vs(l,t.subarray(32)),_a(o,l),ys(s,o),n-=64,Ru(t,0,s,0)){for(i=0;i<n;++i)e[i]=0;return-1}for(i=0;i<n;++i)e[i]=t[i+64];return a=n,a}function Bu(e,t){var n,r,i,a;for(r=63;r>=32;--r){for(n=0,i=r-32,a=r-12;i<a;++i)t[i]+=n-16*t[r]*qi[i-(r-32)],n=t[i]+128>>8,t[i]-=n*256;t[i]+=n,t[r]=0}for(n=0,i=0;i<32;++i)t[i]+=n-(t[31]>>4)*qi[i],n=t[i]>>8,t[i]&=255;for(i=0;i<32;++i)t[i]-=n*qi[i];for(r=0;r<32;++r)t[r+1]+=t[r]>>8,e[r]=t[r]&255}function Ra(e){for(var t=new Float64Array(64),n=0;n<64;++n)t[n]=e[n],e[n]=0;Bu(e,t)}function _a(e,t){var n=j(),r=j(),i=j(),a=j(),s=j(),o=j(),l=j(),d=j(),u=j();Nr(n,e[1],e[0]),Nr(u,t[1],t[0]),he(n,n,u),Rr(r,e[0],e[1]),Rr(u,t[0],t[1]),he(r,r,u),he(i,e[3],t[3]),he(i,i,Mp),he(a,e[2],t[2]),Rr(a,a,a),Nr(s,r,n),Nr(o,a,i),Rr(l,a,i),Rr(d,r,n),he(e[0],s,o),he(e[1],d,l),he(e[2],l,o),he(e[3],s,d)}function Ao(e,t,n){for(var r=0;r<4;++r)Pu(e[r],t[r],n)}function ys(e,t){var n=j(),r=j(),i=j();Qp(i,t[2]),he(n,t[0],i),he(r,t[1],i),ai(e,r),e[31]^=_u(n)<<7}function ai(e,t){var n,r,i,a=j(),s=j();for(n=0;n<16;++n)s[n]=t[n];for(ji(s),ji(s),ji(s),r=0;r<2;++r){for(a[0]=s[0]-65517,n=1;n<15;++n)a[n]=s[n]-65535-(a[n-1]>>16&1),a[n-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,Pu(s,a,1-i)}for(n=0;n<16;n++)e[2*n]=s[n]&255,e[2*n+1]=s[n]>>8}function Hp(e,t){var n=j(),r=j(),i=j(),a=j(),s=j(),o=j(),l=j();return or(e[2],ii),qp(e[1],t),mr(i,e[1]),he(a,i,Fp),Nr(i,i,e[2]),Rr(a,e[2],a),mr(s,a),mr(o,s),he(l,o,s),he(n,l,i),he(n,n,a),jp(n,n),he(n,n,i),he(n,n,a),he(n,n,a),he(e[0],n,a),mr(r,e[0]),he(r,r,a),wo(r,i)&&he(e[0],e[0],Kp),mr(r,e[0]),he(r,r,a),wo(r,i)?-1:(_u(e[0])===t[31]>>7&&Nr(e[0],Ba,e[0]),he(e[3],e[0],e[1]),0)}function qp(e,t){var n;for(n=0;n<16;++n)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function jp(e,t){var n=j(),r;for(r=0;r<16;++r)n[r]=t[r];for(r=250;r>=0;--r)mr(n,n),r!==1&&he(n,n,t);for(r=0;r<16;++r)e[r]=n[r]}function wo(e,t){var n=new dt(32),r=new dt(32);return ai(n,e),ai(r,t),Ru(n,0,r,0)}function Ru(e,t,n,r){return zp(e,t,n,r,32)}function zp(e,t,n,r,i){var a,s=0;for(a=0;a<i;++a)s|=e[t+a]^n[r+a];return(1&s-1>>>8)-1}function _u(e){var t=new dt(32);return ai(t,e),t[0]&1}function Nu(e,t,n){var r,i;for(or(e[0],Ba),or(e[1],ii),or(e[2],ii),or(e[3],Ba),i=255;i>=0;--i)r=n[i/8|0]>>(i&7)&1,Ao(e,t,r),_a(t,e),_a(e,e),Ao(e,t,r)}function vs(e,t){var n=[j(),j(),j(),j()];or(n[0],To),or(n[1],Io),or(n[2],ii),he(n[3],To,Io),Nu(e,n,t)}function or(e,t){var n;for(n=0;n<16;n++)e[n]=t[n]|0}function Qp(e,t){var n=j(),r;for(r=0;r<16;++r)n[r]=t[r];for(r=253;r>=0;--r)mr(n,n),r!==2&&r!==4&&he(n,n,t);for(r=0;r<16;++r)e[r]=n[r]}function ji(e){var t,n,r=1;for(t=0;t<16;++t)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-r*65536;e[0]+=r-1+37*(r-1)}function Pu(e,t,n){for(var r,i=~(n-1),a=0;a<16;++a)r=i&(e[a]^t[a]),e[a]^=r,t[a]^=r}function j(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;++t)n[t]=e[t];return n}function Rr(e,t,n){for(var r=0;r<16;++r)e[r]=t[r]+n[r]}function Nr(e,t,n){for(var r=0;r<16;++r)e[r]=t[r]-n[r]}function mr(e,t){he(e,t,t)}function he(e,t,n){var r,i,a=0,s=0,o=0,l=0,d=0,u=0,c=0,f=0,g=0,h=0,m=0,E=0,b=0,I=0,x=0,L=0,P=0,_=0,G=0,z=0,Z=0,ie=0,le=0,de=0,me=0,Ae=0,ee=0,ye=0,V=0,Vt=0,Gt=0,Se=n[0],we=n[1],Re=n[2],Ke=n[3],Ve=n[4],Ge=n[5],We=n[6],He=n[7],qe=n[8],je=n[9],ze=n[10],Qe=n[11],Ye=n[12],Xe=n[13],Je=n[14],Ze=n[15];r=t[0],a+=r*Se,s+=r*we,o+=r*Re,l+=r*Ke,d+=r*Ve,u+=r*Ge,c+=r*We,f+=r*He,g+=r*qe,h+=r*je,m+=r*ze,E+=r*Qe,b+=r*Ye,I+=r*Xe,x+=r*Je,L+=r*Ze,r=t[1],s+=r*Se,o+=r*we,l+=r*Re,d+=r*Ke,u+=r*Ve,c+=r*Ge,f+=r*We,g+=r*He,h+=r*qe,m+=r*je,E+=r*ze,b+=r*Qe,I+=r*Ye,x+=r*Xe,L+=r*Je,P+=r*Ze,r=t[2],o+=r*Se,l+=r*we,d+=r*Re,u+=r*Ke,c+=r*Ve,f+=r*Ge,g+=r*We,h+=r*He,m+=r*qe,E+=r*je,b+=r*ze,I+=r*Qe,x+=r*Ye,L+=r*Xe,P+=r*Je,_+=r*Ze,r=t[3],l+=r*Se,d+=r*we,u+=r*Re,c+=r*Ke,f+=r*Ve,g+=r*Ge,h+=r*We,m+=r*He,E+=r*qe,b+=r*je,I+=r*ze,x+=r*Qe,L+=r*Ye,P+=r*Xe,_+=r*Je,G+=r*Ze,r=t[4],d+=r*Se,u+=r*we,c+=r*Re,f+=r*Ke,g+=r*Ve,h+=r*Ge,m+=r*We,E+=r*He,b+=r*qe,I+=r*je,x+=r*ze,L+=r*Qe,P+=r*Ye,_+=r*Xe,G+=r*Je,z+=r*Ze,r=t[5],u+=r*Se,c+=r*we,f+=r*Re,g+=r*Ke,h+=r*Ve,m+=r*Ge,E+=r*We,b+=r*He,I+=r*qe,x+=r*je,L+=r*ze,P+=r*Qe,_+=r*Ye,G+=r*Xe,z+=r*Je,Z+=r*Ze,r=t[6],c+=r*Se,f+=r*we,g+=r*Re,h+=r*Ke,m+=r*Ve,E+=r*Ge,b+=r*We,I+=r*He,x+=r*qe,L+=r*je,P+=r*ze,_+=r*Qe,G+=r*Ye,z+=r*Xe,Z+=r*Je,ie+=r*Ze,r=t[7],f+=r*Se,g+=r*we,h+=r*Re,m+=r*Ke,E+=r*Ve,b+=r*Ge,I+=r*We,x+=r*He,L+=r*qe,P+=r*je,_+=r*ze,G+=r*Qe,z+=r*Ye,Z+=r*Xe,ie+=r*Je,le+=r*Ze,r=t[8],g+=r*Se,h+=r*we,m+=r*Re,E+=r*Ke,b+=r*Ve,I+=r*Ge,x+=r*We,L+=r*He,P+=r*qe,_+=r*je,G+=r*ze,z+=r*Qe,Z+=r*Ye,ie+=r*Xe,le+=r*Je,de+=r*Ze,r=t[9],h+=r*Se,m+=r*we,E+=r*Re,b+=r*Ke,I+=r*Ve,x+=r*Ge,L+=r*We,P+=r*He,_+=r*qe,G+=r*je,z+=r*ze,Z+=r*Qe,ie+=r*Ye,le+=r*Xe,de+=r*Je,me+=r*Ze,r=t[10],m+=r*Se,E+=r*we,b+=r*Re,I+=r*Ke,x+=r*Ve,L+=r*Ge,P+=r*We,_+=r*He,G+=r*qe,z+=r*je,Z+=r*ze,ie+=r*Qe,le+=r*Ye,de+=r*Xe,me+=r*Je,Ae+=r*Ze,r=t[11],E+=r*Se,b+=r*we,I+=r*Re,x+=r*Ke,L+=r*Ve,P+=r*Ge,_+=r*We,G+=r*He,z+=r*qe,Z+=r*je,ie+=r*ze,le+=r*Qe,de+=r*Ye,me+=r*Xe,Ae+=r*Je,ee+=r*Ze,r=t[12],b+=r*Se,I+=r*we,x+=r*Re,L+=r*Ke,P+=r*Ve,_+=r*Ge,G+=r*We,z+=r*He,Z+=r*qe,ie+=r*je,le+=r*ze,de+=r*Qe,me+=r*Ye,Ae+=r*Xe,ee+=r*Je,ye+=r*Ze,r=t[13],I+=r*Se,x+=r*we,L+=r*Re,P+=r*Ke,_+=r*Ve,G+=r*Ge,z+=r*We,Z+=r*He,ie+=r*qe,le+=r*je,de+=r*ze,me+=r*Qe,Ae+=r*Ye,ee+=r*Xe,ye+=r*Je,V+=r*Ze,r=t[14],x+=r*Se,L+=r*we,P+=r*Re,_+=r*Ke,G+=r*Ve,z+=r*Ge,Z+=r*We,ie+=r*He,le+=r*qe,de+=r*je,me+=r*ze,Ae+=r*Qe,ee+=r*Ye,ye+=r*Xe,V+=r*Je,Vt+=r*Ze,r=t[15],L+=r*Se,P+=r*we,_+=r*Re,G+=r*Ke,z+=r*Ve,Z+=r*Ge,ie+=r*We,le+=r*He,de+=r*qe,me+=r*je,Ae+=r*ze,ee+=r*Qe,ye+=r*Ye,V+=r*Xe,Vt+=r*Je,Gt+=r*Ze,a+=38*P,s+=38*_,o+=38*G,l+=38*z,d+=38*Z,u+=38*ie,c+=38*le,f+=38*de,g+=38*me,h+=38*Ae,m+=38*ee,E+=38*ye,b+=38*V,I+=38*Vt,x+=38*Gt,i=1,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=s+i+65535,i=Math.floor(r/65536),s=r-i*65536,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=d+i+65535,i=Math.floor(r/65536),d=r-i*65536,r=u+i+65535,i=Math.floor(r/65536),u=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=f+i+65535,i=Math.floor(r/65536),f=r-i*65536,r=g+i+65535,i=Math.floor(r/65536),g=r-i*65536,r=h+i+65535,i=Math.floor(r/65536),h=r-i*65536,r=m+i+65535,i=Math.floor(r/65536),m=r-i*65536,r=E+i+65535,i=Math.floor(r/65536),E=r-i*65536,r=b+i+65535,i=Math.floor(r/65536),b=r-i*65536,r=I+i+65535,i=Math.floor(r/65536),I=r-i*65536,r=x+i+65535,i=Math.floor(r/65536),x=r-i*65536,r=L+i+65535,i=Math.floor(r/65536),L=r-i*65536,a+=i-1+37*(i-1),i=1,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=s+i+65535,i=Math.floor(r/65536),s=r-i*65536,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=d+i+65535,i=Math.floor(r/65536),d=r-i*65536,r=u+i+65535,i=Math.floor(r/65536),u=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=f+i+65535,i=Math.floor(r/65536),f=r-i*65536,r=g+i+65535,i=Math.floor(r/65536),g=r-i*65536,r=h+i+65535,i=Math.floor(r/65536),h=r-i*65536,r=m+i+65535,i=Math.floor(r/65536),m=r-i*65536,r=E+i+65535,i=Math.floor(r/65536),E=r-i*65536,r=b+i+65535,i=Math.floor(r/65536),b=r-i*65536,r=I+i+65535,i=Math.floor(r/65536),I=r-i*65536,r=x+i+65535,i=Math.floor(r/65536),x=r-i*65536,r=L+i+65535,i=Math.floor(r/65536),L=r-i*65536,a+=i-1+37*(i-1),e[0]=a,e[1]=s,e[2]=o,e[3]=l,e[4]=d,e[5]=u,e[6]=c,e[7]=f,e[8]=g,e[9]=h,e[10]=m,e[11]=E,e[12]=b,e[13]=I,e[14]=x,e[15]=L}var ht=J;ht.kem=ht.kem||{};var Bo=ht.jsbn.BigInteger;ht.kem.rsa={};ht.kem.rsa.create=function(e,t){t=t||{};var n=t.prng||ht.random,r={};return r.encrypt=function(i,a){var s=Math.ceil(i.n.bitLength()/8),o;do o=new Bo(ht.util.bytesToHex(n.getBytesSync(s)),16).mod(i.n);while(o.compareTo(Bo.ONE)<=0);o=ht.util.hexToBytes(o.toString(16));var l=s-o.length;l>0&&(o=ht.util.fillString("\0",l)+o);var d=i.encrypt(o,"NONE"),u=e.generate(o,a);return{encapsulation:d,key:u}},r.decrypt=function(i,a,s){var o=i.decrypt(a,"NONE");return e.generate(o,s)},r};ht.kem.kdf1=function(e,t){Lu(this,e,0,t||e.digestLength)};ht.kem.kdf2=function(e,t){Lu(this,e,1,t||e.digestLength)};function Lu(e,t,n,r){e.generate=function(i,a){for(var s=new ht.util.ByteBuffer,o=Math.ceil(a/r)+n,l=new ht.util.ByteBuffer,d=n;d<o;++d){l.putInt32(d),t.start(),t.update(i+l.getBytes());var u=t.digest();s.putBytes(u.getBytes(r))}return s.truncate(s.length()-a),s.getBytes()}}var ae=J;ae.log=ae.log||{};ae.log.levels=["none","error","warning","info","debug","verbose","max"];var si={},Na=[],on=null;ae.log.LEVEL_LOCKED=2;ae.log.NO_LEVEL_CHECK=4;ae.log.INTERPOLATE=8;for(var ur=0;ur<ae.log.levels.length;++ur){var Ro=ae.log.levels[ur];si[Ro]={index:ur,name:Ro.toUpperCase()}}ae.log.logMessage=function(e){for(var t=si[e.level].index,n=0;n<Na.length;++n){var r=Na[n];if(r.flags&ae.log.NO_LEVEL_CHECK)r.f(e);else{var i=si[r.level].index;t<=i&&r.f(r,e)}}};ae.log.prepareStandard=function(e){"standard"in e||(e.standard=si[e.level].name+" ["+e.category+"] "+e.message)};ae.log.prepareFull=function(e){if(!("full"in e)){var t=[e.message];t=t.concat([]),e.full=ae.util.format.apply(this,t)}};ae.log.prepareStandardFull=function(e){"standardFull"in e||(ae.log.prepareStandard(e),e.standardFull=e.standard)};for(var _o=["error","warning","info","debug","verbose"],ur=0;ur<_o.length;++ur)(function(t){ae.log[t]=function(n,r){var i=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:t,category:n,message:r,arguments:i};ae.log.logMessage(a)}})(_o[ur]);ae.log.makeLogger=function(e){var t={flags:0,f:e};return ae.log.setLevel(t,"none"),t};ae.log.setLevel=function(e,t){var n=!1;if(e&&!(e.flags&ae.log.LEVEL_LOCKED))for(var r=0;r<ae.log.levels.length;++r){var i=ae.log.levels[r];if(t==i){e.level=t,n=!0;break}}return n};ae.log.lock=function(e,t){typeof t>"u"||t?e.flags|=ae.log.LEVEL_LOCKED:e.flags&=~ae.log.LEVEL_LOCKED};ae.log.addLogger=function(e){Na.push(e)};if(typeof console<"u"&&"log"in console){var Xr;if(console.error&&console.warn&&console.info&&console.debug){var Yp={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},gs=function(e,t){ae.log.prepareStandard(t);var n=Yp[t.level],r=[t.standard];r=r.concat(t.arguments.slice()),n.apply(console,r)};Xr=ae.log.makeLogger(gs)}else{var gs=function(t,n){ae.log.prepareStandardFull(n),console.log(n.standardFull)};Xr=ae.log.makeLogger(gs)}ae.log.setLevel(Xr,"debug"),ae.log.addLogger(Xr),on=Xr}else console={log:function(){}};if(on!==null&&typeof window<"u"&&window.location){var _n=new URL(window.location.href).searchParams;if(_n.has("console.level")&&ae.log.setLevel(on,_n.get("console.level").slice(-1)[0]),_n.has("console.lock")){var Xp=_n.get("console.lock").slice(-1)[0];Xp=="true"&&ae.log.lock(on)}}ae.log.consoleLogger=on;var D=J,S=D.asn1,at=D.pkcs7=D.pkcs7||{};at.messageFromPem=function(e){var t=D.pem.decode(e)[0];if(t.type!=="PKCS7"){var n=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw n.headerType=t.type,n}if(t.procType&&t.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var r=S.fromDer(t.body);return at.messageFromAsn1(r)};at.messageToPem=function(e,t){var n={type:"PKCS7",body:S.toDer(e.toAsn1()).getBytes()};return D.pem.encode(n,{maxline:t})};at.messageFromAsn1=function(e){var t={},n=[];if(!S.validate(e,at.asn1.contentInfoValidator,t,n)){var r=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw r.errors=n,r}var i=S.derToOid(t.contentType),a;switch(i){case D.pki.oids.envelopedData:a=at.createEnvelopedData();break;case D.pki.oids.encryptedData:a=at.createEncryptedData();break;case D.pki.oids.signedData:a=at.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return a.fromAsn1(t.content.value[0]),a};at.createSignedData=function(){var e=null;return e={type:D.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(r){if(ms(e,r,at.asn1.signedDataValidator),e.certificates=[],e.crls=[],e.digestAlgorithmIdentifiers=[],e.contentInfo=null,e.signerInfos=[],e.rawCapture.certificates)for(var i=e.rawCapture.certificates.value,a=0;a<i.length;++a)e.certificates.push(D.pki.certificateFromAsn1(i[a]))},toAsn1:function(){e.contentInfo||e.sign();for(var r=[],i=0;i<e.certificates.length;++i)r.push(D.pki.certificateToAsn1(e.certificates[i]));var a=[],s=S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,S.integerToDer(e.version).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.SET,!0,e.digestAlgorithmIdentifiers),e.contentInfo])]);return r.length>0&&s.value[0].value.push(S.create(S.Class.CONTEXT_SPECIFIC,0,!0,r)),a.length>0&&s.value[0].value.push(S.create(S.Class.CONTEXT_SPECIFIC,1,!0,a)),s.value[0].value.push(S.create(S.Class.UNIVERSAL,S.Type.SET,!0,e.signerInfos)),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(e.type).getBytes()),s])},addSigner:function(r){var i=r.issuer,a=r.serialNumber;if(r.certificate){var s=r.certificate;typeof s=="string"&&(s=D.pki.certificateFromPem(s)),i=s.issuer.attributes,a=s.serialNumber}var o=r.key;if(!o)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof o=="string"&&(o=D.pki.privateKeyFromPem(o));var l=r.digestAlgorithm||D.pki.oids.sha1;switch(l){case D.pki.oids.sha1:case D.pki.oids.sha256:case D.pki.oids.sha384:case D.pki.oids.sha512:case D.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+l)}var d=r.authenticatedAttributes||[];if(d.length>0){for(var u=!1,c=!1,f=0;f<d.length;++f){var g=d[f];if(!u&&g.type===D.pki.oids.contentType){if(u=!0,c)break;continue}if(!c&&g.type===D.pki.oids.messageDigest){if(c=!0,u)break;continue}}if(!u||!c)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}e.signers.push({key:o,version:1,issuer:i,serialNumber:a,digestAlgorithm:l,signatureAlgorithm:D.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:d,unauthenticatedAttributes:[]})},sign:function(r){if(r=r||{},(typeof e.content!="object"||e.contentInfo===null)&&(e.contentInfo=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(D.pki.oids.data).getBytes())]),"content"in e)){var i;e.content instanceof D.util.ByteBuffer?i=e.content.bytes():typeof e.content=="string"&&(i=D.util.encodeUtf8(e.content)),r.detached?e.detachedContent=S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,i):e.contentInfo.value.push(S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,i)]))}if(e.signers.length!==0){var a=t();n(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(r){typeof r=="string"&&(r=D.pki.certificateFromPem(r)),e.certificates.push(r)},addCertificateRevokationList:function(r){throw new Error("PKCS#7 CRL support not yet implemented.")}},e;function t(){for(var r={},i=0;i<e.signers.length;++i){var a=e.signers[i],s=a.digestAlgorithm;s in r||(r[s]=D.md[D.pki.oids[s]].create()),a.authenticatedAttributes.length===0?a.md=r[s]:a.md=D.md[D.pki.oids[s]].create()}e.digestAlgorithmIdentifiers=[];for(var s in r)e.digestAlgorithmIdentifiers.push(S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(s).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.NULL,!1,"")]));return r}function n(r){var i;if(e.detachedContent?i=e.detachedContent:(i=e.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var a=S.derToOid(e.contentInfo.value[0].value),s=S.toDer(i);s.getByte(),S.getBerValueLength(s),s=s.getBytes();for(var o in r)r[o].start().update(s);for(var l=new Date,d=0;d<e.signers.length;++d){var u=e.signers[d];if(u.authenticatedAttributes.length===0){if(a!==D.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{u.authenticatedAttributesAsn1=S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var c=S.create(S.Class.UNIVERSAL,S.Type.SET,!0,[]),f=0;f<u.authenticatedAttributes.length;++f){var g=u.authenticatedAttributes[f];g.type===D.pki.oids.messageDigest?g.value=r[u.digestAlgorithm].digest():g.type===D.pki.oids.signingTime&&(g.value||(g.value=l)),c.value.push(Pa(g)),u.authenticatedAttributesAsn1.value.push(Pa(g))}s=S.toDer(c).getBytes(),u.md.start().update(s)}u.signature=u.key.sign(u.md,"RSASSA-PKCS1-V1_5")}e.signerInfos=n2(e.signers)}};at.createEncryptedData=function(){var e=null;return e={type:D.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:D.pki.oids["aes256-CBC"]},fromAsn1:function(t){ms(e,t,at.asn1.encryptedDataValidator)},decrypt:function(t){t!==void 0&&(e.encryptedContent.key=t),Ou(e)}},e};at.createEnvelopedData=function(){var e=null;return e={type:D.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:D.pki.oids["aes256-CBC"]},fromAsn1:function(t){var n=ms(e,t,at.asn1.envelopedDataValidator);e.recipients=e2(n.recipientInfos.value)},toAsn1:function(){return S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(e.type).getBytes()),S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,S.integerToDer(e.version).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.SET,!0,t2(e.recipients)),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,i2(e.encryptedContent))])])])},findRecipient:function(t){for(var n=t.issuer.attributes,r=0;r<e.recipients.length;++r){var i=e.recipients[r],a=i.issuer;if(i.serialNumber===t.serialNumber&&a.length===n.length){for(var s=!0,o=0;o<n.length;++o)if(a[o].type!==n[o].type||a[o].value!==n[o].value){s=!1;break}if(s)return i}}return null},decrypt:function(t,n){if(e.encryptedContent.key===void 0&&t!==void 0&&n!==void 0)switch(t.encryptedContent.algorithm){case D.pki.oids.rsaEncryption:case D.pki.oids.desCBC:var r=n.decrypt(t.encryptedContent.content);e.encryptedContent.key=D.util.createBuffer(r);break;default:throw new Error("Unsupported asymmetric cipher, OID "+t.encryptedContent.algorithm)}Ou(e)},addRecipient:function(t){e.recipients.push({version:0,issuer:t.issuer.attributes,serialNumber:t.serialNumber,encryptedContent:{algorithm:D.pki.oids.rsaEncryption,key:t.publicKey}})},encrypt:function(t,n){if(e.encryptedContent.content===void 0){n=n||e.encryptedContent.algorithm,t=t||e.encryptedContent.key;var r,i,a;switch(n){case D.pki.oids["aes128-CBC"]:r=16,i=16,a=D.aes.createEncryptionCipher;break;case D.pki.oids["aes192-CBC"]:r=24,i=16,a=D.aes.createEncryptionCipher;break;case D.pki.oids["aes256-CBC"]:r=32,i=16,a=D.aes.createEncryptionCipher;break;case D.pki.oids["des-EDE3-CBC"]:r=24,i=8,a=D.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(t===void 0)t=D.util.createBuffer(D.random.getBytes(r));else if(t.length()!=r)throw new Error("Symmetric key has wrong length; got "+t.length()+" bytes, expected "+r+".");e.encryptedContent.algorithm=n,e.encryptedContent.key=t,e.encryptedContent.parameter=D.util.createBuffer(D.random.getBytes(i));var s=a(t);if(s.start(e.encryptedContent.parameter.copy()),s.update(e.content),!s.finish())throw new Error("Symmetric encryption failed.");e.encryptedContent.content=s.output}for(var o=0;o<e.recipients.length;++o){var l=e.recipients[o];if(l.encryptedContent.content===void 0)switch(l.encryptedContent.algorithm){case D.pki.oids.rsaEncryption:l.encryptedContent.content=l.encryptedContent.key.encrypt(e.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+l.encryptedContent.algorithm)}}}},e};function Jp(e){var t={},n=[];if(!S.validate(e,at.asn1.recipientInfoValidator,t,n)){var r=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw r.errors=n,r}return{version:t.version.charCodeAt(0),issuer:D.pki.RDNAttributesAsArray(t.issuer),serialNumber:D.util.createBuffer(t.serial).toHex(),encryptedContent:{algorithm:S.derToOid(t.encAlgorithm),parameter:t.encParameter?t.encParameter.value:void 0,content:t.encKey}}}function Zp(e){return S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,S.integerToDer(e.version).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[D.pki.distinguishedNameToAsn1({attributes:e.issuer}),S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,D.util.hexToBytes(e.serialNumber))]),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(e.encryptedContent.algorithm).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.NULL,!1,"")]),S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,e.encryptedContent.content)])}function e2(e){for(var t=[],n=0;n<e.length;++n)t.push(Jp(e[n]));return t}function t2(e){for(var t=[],n=0;n<e.length;++n)t.push(Zp(e[n]));return t}function r2(e){var t=S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,S.integerToDer(e.version).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[D.pki.distinguishedNameToAsn1({attributes:e.issuer}),S.create(S.Class.UNIVERSAL,S.Type.INTEGER,!1,D.util.hexToBytes(e.serialNumber))]),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(e.digestAlgorithm).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.NULL,!1,"")])]);if(e.authenticatedAttributesAsn1&&t.value.push(e.authenticatedAttributesAsn1),t.value.push(S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(e.signatureAlgorithm).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.NULL,!1,"")])),t.value.push(S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,e.signature)),e.unauthenticatedAttributes.length>0){for(var n=S.create(S.Class.CONTEXT_SPECIFIC,1,!0,[]),r=0;r<e.unauthenticatedAttributes.length;++r){var i=e.unauthenticatedAttributes[r];n.values.push(Pa(i))}t.value.push(n)}return t}function n2(e){for(var t=[],n=0;n<e.length;++n)t.push(r2(e[n]));return t}function Pa(e){var t;if(e.type===D.pki.oids.contentType)t=S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(e.value).getBytes());else if(e.type===D.pki.oids.messageDigest)t=S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,e.value.bytes());else if(e.type===D.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),r=new Date("2050-01-01T00:00:00Z"),i=e.value;if(typeof i=="string"){var a=Date.parse(i);isNaN(a)?i.length===13?i=S.utcTimeToDate(i):i=S.generalizedTimeToDate(i):i=new Date(a)}i>=n&&i<r?t=S.create(S.Class.UNIVERSAL,S.Type.UTCTIME,!1,S.dateToUtcTime(i)):t=S.create(S.Class.UNIVERSAL,S.Type.GENERALIZEDTIME,!1,S.dateToGeneralizedTime(i))}return S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(e.type).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.SET,!0,[t])])}function i2(e){return[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(D.pki.oids.data).getBytes()),S.create(S.Class.UNIVERSAL,S.Type.SEQUENCE,!0,[S.create(S.Class.UNIVERSAL,S.Type.OID,!1,S.oidToDer(e.algorithm).getBytes()),e.parameter?S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,e.parameter.getBytes()):void 0]),S.create(S.Class.CONTEXT_SPECIFIC,0,!0,[S.create(S.Class.UNIVERSAL,S.Type.OCTETSTRING,!1,e.content.getBytes())])]}function ms(e,t,n){var r={},i=[];if(!S.validate(t,n,r,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var s=S.derToOid(r.contentType);if(s!==D.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(r.encryptedContent){var o="";if(D.util.isArray(r.encryptedContent))for(var l=0;l<r.encryptedContent.length;++l){if(r.encryptedContent[l].type!==S.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");o+=r.encryptedContent[l].value}else o=r.encryptedContent;e.encryptedContent={algorithm:S.derToOid(r.encAlgorithm),parameter:D.util.createBuffer(r.encParameter.value),content:D.util.createBuffer(o)}}if(r.content){var o="";if(D.util.isArray(r.content))for(var l=0;l<r.content.length;++l){if(r.content[l].type!==S.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");o+=r.content[l].value}else o=r.content;e.content=D.util.createBuffer(o)}return e.version=r.version.charCodeAt(0),e.rawCapture=r,r}function Ou(e){if(e.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(e.content===void 0){var t;switch(e.encryptedContent.algorithm){case D.pki.oids["aes128-CBC"]:case D.pki.oids["aes192-CBC"]:case D.pki.oids["aes256-CBC"]:t=D.aes.createDecryptionCipher(e.encryptedContent.key);break;case D.pki.oids.desCBC:case D.pki.oids["des-EDE3-CBC"]:t=D.des.createDecryptionCipher(e.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+e.encryptedContent.algorithm)}if(t.start(e.encryptedContent.parameter),t.update(e.encryptedContent.content),!t.finish())throw new Error("Symmetric decryption failed.");e.content=t.output}}var Be=J,bi=Be.ssh=Be.ssh||{};bi.privateKeyToPutty=function(e,t,n){n=n||"",t=t||"";var r="ssh-rsa",i=t===""?"none":"aes256-cbc",a="PuTTY-User-Key-File-2: "+r+`\r
`;a+="Encryption: "+i+`\r
`,a+="Comment: "+n+`\r
`;var s=Be.util.createBuffer();Pr(s,r),Lt(s,e.e),Lt(s,e.n);var o=Be.util.encode64(s.bytes(),64),l=Math.floor(o.length/66)+1;a+="Public-Lines: "+l+`\r
`,a+=o;var d=Be.util.createBuffer();Lt(d,e.d),Lt(d,e.p),Lt(d,e.q),Lt(d,e.qInv);var u;if(!t)u=Be.util.encode64(d.bytes(),64);else{var c=d.length()+16-1;c-=c%16;var f=Nn(d.bytes());f.truncate(f.length()-c+d.length()),d.putBuffer(f);var g=Be.util.createBuffer();g.putBuffer(Nn("\0\0\0\0",t)),g.putBuffer(Nn("\0\0\0",t));var h=Be.aes.createEncryptionCipher(g.truncate(8),"CBC");h.start(Be.util.createBuffer().fillWithByte(0,16)),h.update(d.copy()),h.finish();var m=h.output;m.truncate(16),u=Be.util.encode64(m.bytes(),64)}l=Math.floor(u.length/66)+1,a+=`\r
Private-Lines: `+l+`\r
`,a+=u;var E=Nn("putty-private-key-file-mac-key",t),b=Be.util.createBuffer();Pr(b,r),Pr(b,i),Pr(b,n),b.putInt32(s.length()),b.putBuffer(s),b.putInt32(d.length()),b.putBuffer(d);var I=Be.hmac.create();return I.start("sha1",E),I.update(b.bytes()),a+=`\r
Private-MAC: `+I.digest().toHex()+`\r
`,a};bi.publicKeyToOpenSSH=function(e,t){var n="ssh-rsa";t=t||"";var r=Be.util.createBuffer();return Pr(r,n),Lt(r,e.e),Lt(r,e.n),n+" "+Be.util.encode64(r.bytes())+" "+t};bi.privateKeyToOpenSSH=function(e,t){return t?Be.pki.encryptRsaPrivateKey(e,t,{legacy:!0,algorithm:"aes128"}):Be.pki.privateKeyToPem(e)};bi.getPublicKeyFingerprint=function(e,t){t=t||{};var n=t.md||Be.md.md5.create(),r="ssh-rsa",i=Be.util.createBuffer();Pr(i,r),Lt(i,e.e),Lt(i,e.n),n.start(),n.update(i.getBytes());var a=n.digest();if(t.encoding==="hex"){var s=a.toHex();return t.delimiter?s.match(/.{2}/g).join(t.delimiter):s}else{if(t.encoding==="binary")return a.getBytes();if(t.encoding)throw new Error('Unknown encoding "'+t.encoding+'".')}return a};function Lt(e,t){var n=t.toString(16);n[0]>="8"&&(n="00"+n);var r=Be.util.hexToBytes(n);e.putInt32(r.length),e.putBytes(r)}function Pr(e,t){e.putInt32(t.length),e.putString(t)}function Nn(){for(var e=Be.md.sha1.create(),t=arguments.length,n=0;n<t;++n)e.update(arguments[n]);return e.digest()}var un=J;const Mt=o0(un);var a2=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})};const s2=Mt.pki.rsa,Du="RSA-OAEP",ku="794241bc819a125a7b78ea313decc0bc";function zi(e){const t=Mt.pki.publicKeyToRSAPublicKeyPem(e.publicKey);return W.Buffer.from(t,"utf-8").toString("hex")}function o2(e){return W.Buffer.from(e,"hex").toString("utf-8")}function Qi(e,t){return a2(this,void 0,void 0,function*(){const r={bits:2048,e:65537,prng:Mt.random.createInstance()};if(!e.disableWorkers){r.workLoad=100,r.workers=-1;const i=yield fetch(`${qt(e)}/static/js/prime.worker.min.js`),a=new Blob([yield i.text()],{type:"application/javascript"});r.workerScript=URL.createObjectURL(a)}return new Promise((i,a)=>s2.generateKeyPair(r,(s,o)=>{s&&a(s),i(o)}))})}function u2(e){const t=Mt.random.getBytesSync(16),n=Mt.cipher.createCipher("AES-CBC",t);n.start({iv:ku}),n.update(Mt.util.createBuffer(e)),n.finish();const r=n.output.toHex();return{key:t,encryptedMessageHex:r}}function l2(e,t){const n=Mt.cipher.createDecipher("AES-CBC",e);return n.start({iv:ku}),n.update(Mt.util.createBuffer(Mt.util.hexToBytes(t))),n.finish(),n.output.toString()}function d2(e,t,n){const r=W.Buffer.from(n,"hex").toString("utf-8"),i=e.decrypt(r,Du);return l2(i,t)}function c2(e,t){const{key:n,encryptedMessageHex:r}=u2(t),i=o2(e),s=Mt.pki.publicKeyFromPem(i).encrypt(n,Du),o=W.Buffer.from(s,"utf-8").toString("hex");return{encryptedMessageHex:r,encryptedKeyHex:o}}var ln={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ECIES=e.Decrypt=e.Encrypt=e.AES128DecryptAndHMAC=e.AES128Decrypt=e.AES128EncryptAndHMAC=e.AES128Encrypt=e.IV_LENGTH=void 0;var t=En();e.IV_LENGTH=16;var n=function(u){for(var c=u.length-1;c>=0;c--)if(u[c]++,u[c]!==0)return u;return u},r=function(u,c){for(var f=32,g=(c+7)*8/(f*8),h=W.Buffer.from("00000001","hex"),m=W.Buffer.from("00","hex"),E=0;E<=g;E++){var b=(0,t.createHash)("sha256");b.update(h),b.update(u),m=W.Buffer.concat([m,b.digest()]),h=n(h)}return m.slice(1,c+1)};function i(u,c,f){var g=(0,t.createCipheriv)("aes-128-ctr",u,c),h=g.update(f),m=g.final();return W.Buffer.concat([c,h,m])}e.AES128Encrypt=i;function a(u,c,f){var g=(0,t.randomBytes)(e.IV_LENGTH),h=i(u,g,f),m=(0,t.createHmac)("sha256",c).update(h).digest();return W.Buffer.concat([h,m])}e.AES128EncryptAndHMAC=a;function s(u,c,f){var g=(0,t.createDecipheriv)("aes-128-ctr",u,c),h=g.update(f),m=g.final();return W.Buffer.concat([h,m])}e.AES128Decrypt=s;function o(u,c,f){var g=f.slice(0,e.IV_LENGTH),h=f.slice(e.IV_LENGTH,f.length-32),m=f.slice(f.length-32,f.length),E=W.Buffer.concat([g,h]),b=(0,t.createHmac)("sha256",c).update(E).digest();if(!m.equals(b))throw new Error("MAC mismatch");return s(u,g,h)}e.AES128DecryptAndHMAC=o;function l(u,c){var f=Is().ec,g=new f("secp256k1"),h=g.keyFromPrivate((0,t.randomBytes)(32)),m=h.getPublic(!1,"hex"),E=W.Buffer.from(m,"hex"),b=h.derive(g.keyFromPublic(W.Buffer.concat([W.Buffer.from([4]),u])).getPublic()),I=r(b.toArrayLike(W.Buffer),32),x=I.slice(0,16),L=(0,t.createHash)("sha256").update(I.slice(16)).digest(),P=a(x,L,c),_=W.Buffer.concat([E,P]);return _}e.Encrypt=l;function d(u,c){var f=c.slice(0,65),g=c.slice(65),h=Is().ec,m=new h("secp256k1"),E=m.keyFromPublic(f).getPublic(),b=m.keyFromPrivate(u).derive(E),I=r(b.toBuffer(),32),x=I.slice(0,16),L=(0,t.createHash)("sha256").update(I.slice(16)).digest();return o(x,L,g)}e.Decrypt=d,e.ECIES={Encrypt:l,Decrypt:d,AES128EncryptAndHMAC:a,AES128DecryptAndHMAC:o}})(ln);class yn{constructor(t,n,r){this.walletId=t,this.keyshare=n,this.address=r,this.backupDecryptionKey=W.Buffer.from(un.random.getBytesSync(32),"binary").toString("hex")}static buildFrom(t){try{const n=JSON.parse(t);return Object.assign(new yn("","",""),n)}catch{const r=new yn("","","");return r.backupDecryptionKey=t.split("|")[0],r}}getPublicEncryptionKey(){return W.Buffer.from(u0.privateToPublic(W.Buffer.from(this.backupDecryptionKey,"hex")))}getPublicEncryptionKeyHex(){return this.getPublicEncryptionKey().toString("hex")}encryptForSelf(t){try{const n=this.getPublicEncryptionKey();return ln.Encrypt(n,W.Buffer.from(t,"ucs2")).toString("base64")}catch{throw Error("Error encrypting backup")}}static encryptWithPublicKey(t,n){try{return ln.Encrypt(t,W.Buffer.from(n,"ucs2")).toString("base64")}catch{throw Error("Error encrypting backup")}}decrypt(t){try{const n=W.Buffer.from(t,"base64");return ln.Decrypt(W.Buffer.from(this.backupDecryptionKey,"hex"),n).toString("ucs2")}catch{throw Error("Error decrypting backup")}}}var f2=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})};function Uu(e,t,n,r,i,a=!1,s){return f2(this,void 0,void 0,function*(){let o,l;const{recoveryPublicKeys:d}=yield e.capsuleClient.getRecoveryPublicKeys(t);if(d!=null&&d.length)o=d.map(u=>{const{id:c,publicKey:f}=u,g=yn.encryptWithPublicKey(W.Buffer.from(f,"hex"),i);return{walletId:n,encryptedShare:g,type:pa.USER,encryptor:hn.RECOVERY,recoveryPublicKeyId:c}});else{l=new yn(n,"","");const{recoveryPublicKeys:u}=yield e.capsuleClient.persistRecoveryPublicKeys(t,[l.getPublicEncryptionKeyHex()]),c=l.encryptForSelf(i);o=[{walletId:n,encryptedShare:c,type:pa.USER,encryptor:hn.RECOVERY,recoveryPublicKeyId:u[0].id}]}return yield e.capsuleClient.uploadUserKeyShares(t,[...r.map(u=>Object.assign({walletId:n},u)),...a?[]:o]),a||(yield e.capsuleClient.distributeCapsuleShare(Object.assign({userId:t,walletId:n,useDKLS:e.useDKLS},s))),l?JSON.stringify(l):""})}var h2=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})};function Kn(e,t,n,r,i=!1,a){return h2(this,void 0,void 0,function*(){const o=(yield e.capsuleClient.getSessionPublicKeys(t)).data.keys.map(l=>{if(!l.publicKey)return;const{encryptedMessageHex:d,encryptedKeyHex:u}=c2(l.sigDerivedPublicKey,r);return{encryptedShare:d,encryptedKey:u,type:pa.USER,encryptor:hn.BIOMETRICS,biometricPublicKey:l.sigDerivedPublicKey}}).filter(Boolean);return yield Uu(e,t,n,o,r,i,a)})}function Fu(e){switch(e){case Fe.DEV:return"http://localhost:8080/";case Fe.SANDBOX:return"https://api.sandbox.usecapsule.com/";case Fe.BETA:return"https://api.beta.usecapsule.com/";case Fe.PROD:return"https://api.usecapsule.com/";default:throw new Error(`unsupported env: ${e}`)}}function hr(e,t){const n=t?"ws":"http";switch(e){case Fe.DEV:return`${n}://localhost:3000`;case Fe.SANDBOX:return`${n}s://mpc-network.sandbox.usecapsule.com`;case Fe.BETA:return`${n}s://mpc-network.beta.usecapsule.com`;case Fe.PROD:return`${n}s://mpc-network.prod.usecapsule.com`;default:throw new Error(`unsupported env: ${e}`)}}function Mu(e,t,n,r,i){return new sf({userManagementHost:Fu(e),apiKey:t,opts:{useFetchAdapter:n},retrieveSessionCookie:r,persistSessionCookie:i})}function Ku(e,t){const n=ol.create({baseURL:e});return t&&(n.defaults.adapter=function(r){return fetch(r.baseURL+r.url,{method:r.method,headers:r.headers,body:r.data,credentials:r.withCredentials?"include":void 0}).then(i=>i.text().then(a=>({data:a,status:i.status,statusText:i.statusText,headers:i.headers,config:r,request:fetch}))).catch(function(i){throw i})}),n}var p2=En(),y2=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})};function v2(e,t){return y2(this,void 0,void 0,function*(){let n,r;for(;;)try{n=p2.randomBytes(32).toString("hex"),r=u0.privateToPublic(W.Buffer.from(n,"hex"));break}catch{continue}const i=W.Buffer.from(r),a=ln.Encrypt(i,W.Buffer.from(e,"ucs2")).toString("base64"),{data:{id:s}}=yield t.tempTrasmissionInit(a);return encodeURIComponent(s+"|"+n)})}const g2={version:4,country_calling_codes:{1:["US","AG","AI","AS","BB","BM","BS","CA","DM","DO","GD","GU","JM","KN","KY","LC","MP","MS","PR","SX","TC","TT","VC","VG","VI"],7:["RU","KZ"],20:["EG"],27:["ZA"],30:["GR"],31:["NL"],32:["BE"],33:["FR"],34:["ES"],36:["HU"],39:["IT","VA"],40:["RO"],41:["CH"],43:["AT"],44:["GB","GG","IM","JE"],45:["DK"],46:["SE"],47:["NO","SJ"],48:["PL"],49:["DE"],51:["PE"],52:["MX"],53:["CU"],54:["AR"],55:["BR"],56:["CL"],57:["CO"],58:["VE"],60:["MY"],61:["AU","CC","CX"],62:["ID"],63:["PH"],64:["NZ"],65:["SG"],66:["TH"],81:["JP"],82:["KR"],84:["VN"],86:["CN"],90:["TR"],91:["IN"],92:["PK"],93:["AF"],94:["LK"],95:["MM"],98:["IR"],211:["SS"],212:["MA","EH"],213:["DZ"],216:["TN"],218:["LY"],220:["GM"],221:["SN"],222:["MR"],223:["ML"],224:["GN"],225:["CI"],226:["BF"],227:["NE"],228:["TG"],229:["BJ"],230:["MU"],231:["LR"],232:["SL"],233:["GH"],234:["NG"],235:["TD"],236:["CF"],237:["CM"],238:["CV"],239:["ST"],240:["GQ"],241:["GA"],242:["CG"],243:["CD"],244:["AO"],245:["GW"],246:["IO"],247:["AC"],248:["SC"],249:["SD"],250:["RW"],251:["ET"],252:["SO"],253:["DJ"],254:["KE"],255:["TZ"],256:["UG"],257:["BI"],258:["MZ"],260:["ZM"],261:["MG"],262:["RE","YT"],263:["ZW"],264:["NA"],265:["MW"],266:["LS"],267:["BW"],268:["SZ"],269:["KM"],290:["SH","TA"],291:["ER"],297:["AW"],298:["FO"],299:["GL"],350:["GI"],351:["PT"],352:["LU"],353:["IE"],354:["IS"],355:["AL"],356:["MT"],357:["CY"],358:["FI","AX"],359:["BG"],370:["LT"],371:["LV"],372:["EE"],373:["MD"],374:["AM"],375:["BY"],376:["AD"],377:["MC"],378:["SM"],380:["UA"],381:["RS"],382:["ME"],383:["XK"],385:["HR"],386:["SI"],387:["BA"],389:["MK"],420:["CZ"],421:["SK"],423:["LI"],500:["FK"],501:["BZ"],502:["GT"],503:["SV"],504:["HN"],505:["NI"],506:["CR"],507:["PA"],508:["PM"],509:["HT"],590:["GP","BL","MF"],591:["BO"],592:["GY"],593:["EC"],594:["GF"],595:["PY"],596:["MQ"],597:["SR"],598:["UY"],599:["CW","BQ"],670:["TL"],672:["NF"],673:["BN"],674:["NR"],675:["PG"],676:["TO"],677:["SB"],678:["VU"],679:["FJ"],680:["PW"],681:["WF"],682:["CK"],683:["NU"],685:["WS"],686:["KI"],687:["NC"],688:["TV"],689:["PF"],690:["TK"],691:["FM"],692:["MH"],850:["KP"],852:["HK"],853:["MO"],855:["KH"],856:["LA"],880:["BD"],886:["TW"],960:["MV"],961:["LB"],962:["JO"],963:["SY"],964:["IQ"],965:["KW"],966:["SA"],967:["YE"],968:["OM"],970:["PS"],971:["AE"],972:["IL"],973:["BH"],974:["QA"],975:["BT"],976:["MN"],977:["NP"],992:["TJ"],993:["TM"],994:["AZ"],995:["GE"],996:["KG"],998:["UZ"]},countries:{AC:["247","00","(?:[01589]\\d|[46])\\d{4}",[5,6]],AD:["376","00","(?:1|6\\d)\\d{7}|[135-9]\\d{5}",[6,8,9],[["(\\d{3})(\\d{3})","$1 $2",["[135-9]"]],["(\\d{4})(\\d{4})","$1 $2",["1"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]]],AE:["971","00","(?:[4-7]\\d|9[0-689])\\d{7}|800\\d{2,9}|[2-4679]\\d{7}",[5,6,7,8,9,10,11,12],[["(\\d{3})(\\d{2,9})","$1 $2",["60|8"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[236]|[479][2-8]"],"0$1"],["(\\d{3})(\\d)(\\d{5})","$1 $2 $3",["[479]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"]],"0"],AF:["93","00","[2-7]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"]],"0"],AG:["1","011","(?:268|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([457]\\d{6})$|1","268$1",0,"268"],AI:["1","011","(?:264|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2457]\\d{6})$|1","264$1",0,"264"],AL:["355","00","(?:700\\d\\d|900)\\d{3}|8\\d{5,7}|(?:[2-5]|6\\d)\\d{7}",[6,7,8,9],[["(\\d{3})(\\d{3,4})","$1 $2",["80|9"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["4[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2358][2-5]|4"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["[23578]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["6"],"0$1"]],"0"],AM:["374","00","(?:[1-489]\\d|55|60|77)\\d{6}",[8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[89]0"],"0 $1"],["(\\d{3})(\\d{5})","$1 $2",["2|3[12]"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["1|47"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[3-9]"],"0$1"]],"0"],AO:["244","00","[29]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[29]"]]]],AR:["54","00","(?:11|[89]\\d\\d)\\d{8}|[2368]\\d{9}",[10,11],[["(\\d{4})(\\d{2})(\\d{4})","$1 $2-$3",["2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9])","2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8]))|2(?:2[24-9]|3[1-59]|47)","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5[56][46]|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|58|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|54(?:4|5[13-7]|6[89])|86[3-6]))|2(?:2[24-9]|3[1-59]|47)|38(?:[58][78]|7[378])|3(?:454|85[56])[46]|3(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["1"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[68]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2-$3",["[23]"],"0$1",1],["(\\d)(\\d{4})(\\d{2})(\\d{4})","$2 15-$3-$4",["9(?:2[2-469]|3[3-578])","9(?:2(?:2[024-9]|3[0-59]|47|6[245]|9[02-8])|3(?:3[28]|4[03-9]|5[2-46-8]|7[1-578]|8[2-9]))","9(?:2(?:[23]02|6(?:[25]|4[6-8])|9(?:[02356]|4[02568]|72|8[23]))|3(?:3[28]|4(?:[04679]|3[5-8]|5[4-68]|8[2379])|5(?:[2467]|3[237]|8[2-5])|7[1-578]|8(?:[2469]|3[2578]|5[4-8]|7[36-8]|8[5-8])))|92(?:2[24-9]|3[1-59]|47)","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3[78]|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8[23])|7[1-578]|8(?:[2469]|3[278]|5(?:[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4[35][56]|58[45]|8(?:[38]5|54|76))[4-6]","9(?:2(?:[23]02|6(?:[25]|4(?:64|[78]))|9(?:[02356]|4(?:[0268]|5[2-6])|72|8[23]))|3(?:3[28]|4(?:[04679]|3(?:5(?:4[0-25689]|[56])|[78])|5(?:4[46]|8)|8[2379])|5(?:[2467]|3[237]|8(?:[23]|4(?:[45]|60)|5(?:4[0-39]|5|64)))|7[1-578]|8(?:[2469]|3[278]|5(?:4(?:4|5[13-7]|6[89])|[56][46]|[78])|7[378]|8(?:6[3-6]|[78]))))|92(?:2[24-9]|3[1-59]|47)|93(?:4(?:36|5[56])|8(?:[38]5|76))[4-6]"],"0$1",0,"$1 $2 $3-$4"],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 15-$3-$4",["91"],"0$1",0,"$1 $2 $3-$4"],["(\\d{3})(\\d{3})(\\d{5})","$1-$2-$3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 15-$3-$4",["9"],"0$1",0,"$1 $2 $3-$4"]],"0",0,"0?(?:(11|2(?:2(?:02?|[13]|2[13-79]|4[1-6]|5[2457]|6[124-8]|7[1-4]|8[13-6]|9[1267])|3(?:02?|1[467]|2[03-6]|3[13-8]|[49][2-6]|5[2-8]|[67])|4(?:7[3-578]|9)|6(?:[0136]|2[24-6]|4[6-8]?|5[15-8])|80|9(?:0[1-3]|[19]|2\\d|3[1-6]|4[02568]?|5[2-4]|6[2-46]|72?|8[23]?))|3(?:3(?:2[79]|6|8[2578])|4(?:0[0-24-9]|[12]|3[5-8]?|4[24-7]|5[4-68]?|6[02-9]|7[126]|8[2379]?|9[1-36-8])|5(?:1|2[1245]|3[237]?|4[1-46-9]|6[2-4]|7[1-6]|8[2-5]?)|6[24]|7(?:[069]|1[1568]|2[15]|3[145]|4[13]|5[14-8]|7[2-57]|8[126])|8(?:[01]|2[15-7]|3[2578]?|4[13-6]|5[4-8]?|6[1-357-9]|7[36-8]?|8[5-8]?|9[124])))15)?","9$1"],AS:["1","011","(?:[58]\\d\\d|684|900)\\d{7}",[10],0,"1",0,"([267]\\d{6})$|1","684$1",0,"684"],AT:["43","00","1\\d{3,12}|2\\d{6,12}|43(?:(?:0\\d|5[02-9])\\d{3,9}|2\\d{4,5}|[3467]\\d{4}|8\\d{4,6}|9\\d{4,7})|5\\d{4,12}|8\\d{7,12}|9\\d{8,12}|(?:[367]\\d|4[0-24-9])\\d{4,11}",[4,5,6,7,8,9,10,11,12,13],[["(\\d)(\\d{3,12})","$1 $2",["1(?:11|[2-9])"],"0$1"],["(\\d{3})(\\d{2})","$1 $2",["517"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["5[079]"],"0$1"],["(\\d{3})(\\d{3,10})","$1 $2",["(?:31|4)6|51|6(?:5[0-3579]|[6-9])|7(?:20|32|8)|[89]"],"0$1"],["(\\d{4})(\\d{3,9})","$1 $2",["[2-467]|5[2-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["5"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,7})","$1 $2 $3",["5"],"0$1"]],"0"],AU:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{7}(?:\\d(?:\\d{2})?)?|8[0-24-9]\\d{7})|[2-478]\\d{8}|1\\d{4,7}",[5,6,7,8,9,10,12],[["(\\d{2})(\\d{3,4})","$1 $2",["16"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,4})","$1 $2 $3",["16"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["14|4"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[2378]"],"(0$1)"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:30|[89])"]]],"0",0,"(183[12])|0",0,0,0,[["(?:(?:(?:2(?:[0-26-9]\\d|3[0-8]|4[02-9]|5[0135-9])|7(?:[013-57-9]\\d|2[0-8]))\\d|3(?:(?:[0-3589]\\d|6[1-9]|7[0-35-9])\\d|4(?:[0-578]\\d|90)))\\d\\d|8(?:51(?:0(?:0[03-9]|[12479]\\d|3[2-9]|5[0-8]|6[1-9]|8[0-7])|1(?:[0235689]\\d|1[0-69]|4[0-589]|7[0-47-9])|2(?:0[0-79]|[18][13579]|2[14-9]|3[0-46-9]|[4-6]\\d|7[89]|9[0-4])|3\\d\\d)|(?:6[0-8]|[78]\\d)\\d{3}|9(?:[02-9]\\d{3}|1(?:(?:[0-58]\\d|6[0135-9])\\d|7(?:0[0-24-9]|[1-9]\\d)|9(?:[0-46-9]\\d|5[0-79])))))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,["163\\d{2,6}",[5,6,7,8,9]],["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],AW:["297","00","(?:[25-79]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[25-9]"]]]],AX:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","2\\d{4,9}|35\\d{4,5}|(?:60\\d\\d|800)\\d{4,6}|7\\d{5,11}|(?:[14]\\d|3[0-46-9]|50)\\d{4,8}",[5,6,7,8,9,10,11,12],0,"0",0,0,0,0,"18",0,"00"],AZ:["994","00","365\\d{6}|(?:[124579]\\d|60|88)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[28]|2|365|46","1[28]|2|365[45]|46","1[28]|2|365(?:4|5[02])|46"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[13-9]"],"0$1"]],"0"],BA:["387","00","6\\d{8}|(?:[35689]\\d|49|70)\\d{6}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["6[1-3]|[7-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2-$3",["[3-5]|6[56]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["6"],"0$1"]],"0"],BB:["1","011","(?:246|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","246$1",0,"246"],BD:["880","00","[1-469]\\d{9}|8[0-79]\\d{7,8}|[2-79]\\d{8}|[2-9]\\d{7}|[3-9]\\d{6}|[57-9]\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{4,6})","$1-$2",["31[5-8]|[459]1"],"0$1"],["(\\d{3})(\\d{3,7})","$1-$2",["3(?:[67]|8[013-9])|4(?:6[168]|7|[89][18])|5(?:6[128]|9)|6(?:[15]|28|4[14])|7[2-589]|8(?:0[014-9]|[12])|9[358]|(?:3[2-5]|4[235]|5[2-578]|6[0389]|76|8[3-7]|9[24])1|(?:44|66)[01346-9]"],"0$1"],["(\\d{4})(\\d{3,6})","$1-$2",["[13-9]|22"],"0$1"],["(\\d)(\\d{7,8})","$1-$2",["2"],"0$1"]],"0"],BE:["32","00","4\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:80|9)0"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[239]|4[23]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[15-8]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4"],"0$1"]],"0"],BF:["226","00","[025-7]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[025-7]"]]]],BG:["359","00","00800\\d{7}|[2-7]\\d{6,7}|[89]\\d{6,8}|2\\d{5}",[6,7,8,9,12],[["(\\d)(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["43[1-6]|70[1-9]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[356]|4[124-7]|7[1-9]|8[1-6]|9[1-7]"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["(?:70|8)0"],"0$1"],["(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3",["43[1-7]|7"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[48]|9[08]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"]],"0"],BH:["973","00","[136-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[13679]|8[02-4679]"]]]],BI:["257","00","(?:[267]\\d|31)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2367]"]]]],BJ:["229","00","[24-689]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-689]"]]]],BL:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:2[7-9]|3[3-7]|5[12]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],BM:["1","011","(?:441|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","441$1",0,"441"],BN:["673","00","[2-578]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-578]"]]]],BO:["591","00(?:1\\d)?","(?:[2-467]\\d\\d|8001)\\d{5}",[8,9],[["(\\d)(\\d{7})","$1 $2",["[23]|4[46]"]],["(\\d{8})","$1",["[67]"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["8"]]],"0",0,"0(1\\d)?"],BQ:["599","00","(?:[34]1|7\\d)\\d{5}",[7],0,0,0,0,0,0,"[347]"],BR:["55","00(?:1[245]|2[1-35]|31|4[13]|[56]5|99)","(?:[1-46-9]\\d\\d|5(?:[0-46-9]\\d|5[0-46-9]))\\d{8}|[1-9]\\d{9}|[3589]\\d{8}|[34]\\d{7}",[8,9,10,11],[["(\\d{4})(\\d{4})","$1-$2",["300|4(?:0[02]|37)","4(?:02|37)0|[34]00"]],["(\\d{3})(\\d{2,3})(\\d{4})","$1 $2 $3",["(?:[358]|90)0"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2-$3",["(?:[14689][1-9]|2[12478]|3[1-578]|5[13-5]|7[13-579])[2-57]"],"($1)"],["(\\d{2})(\\d{5})(\\d{4})","$1 $2-$3",["[16][1-9]|[2-57-9]"],"($1)"]],"0",0,"(?:0|90)(?:(1[245]|2[1-35]|31|4[13]|[56]5|99)(\\d{10,11}))?","$2"],BS:["1","011","(?:242|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([3-8]\\d{6})$|1","242$1",0,"242"],BT:["975","00","[17]\\d{7}|[2-8]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[2-68]|7[246]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[67]|7"]]]],BW:["267","00","(?:0800|(?:[37]|800)\\d)\\d{6}|(?:[2-6]\\d|90)\\d{5}",[7,8,10],[["(\\d{2})(\\d{5})","$1 $2",["90"]],["(\\d{3})(\\d{4})","$1 $2",["[24-6]|3[15-9]"]],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37]"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["8"]]]],BY:["375","810","(?:[12]\\d|33|44|902)\\d{7}|8(?:0[0-79]\\d{5,7}|[1-7]\\d{9})|8(?:1[0-489]|[5-79]\\d)\\d{7}|8[1-79]\\d{6,7}|8[0-79]\\d{5}|8\\d{5}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3})","$1 $2",["800"],"8 $1"],["(\\d{3})(\\d{2})(\\d{2,4})","$1 $2 $3",["800"],"8 $1"],["(\\d{4})(\\d{2})(\\d{3})","$1 $2-$3",["1(?:5[169]|6[3-5]|7[179])|2(?:1[35]|2[34]|3[3-5])","1(?:5[169]|6(?:3[1-3]|4|5[125])|7(?:1[3-9]|7[0-24-6]|9[2-7]))|2(?:1[35]|2[34]|3[3-5])"],"8 0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["1(?:[56]|7[467])|2[1-3]"],"8 0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-4]"],"8 0$1"],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["[89]"],"8 $1"]],"8",0,"0|80?",0,0,0,0,"8~10"],BZ:["501","00","(?:0800\\d|[2-8])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1-$2",["[2-8]"]],["(\\d)(\\d{3})(\\d{4})(\\d{3})","$1-$2-$3-$4",["0"]]]],CA:["1","011","(?:[2-8]\\d|90)\\d{8}|3\\d{6}",[7,10],0,"1",0,0,0,0,0,[["(?:2(?:04|[23]6|[48]9|50|63)|3(?:06|43|54|6[578]|82)|4(?:03|1[68]|[26]8|3[178]|50|74)|5(?:06|1[49]|48|79|8[147])|6(?:04|[18]3|39|47|72)|7(?:0[59]|42|53|78|8[02])|8(?:[06]7|19|25|7[39])|90[25])[2-9]\\d{6}",[10]],["",[10]],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}",[10]],["900[2-9]\\d{6}",[10]],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|(?:5(?:00|2[125-9]|33|44|66|77|88)|622)[2-9]\\d{6}",[10]],0,["310\\d{4}",[7]],0,["600[2-9]\\d{6}",[10]]]],CC:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:02|31|60|89)|1(?:18|76)|223)|91(?:0(?:1[0-2]|29)|1(?:[28]2|50|79)|2(?:10|64)|3(?:[06]8|22)|4[29]8|62\\d|70[23]|959))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CD:["243","00","[189]\\d{8}|[1-68]\\d{6}",[7,9],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[1-6]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]"],"0$1"]],"0"],CF:["236","00","(?:[27]\\d{3}|8776)\\d{4}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[278]"]]]],CG:["242","00","222\\d{6}|(?:0\\d|80)\\d{7}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[02]"]]]],CH:["41","00","8\\d{11}|[2-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8[047]|90"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]|81"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["8"],"0$1"]],"0"],CI:["225","00","[02]\\d{9}",[10],[["(\\d{2})(\\d{2})(\\d)(\\d{5})","$1 $2 $3 $4",["2"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3 $4",["0"]]]],CK:["682","00","[2-578]\\d{4}",[5],[["(\\d{2})(\\d{3})","$1 $2",["[2-578]"]]]],CL:["56","(?:0|1(?:1[0-69]|2[02-5]|5[13-58]|69|7[0167]|8[018]))0","12300\\d{6}|6\\d{9,10}|[2-9]\\d{8}",[9,10,11],[["(\\d{5})(\\d{4})","$1 $2",["219","2196"],"($1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["44"]],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2[1-36]"],"($1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["9[2-9]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["3[2-5]|[47]|5[1-3578]|6[13-57]|8(?:0[1-9]|[1-9])"],"($1)"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["60|8"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{3})(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3 $4",["60"]]]],CM:["237","00","[26]\\d{8}|88\\d{6,7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["88"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[26]|88"]]]],CN:["86","00|1(?:[12]\\d|79)\\d\\d00","1[127]\\d{8,9}|2\\d{9}(?:\\d{2})?|[12]\\d{6,7}|86\\d{6}|(?:1[03-689]\\d|6)\\d{7,9}|(?:[3-579]\\d|8[0-57-9])\\d{6,9}",[7,8,9,10,11,12],[["(\\d{2})(\\d{5,6})","$1 $2",["(?:10|2[0-57-9])[19]","(?:10|2[0-57-9])(?:10|9[56])","10(?:10|9[56])|2[0-57-9](?:100|9[56])"],"0$1"],["(\\d{3})(\\d{5,6})","$1 $2",["3(?:[157]|35|49|9[1-68])|4(?:[17]|2[179]|6[47-9]|8[23])|5(?:[1357]|2[37]|4[36]|6[1-46]|80)|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]|4[13]|5[1-5])|(?:4[35]|59|85)[1-9]","(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[1-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))[19]","85[23](?:10|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:10|9[56])","85[23](?:100|95)|(?:3(?:[157]\\d|35|49|9[1-68])|4(?:[17]\\d|2[179]|[35][1-9]|6[47-9]|8[23])|5(?:[1357]\\d|2[37]|4[36]|6[1-46]|80|9[1-9])|6(?:3[1-5]|6[0238]|9[12])|7(?:01|[1579]\\d|2[248]|3[014-9]|4[3-6]|6[023689])|8(?:1[236-8]|2[5-7]|[37]\\d|5[14-9]|8[36-8]|9[1-8])|9(?:0[1-3689]|1[1-79]|[379]\\d|4[13]|5[1-5]))(?:100|9[56])"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["(?:4|80)0"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|2(?:[02-57-9]|1[1-9])","10|2(?:[02-57-9]|1[1-9])","10[0-79]|2(?:[02-57-9]|1[1-79])|(?:10|21)8(?:0[1-9]|[1-9])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["3(?:[3-59]|7[02-68])|4(?:[26-8]|3[3-9]|5[2-9])|5(?:3[03-9]|[468]|7[028]|9[2-46-9])|6|7(?:[0-247]|3[04-9]|5[0-4689]|6[2368])|8(?:[1-358]|9[1-7])|9(?:[013479]|5[1-5])|(?:[34]1|55|79|87)[02-9]"],"0$1",1],["(\\d{3})(\\d{7,8})","$1 $2",["9"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["80"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[3-578]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["1[3-9]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3 $4",["[12]"],"0$1",1]],"0",0,"(1(?:[12]\\d|79)\\d\\d)|0",0,0,0,0,"00"],CO:["57","00(?:4(?:[14]4|56)|[579])","(?:60\\d\\d|9101)\\d{6}|(?:1\\d|3)\\d{9}",[10,11],[["(\\d{3})(\\d{7})","$1 $2",["6"],"($1)"],["(\\d{3})(\\d{7})","$1 $2",["3[0-357]|91"]],["(\\d)(\\d{3})(\\d{7})","$1-$2-$3",["1"],"0$1",0,"$1 $2 $3"]],"0",0,"0([3579]|4(?:[14]4|56))?"],CR:["506","00","(?:8\\d|90)\\d{8}|(?:[24-8]\\d{3}|3005)\\d{4}",[8,10],[["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[3-9]"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["[89]"]]],0,0,"(19(?:0[0-2468]|1[09]|20|66|77|99))"],CU:["53","119","(?:[2-7]|8\\d\\d)\\d{7}|[2-47]\\d{6}|[34]\\d{5}",[6,7,8,10],[["(\\d{2})(\\d{4,6})","$1 $2",["2[1-4]|[34]"],"(0$1)"],["(\\d)(\\d{6,7})","$1 $2",["7"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["[56]"],"0$1"],["(\\d{3})(\\d{7})","$1 $2",["8"],"0$1"]],"0"],CV:["238","0","(?:[2-59]\\d\\d|800)\\d{4}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2-589]"]]]],CW:["599","00","(?:[34]1|60|(?:7|9\\d)\\d)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[3467]"]],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["9[4-8]"]]],0,0,0,0,0,"[69]"],CX:["61","001[14-689]|14(?:1[14]|34|4[17]|[56]6|7[47]|88)0011","1(?:[0-79]\\d{8}(?:\\d{2})?|8[0-24-9]\\d{7})|[148]\\d{8}|1\\d{5,7}",[6,7,8,9,10,12],0,"0",0,"([59]\\d{7})$|0","8$1",0,0,[["8(?:51(?:0(?:01|30|59|88)|1(?:17|46|75)|2(?:22|35))|91(?:00[6-9]|1(?:[28]1|49|78)|2(?:09|63)|3(?:12|26|75)|4(?:56|97)|64\\d|7(?:0[01]|1[0-2])|958))\\d{3}",[9]],["4(?:79[01]|83[0-389]|94[0-4])\\d{5}|4(?:[0-36]\\d|4[047-9]|5[0-25-9]|7[02-8]|8[0-24-9]|9[0-37-9])\\d{6}",[9]],["180(?:0\\d{3}|2)\\d{3}",[7,10]],["190[0-26]\\d{6}",[10]],0,0,0,0,["14(?:5(?:1[0458]|[23][458])|71\\d)\\d{4}",[9]],["13(?:00\\d{6}(?:\\d{2})?|45[0-4]\\d{3})|13\\d{4}",[6,8,10,12]]],"0011"],CY:["357","00","(?:[279]\\d|[58]0)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[257-9]"]]]],CZ:["420","00","(?:[2-578]\\d|60)\\d{7}|9\\d{8,11}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]|9[015-7]"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{2})","$1 $2 $3 $4",["96"]],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]]],DE:["49","00","[2579]\\d{5,14}|49(?:[34]0|69|8\\d)\\d\\d?|49(?:37|49|60|7[089]|9\\d)\\d{1,3}|49(?:2[024-9]|3[2-689]|7[1-7])\\d{1,8}|(?:1|[368]\\d|4[0-8])\\d{3,13}|49(?:[015]\\d|2[13]|31|[46][1-8])\\d{1,9}",[4,5,6,7,8,9,10,11,12,13,14,15],[["(\\d{2})(\\d{3,13})","$1 $2",["3[02]|40|[68]9"],"0$1"],["(\\d{3})(\\d{3,12})","$1 $2",["2(?:0[1-389]|1[124]|2[18]|3[14])|3(?:[35-9][15]|4[015])|906|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1","2(?:0[1-389]|12[0-8])|3(?:[35-9][15]|4[015])|906|2(?:[13][14]|2[18])|(?:2[4-9]|4[2-9]|[579][1-9]|[68][1-8])1"],"0$1"],["(\\d{4})(\\d{2,11})","$1 $2",["[24-6]|3(?:[3569][02-46-9]|4[2-4679]|7[2-467]|8[2-46-8])|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]","[24-6]|3(?:3(?:0[1-467]|2[127-9]|3[124578]|7[1257-9]|8[1256]|9[145])|4(?:2[135]|4[13578]|9[1346])|5(?:0[14]|2[1-3589]|6[1-4]|7[13468]|8[13568])|6(?:2[1-489]|3[124-6]|6[13]|7[12579]|8[1-356]|9[135])|7(?:2[1-7]|4[145]|6[1-5]|7[1-4])|8(?:21|3[1468]|6|7[1467]|8[136])|9(?:0[12479]|2[1358]|4[134679]|6[1-9]|7[136]|8[147]|9[1468]))|70[2-8]|8(?:0[2-9]|[1-8])|90[7-9]|[79][1-9]|3[68]4[1347]|3(?:47|60)[1356]|3(?:3[46]|46|5[49])[1246]|3[4579]3[1357]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["138"],"0$1"],["(\\d{5})(\\d{2,10})","$1 $2",["3"],"0$1"],["(\\d{3})(\\d{5,11})","$1 $2",["181"],"0$1"],["(\\d{3})(\\d)(\\d{4,10})","$1 $2 $3",["1(?:3|80)|9"],"0$1"],["(\\d{3})(\\d{7,8})","$1 $2",["1[67]"],"0$1"],["(\\d{3})(\\d{7,12})","$1 $2",["8"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["185","1850","18500"],"0$1"],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["18[68]"],"0$1"],["(\\d{4})(\\d{7})","$1 $2",["15[1279]"],"0$1"],["(\\d{5})(\\d{6})","$1 $2",["15[03568]","15(?:[0568]|31)"],"0$1"],["(\\d{3})(\\d{8})","$1 $2",["18"],"0$1"],["(\\d{3})(\\d{2})(\\d{7,8})","$1 $2 $3",["1(?:6[023]|7)"],"0$1"],["(\\d{4})(\\d{2})(\\d{7})","$1 $2 $3",["15[279]"],"0$1"],["(\\d{3})(\\d{2})(\\d{8})","$1 $2 $3",["15"],"0$1"]],"0"],DJ:["253","00","(?:2\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[27]"]]]],DK:["45","00","[2-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-9]"]]]],DM:["1","011","(?:[58]\\d\\d|767|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","767$1",0,"767"],DO:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,0,0,0,"8001|8[024]9"],DZ:["213","00","(?:[1-4]|[5-79]\\d|80)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["9"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-8]"],"0$1"]],"0"],EC:["593","00","1\\d{9,10}|(?:[2-7]|9\\d)\\d{7}",[8,9,10,11],[["(\\d)(\\d{3})(\\d{4})","$1 $2-$3",["[2-7]"],"(0$1)",0,"$1-$2-$3"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{3})(\\d{3,4})","$1 $2 $3",["1"]]],"0"],EE:["372","00","8\\d{9}|[4578]\\d{7}|(?:[3-8]\\d|90)\\d{5}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[369]|4[3-8]|5(?:[0-2]|5[0-478]|6[45])|7[1-9]|88","[369]|4[3-8]|5(?:[02]|1(?:[0-8]|95)|5[0-478]|6(?:4[0-4]|5[1-589]))|7[1-9]|88"]],["(\\d{4})(\\d{3,4})","$1 $2",["[45]|8(?:00|[1-49])","[45]|8(?:00[1-9]|[1-49])"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],EG:["20","00","[189]\\d{8,9}|[24-6]\\d{8}|[135]\\d{7}",[8,9,10],[["(\\d)(\\d{7,8})","$1 $2",["[23]"],"0$1"],["(\\d{2})(\\d{6,7})","$1 $2",["1[35]|[4-6]|8[2468]|9[235-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{8})","$1 $2",["1"],"0$1"]],"0"],EH:["212","00","[5-8]\\d{8}",[9],0,"0",0,0,0,0,"528[89]"],ER:["291","00","[178]\\d{6}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[178]"],"0$1"]],"0"],ES:["34","00","[5-9]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[89]00"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-9]"]]]],ET:["251","00","(?:11|[2-579]\\d)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-579]"],"0$1"]],"0"],FI:["358","00|99(?:[01469]|5(?:[14]1|3[23]|5[59]|77|88|9[09]))","[1-35689]\\d{4}|7\\d{10,11}|(?:[124-7]\\d|3[0-46-9])\\d{8}|[1-9]\\d{5,8}",[5,6,7,8,9,10,11,12],[["(\\d{5})","$1",["20[2-59]"],"0$1"],["(\\d{3})(\\d{3,7})","$1 $2",["(?:[1-3]0|[68])0|70[07-9]"],"0$1"],["(\\d{2})(\\d{4,8})","$1 $2",["[14]|2[09]|50|7[135]"],"0$1"],["(\\d{2})(\\d{6,10})","$1 $2",["7"],"0$1"],["(\\d)(\\d{4,9})","$1 $2",["(?:1[3-79]|[2568])[1-8]|3(?:0[1-9]|[1-9])|9"],"0$1"]],"0",0,0,0,0,"1[03-79]|[2-9]",0,"00"],FJ:["679","0(?:0|52)","45\\d{5}|(?:0800\\d|[235-9])\\d{6}",[7,11],[["(\\d{3})(\\d{4})","$1 $2",["[235-9]|45"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]]],0,0,0,0,0,0,0,"00"],FK:["500","00","[2-7]\\d{4}",[5]],FM:["691","00","(?:[39]\\d\\d|820)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[389]"]]]],FO:["298","00","[2-9]\\d{5}",[6],[["(\\d{6})","$1",["[2-9]"]]],0,0,"(10(?:01|[12]0|88))"],FR:["33","00","[1-9]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0 $1"],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["[1-79]"],"0$1"]],"0"],GA:["241","00","(?:[067]\\d|11)\\d{6}|[2-7]\\d{6}",[7,8],[["(\\d)(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-7]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["11|[67]"],"0$1"]],0,0,"0(11\\d{6}|60\\d{6}|61\\d{6}|6[256]\\d{6}|7[467]\\d{6})","$1"],GB:["44","00","[1-357-9]\\d{9}|[18]\\d{8}|8\\d{6}",[7,9,10],[["(\\d{3})(\\d{4})","$1 $2",["800","8001","80011","800111","8001111"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["845","8454","84546","845464"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["800"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["1(?:38|5[23]|69|76|94)","1(?:(?:38|69)7|5(?:24|39)|768|946)","1(?:3873|5(?:242|39[4-6])|(?:697|768)[347]|9467)"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["1(?:[2-69][02-9]|[78])"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[25]|7(?:0|6[02-9])","[25]|7(?:0|6(?:[03-9]|2[356]))"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[1389]"],"0$1"]],"0",0,0,0,0,0,[["(?:1(?:1(?:3(?:[0-58]\\d\\d|73[0235])|4(?:(?:[0-5]\\d|70)\\d|69[7-9])|(?:(?:5[0-26-9]|[78][0-49])\\d|6(?:[0-4]\\d|50))\\d)|(?:2(?:(?:0[024-9]|2[3-9]|3[3-79]|4[1-689]|[58][02-9]|6[0-47-9]|7[013-9]|9\\d)\\d|1(?:[0-7]\\d|8[0-2]))|(?:3(?:0\\d|1[0-8]|[25][02-9]|3[02-579]|[468][0-46-9]|7[1-35-79]|9[2-578])|4(?:0[03-9]|[137]\\d|[28][02-57-9]|4[02-69]|5[0-8]|[69][0-79])|5(?:0[1-35-9]|[16]\\d|2[024-9]|3[015689]|4[02-9]|5[03-9]|7[0-35-9]|8[0-468]|9[0-57-9])|6(?:0[034689]|1\\d|2[0-35689]|[38][013-9]|4[1-467]|5[0-69]|6[13-9]|7[0-8]|9[0-24578])|7(?:0[0246-9]|2\\d|3[0236-8]|4[03-9]|5[0-46-9]|6[013-9]|7[0-35-9]|8[024-9]|9[02-9])|8(?:0[35-9]|2[1-57-9]|3[02-578]|4[0-578]|5[124-9]|6[2-69]|7\\d|8[02-9]|9[02569])|9(?:0[02-589]|[18]\\d|2[02-689]|3[1-57-9]|4[2-9]|5[0-579]|6[2-47-9]|7[0-24578]|9[2-57]))\\d)\\d)|2(?:0[013478]|3[0189]|4[017]|8[0-46-9]|9[0-2])\\d{3})\\d{4}|1(?:2(?:0(?:46[1-4]|87[2-9])|545[1-79]|76(?:2\\d|3[1-8]|6[1-6])|9(?:7(?:2[0-4]|3[2-5])|8(?:2[2-8]|7[0-47-9]|8[3-5])))|3(?:6(?:38[2-5]|47[23])|8(?:47[04-9]|64[0157-9]))|4(?:044[1-7]|20(?:2[23]|8\\d)|6(?:0(?:30|5[2-57]|6[1-8]|7[2-8])|140)|8(?:052|87[1-3]))|5(?:2(?:4(?:3[2-79]|6\\d)|76\\d)|6(?:26[06-9]|686))|6(?:06(?:4\\d|7[4-79])|295[5-7]|35[34]\\d|47(?:24|61)|59(?:5[08]|6[67]|74)|9(?:55[0-4]|77[23]))|7(?:26(?:6[13-9]|7[0-7])|(?:442|688)\\d|50(?:2[0-3]|[3-68]2|76))|8(?:27[56]\\d|37(?:5[2-5]|8[239])|843[2-58])|9(?:0(?:0(?:6[1-8]|85)|52\\d)|3583|4(?:66[1-8]|9(?:2[01]|81))|63(?:23|3[1-4])|9561))\\d{3}",[9,10]],["7(?:457[0-57-9]|700[01]|911[028])\\d{5}|7(?:[1-3]\\d\\d|4(?:[0-46-9]\\d|5[0-689])|5(?:0[0-8]|[13-9]\\d|2[0-35-9])|7(?:0[1-9]|[1-7]\\d|8[02-9]|9[0-689])|8(?:[014-9]\\d|[23][0-8])|9(?:[024-9]\\d|1[02-9]|3[0-689]))\\d{6}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[2-49]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]],0," x"],GD:["1","011","(?:473|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","473$1",0,"473"],GE:["995","00","(?:[3-57]\\d\\d|800)\\d{6}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["32"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[57]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[348]"],"0$1"]],"0"],GF:["594","00","[56]94\\d{6}|(?:80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[56]|9[47]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[89]"],"0$1"]],"0"],GG:["44","00","(?:1481|[357-9]\\d{3})\\d{6}|8\\d{6}(?:\\d{2})?",[7,9,10],0,"0",0,"([25-9]\\d{5})$|0","1481$1",0,0,[["1481[25-9]\\d{5}",[10]],["7(?:(?:781|839)\\d|911[17])\\d{5}",[10]],["80[08]\\d{7}|800\\d{6}|8001111"],["(?:8(?:4[2-5]|7[0-3])|9(?:[01]\\d|8[0-3]))\\d{7}|845464\\d",[7,10]],["70\\d{8}",[10]],0,["(?:3[0347]|55)\\d{8}",[10]],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}",[10]],["56\\d{8}",[10]]]],GH:["233","00","(?:[235]\\d{3}|800)\\d{5}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[235]"],"0$1"]],"0"],GI:["350","00","(?:[25]\\d|60)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["2"]]]],GL:["299","00","(?:19|[2-689]\\d|70)\\d{4}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["19|[2-9]"]]]],GM:["220","00","[2-9]\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],GN:["224","00","722\\d{6}|(?:3|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["3"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[67]"]]]],GP:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0",0,0,0,0,0,[["590(?:0[1-68]|[14][0-24-9]|2[0-68]|3[1-9]|5[3-579]|[68][0-689]|7[08]|9\\d)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],GQ:["240","00","222\\d{6}|(?:3\\d|55|[89]0)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235]"]],["(\\d{3})(\\d{6})","$1 $2",["[89]"]]]],GR:["30","00","5005000\\d{3}|8\\d{9,11}|(?:[269]\\d|70)\\d{8}",[10,11,12],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["21|7"]],["(\\d{4})(\\d{6})","$1 $2",["2(?:2|3[2-57-9]|4[2-469]|5[2-59]|6[2-9]|7[2-69]|8[2-49])|5"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2689]"]],["(\\d{3})(\\d{3,4})(\\d{5})","$1 $2 $3",["8"]]]],GT:["502","00","80\\d{6}|(?:1\\d{3}|[2-7])\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1 $2",["[2-8]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],GU:["1","011","(?:[58]\\d\\d|671|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","671$1",0,"671"],GW:["245","00","[49]\\d{8}|4\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["40"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"]]]],GY:["592","001","(?:[2-8]\\d{3}|9008)\\d{3}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],HK:["852","00(?:30|5[09]|[126-9]?)","8[0-46-9]\\d{6,7}|9\\d{4,7}|(?:[2-7]|9\\d{3})\\d{7}",[5,6,7,8,9,11],[["(\\d{3})(\\d{2,5})","$1 $2",["900","9003"]],["(\\d{4})(\\d{4})","$1 $2",["[2-7]|8[1-4]|9(?:0[1-9]|[1-8])"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{3})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["9"]]],0,0,0,0,0,0,0,"00"],HN:["504","00","8\\d{10}|[237-9]\\d{7}",[8,11],[["(\\d{4})(\\d{4})","$1-$2",["[237-9]"]]]],HR:["385","00","(?:[24-69]\\d|3[0-79])\\d{7}|80\\d{5,7}|[1-79]\\d{7}|6\\d{5,6}",[6,7,8,9],[["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["6[01]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{4})(\\d{3})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6|7[245]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-57]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"]],"0"],HT:["509","00","(?:[2-489]\\d|55)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[2-589]"]]]],HU:["36","00","[235-7]\\d{8}|[1-9]\\d{7}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27][2-9]|3[2-7]|4[24-9]|5[2-79]|6|8[2-57-9]|9[2-69]"],"(06 $1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"06 $1"]],"06"],ID:["62","00[89]","(?:(?:00[1-9]|8\\d)\\d{4}|[1-36])\\d{6}|00\\d{10}|[1-9]\\d{8,10}|[2-9]\\d{7}",[7,8,9,10,11,12,13],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["15"]],["(\\d{2})(\\d{5,9})","$1 $2",["2[124]|[36]1"],"(0$1)"],["(\\d{3})(\\d{5,7})","$1 $2",["800"],"0$1"],["(\\d{3})(\\d{5,8})","$1 $2",["[2-79]"],"(0$1)"],["(\\d{3})(\\d{3,4})(\\d{3})","$1-$2-$3",["8[1-35-9]"],"0$1"],["(\\d{3})(\\d{6,8})","$1 $2",["1"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["804"],"0$1"],["(\\d{3})(\\d)(\\d{3})(\\d{3})","$1 $2 $3 $4",["80"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1-$2-$3",["8"],"0$1"]],"0"],IE:["353","00","(?:1\\d|[2569])\\d{6,8}|4\\d{6,9}|7\\d{8}|8\\d{8,9}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["2[24-9]|47|58|6[237-9]|9[35-9]"],"(0$1)"],["(\\d{3})(\\d{5})","$1 $2",["[45]0"],"(0$1)"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["1"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2569]|4[1-69]|7[14]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["70"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["81"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[78]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["4"],"(0$1)"],["(\\d{2})(\\d)(\\d{3})(\\d{4})","$1 $2 $3 $4",["8"],"0$1"]],"0"],IL:["972","0(?:0|1[2-9])","1\\d{6}(?:\\d{3,5})?|[57]\\d{8}|[1-489]\\d{7}",[7,8,9,10,11,12],[["(\\d{4})(\\d{3})","$1-$2",["125"]],["(\\d{4})(\\d{2})(\\d{2})","$1-$2-$3",["121"]],["(\\d)(\\d{3})(\\d{4})","$1-$2-$3",["[2-489]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1-$2-$3",["12"]],["(\\d{4})(\\d{6})","$1-$2",["159"]],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3-$4",["1[7-9]"]],["(\\d{3})(\\d{1,2})(\\d{3})(\\d{4})","$1-$2 $3-$4",["15"]]],"0"],IM:["44","00","1624\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([25-8]\\d{5})$|0","1624$1",0,"74576|(?:16|7[56])24"],IN:["91","00","(?:000800|[2-9]\\d\\d)\\d{7}|1\\d{7,12}",[8,9,10,11,12,13],[["(\\d{8})","$1",["5(?:0|2[23]|3[03]|[67]1|88)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|888)","5(?:0|2(?:21|3)|3(?:0|3[23])|616|717|8888)"],0,1],["(\\d{4})(\\d{4,5})","$1 $2",["180","1800"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["140"],0,1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["11|2[02]|33|4[04]|79[1-7]|80[2-46]","11|2[02]|33|4[04]|79(?:[1-6]|7[19])|80(?:[2-4]|6[0-589])","11|2[02]|33|4[04]|79(?:[124-6]|3(?:[02-9]|1[0-24-9])|7(?:1|9[1-6]))|80(?:[2-4]|6[0-589])"],"0$1",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1(?:2[0-249]|3[0-25]|4[145]|[68]|7[1257])|2(?:1[257]|3[013]|4[01]|5[0137]|6[0158]|78|8[1568])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|5[12]|[78]1)|6(?:12|[2-4]1|5[17]|6[13]|80)|7(?:12|3[134]|4[47]|61|88)|8(?:16|2[014]|3[126]|6[136]|7[078]|8[34]|91)|(?:43|59|75)[15]|(?:1[59]|29|67|72)[14]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|674|7(?:(?:2[14]|3[34]|5[15])[2-6]|61[346]|88[0-8])|8(?:70[2-6]|84[235-7]|91[3-7])|(?:1(?:29|60|8[06])|261|552|6(?:12|[2-47]1|5[17]|6[13]|80)|7(?:12|31|4[47])|8(?:16|2[014]|3[126]|6[136]|7[78]|83))[2-7]","1(?:2[0-24]|3[0-25]|4[145]|[59][14]|6[1-9]|7[1257]|8[1-57-9])|2(?:1[257]|3[013]|4[01]|5[0137]|6[058]|78|8[1568]|9[14])|3(?:26|4[1-3]|5[34]|6[01489]|7[02-46]|8[159])|4(?:1[36]|2[1-47]|3[15]|5[12]|6[0-26-9]|7[0-24-9]|8[013-57]|9[014-7])|5(?:1[025]|22|[36][25]|4[28]|[578]1|9[15])|6(?:12(?:[2-6]|7[0-8])|74[2-7])|7(?:(?:2[14]|5[15])[2-6]|3171|61[346]|88(?:[2-7]|82))|8(?:70[2-6]|84(?:[2356]|7[19])|91(?:[3-6]|7[19]))|73[134][2-6]|(?:74[47]|8(?:16|2[014]|3[126]|6[136]|7[78]|83))(?:[2-6]|7[19])|(?:1(?:29|60|8[06])|261|552|6(?:[2-4]1|5[17]|6[13]|7(?:1|4[0189])|80)|7(?:12|88[01]))[2-7]"],"0$1",1],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2[2457-9]|3[2-5]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1[013-9]|28|3[129]|4[1-35689]|5[29]|6[02-5]|70)|807","1(?:[2-479]|5[0235-9])|[2-5]|6(?:1[1358]|2(?:[2457]|84|95)|3(?:[2-4]|55)|4[235-7]|5[2-689]|6[24578]|7[235689]|8[1-6])|7(?:1(?:[013-8]|9[6-9])|28[6-8]|3(?:17|2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4|5[0-367])|70[13-7])|807[19]","1(?:[2-479]|5(?:[0236-9]|5[013-9]))|[2-5]|6(?:2(?:84|95)|355|83)|73179|807(?:1|9[1-3])|(?:1552|6(?:1[1358]|2[2457]|3[2-4]|4[235-7]|5[2-689]|6[24578]|7[235689]|8[124-6])\\d|7(?:1(?:[013-8]\\d|9[6-9])|28[6-8]|3(?:2[0-49]|9[2-57])|4(?:1[2-4]|[29][0-7]|3[0-8]|[56]\\d|8[0-24-7])|5(?:2[1-3]|9[0-6])|6(?:0[5689]|2[5-9]|3[02-8]|4\\d|5[0-367])|70[13-7]))[2-7]"],"0$1",1],["(\\d{5})(\\d{5})","$1 $2",["[6-9]"],"0$1",1],["(\\d{4})(\\d{2,4})(\\d{4})","$1 $2 $3",["1(?:6|8[06])","1(?:6|8[06]0)"],0,1],["(\\d{4})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["18"],0,1]],"0"],IO:["246","00","3\\d{6}",[7],[["(\\d{3})(\\d{4})","$1 $2",["3"]]]],IQ:["964","00","(?:1|7\\d\\d)\\d{7}|[2-6]\\d{7,8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-6]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],IR:["98","00","[1-9]\\d{9}|(?:[1-8]\\d\\d|9)\\d{3,4}",[4,5,6,7,10],[["(\\d{4,5})","$1",["96"],"0$1"],["(\\d{2})(\\d{4,5})","$1 $2",["(?:1[137]|2[13-68]|3[1458]|4[145]|5[1468]|6[16]|7[1467]|8[13467])[12689]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["9"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["[1-8]"],"0$1"]],"0"],IS:["354","00|1(?:0(?:01|[12]0)|100)","(?:38\\d|[4-9])\\d{6}",[7,9],[["(\\d{3})(\\d{4})","$1 $2",["[4-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["3"]]],0,0,0,0,0,0,0,"00"],IT:["39","00","0\\d{5,10}|1\\d{8,10}|3(?:[0-8]\\d{7,10}|9\\d{7,8})|(?:43|55|70)\\d{8}|8\\d{5}(?:\\d{2,4})?",[6,7,8,9,10,11],[["(\\d{2})(\\d{4,6})","$1 $2",["0[26]"]],["(\\d{3})(\\d{3,6})","$1 $2",["0[13-57-9][0159]|8(?:03|4[17]|9[2-5])","0[13-57-9][0159]|8(?:03|4[17]|9(?:2|3[04]|[45][0-4]))"]],["(\\d{4})(\\d{2,6})","$1 $2",["0(?:[13-579][2-46-8]|8[236-8])"]],["(\\d{4})(\\d{4})","$1 $2",["894"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[26]|5"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["1(?:44|[679])|[378]|43"]],["(\\d{3})(\\d{3,4})(\\d{4})","$1 $2 $3",["0[13-57-9][0159]|14"]],["(\\d{2})(\\d{4})(\\d{5})","$1 $2 $3",["0[26]"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["3"]]],0,0,0,0,0,0,[["0669[0-79]\\d{1,6}|0(?:1(?:[0159]\\d|[27][1-5]|31|4[1-4]|6[1356]|8[2-57])|2\\d\\d|3(?:[0159]\\d|2[1-4]|3[12]|[48][1-6]|6[2-59]|7[1-7])|4(?:[0159]\\d|[23][1-9]|4[245]|6[1-5]|7[1-4]|81)|5(?:[0159]\\d|2[1-5]|3[2-6]|4[1-79]|6[4-6]|7[1-578]|8[3-8])|6(?:[0-57-9]\\d|6[0-8])|7(?:[0159]\\d|2[12]|3[1-7]|4[2-46]|6[13569]|7[13-6]|8[1-59])|8(?:[0159]\\d|2[3-578]|3[1-356]|[6-8][1-5])|9(?:[0159]\\d|[238][1-5]|4[12]|6[1-8]|7[1-6]))\\d{2,7}"],["3[2-9]\\d{7,8}|(?:31|43)\\d{8}",[9,10]],["80(?:0\\d{3}|3)\\d{3}",[6,9]],["(?:0878\\d{3}|89(?:2\\d|3[04]|4(?:[0-4]|[5-9]\\d\\d)|5[0-4]))\\d\\d|(?:1(?:44|6[346])|89(?:38|5[5-9]|9))\\d{6}",[6,8,9,10]],["1(?:78\\d|99)\\d{6}",[9,10]],0,0,0,["55\\d{8}",[10]],["84(?:[08]\\d{3}|[17])\\d{3}",[6,9]]]],JE:["44","00","1534\\d{6}|(?:[3578]\\d|90)\\d{8}",[10],0,"0",0,"([0-24-8]\\d{5})$|0","1534$1",0,0,[["1534[0-24-8]\\d{5}"],["7(?:(?:(?:50|82)9|937)\\d|7(?:00[378]|97\\d))\\d{5}"],["80(?:07(?:35|81)|8901)\\d{4}"],["(?:8(?:4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|90(?:066[59]|1810|71(?:07|55)))\\d{4}"],["701511\\d{4}"],0,["(?:3(?:0(?:07(?:35|81)|8901)|3\\d{4}|4(?:4(?:4(?:05|42|69)|703)|5(?:041|800))|7(?:0002|1206))|55\\d{4})\\d{4}"],["76(?:464|652)\\d{5}|76(?:0[0-28]|2[356]|34|4[01347]|5[49]|6[0-369]|77|8[14]|9[139])\\d{6}"],["56\\d{8}"]]],JM:["1","011","(?:[58]\\d\\d|658|900)\\d{7}",[10],0,"1",0,0,0,0,"658|876"],JO:["962","00","(?:(?:[2689]|7\\d)\\d|32|53)\\d{6}",[8,9],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2356]|87"],"(0$1)"],["(\\d{3})(\\d{5,6})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["70"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["7"],"0$1"]],"0"],JP:["81","010","00[1-9]\\d{6,14}|[257-9]\\d{9}|(?:00|[1-9]\\d\\d)\\d{6}",[8,9,10,11,12,13,14,15,16,17],[["(\\d{3})(\\d{3})(\\d{3})","$1-$2-$3",["(?:12|57|99)0"],"0$1"],["(\\d{4})(\\d)(\\d{4})","$1-$2-$3",["1(?:26|3[79]|4[56]|5[4-68]|6[3-5])|499|5(?:76|97)|746|8(?:3[89]|47|51)|9(?:80|9[16])","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:76|97)9|7468|8(?:3(?:8[7-9]|96)|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]","1(?:267|3(?:7[247]|9[278])|466|5(?:47|58|64)|6(?:3[245]|48|5[4-68]))|499[2468]|5(?:769|979[2-69])|7468|8(?:3(?:8[7-9]|96[2457-9])|477|51[2-9])|9(?:802|9(?:1[23]|69))|1(?:45|58)[67]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2-$3",["[36]|4(?:2[09]|7[01])","[36]|4(?:2(?:0|9[02-69])|7(?:0[019]|1))"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["1(?:1|5[45]|77|88|9[69])|2(?:2[1-37]|3[0-269]|4[59]|5|6[24]|7[1-358]|8[1369]|9[0-38])|4(?:[28][1-9]|3[0-57]|[45]|6[248]|7[2-579]|9[29])|5(?:2|3[0459]|4[0-369]|5[29]|8[02389]|9[0-389])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9[2-6])|8(?:2[124589]|3[26-9]|49|51|6|7[0-468]|8[68]|9[019])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9[1-489])","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2(?:[127]|3[014-9])|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9[19])|62|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|8[1-9]|9[29])|5(?:2|3(?:[045]|9[0-8])|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0-2469])|3(?:[29]|60)|49|51|6(?:[0-24]|36|5[0-3589]|7[23]|9[01459])|7[0-468]|8[68])|9(?:[23][1-9]|4[15]|5[138]|6[1-3]|7[156]|8[189]|9(?:[1289]|3[34]|4[0178]))|(?:264|837)[016-9]|2(?:57|93)[015-9]|(?:25[0468]|422|838)[01]|(?:47[59]|59[89]|8(?:6[68]|9))[019]","1(?:1|5(?:4[018]|5[017])|77|88|9[69])|2(?:2[127]|3[0-269]|4[59]|5(?:[1-3]|5[0-69]|9(?:17|99))|6(?:2|4[016-9])|7(?:[1-35]|8[0189])|8(?:[16]|3[0134]|9[0-5])|9(?:[028]|17))|4(?:2(?:[13-79]|8[014-6])|3[0-57]|[45]|6[248]|7[2-47]|9[29])|5(?:2|3(?:[045]|9(?:[0-58]|6[4-9]|7[0-35689]))|4[0-369]|5[29]|8[02389]|9[0-3])|7(?:2[02-46-9]|34|[58]|6[0249]|7[57]|9(?:[23]|4[0-59]|5[01569]|6[0167]))|8(?:2(?:[1258]|4[0-39]|9[0169])|3(?:[29]|60|7(?:[017-9]|6[6-8]))|49|51|6(?:[0-24]|36[2-57-9]|5(?:[0-389]|5[23])|6(?:[01]|9[178])|7(?:2[2-468]|3[78])|9[0145])|7[0-468]|8[68])|9(?:4[15]|5[138]|7[156]|8[189]|9(?:[1289]|3(?:31|4[357])|4[0178]))|(?:8294|96)[1-3]|2(?:57|93)[015-9]|(?:223|8699)[014-9]|(?:25[0468]|422|838)[01]|(?:48|8292|9[23])[1-9]|(?:47[59]|59[89]|8(?:68|9))[019]"],"0$1"],["(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3",["[14]|[289][2-9]|5[3-9]|7[2-4679]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1-$2-$3",["800"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[257-9]"],"0$1"]],"0",0,"(000[259]\\d{6})$|(?:(?:003768)0?)|0","$1"],KE:["254","000","(?:[17]\\d\\d|900)\\d{6}|(?:2|80)0\\d{6,7}|[4-6]\\d{6,8}",[7,8,9,10],[["(\\d{2})(\\d{5,7})","$1 $2",["[24-6]"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[17]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0"],KG:["996","00","8\\d{9}|[235-9]\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["3(?:1[346]|[24-79])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[235-79]|88"],"0$1"],["(\\d{3})(\\d{3})(\\d)(\\d{2,3})","$1 $2 $3 $4",["8"],"0$1"]],"0"],KH:["855","00[14-9]","1\\d{9}|[1-9]\\d{7,8}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],KI:["686","00","(?:[37]\\d|6[0-79])\\d{6}|(?:[2-48]\\d|50)\\d{3}",[5,8],0,"0"],KM:["269","00","[3478]\\d{6}",[7],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[3478]"]]]],KN:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","869$1",0,"869"],KP:["850","00|99","85\\d{6}|(?:19\\d|[2-7])\\d{7}",[8,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2-7]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"]],"0"],KR:["82","00(?:[125689]|3(?:[46]5|91)|7(?:00|27|3|55|6[126]))","00[1-9]\\d{8,11}|(?:[12]|5\\d{3})\\d{7}|[13-6]\\d{9}|(?:[1-6]\\d|80)\\d{7}|[3-6]\\d{4,5}|(?:00|7)0\\d{8}",[5,6,8,9,10,11,12,13,14],[["(\\d{2})(\\d{3,4})","$1-$2",["(?:3[1-3]|[46][1-4]|5[1-5])1"],"0$1"],["(\\d{4})(\\d{4})","$1-$2",["1"]],["(\\d)(\\d{3,4})(\\d{4})","$1-$2-$3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1-$2-$3",["60|8"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1-$2-$3",["[1346]|5[1-5]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2-$3",["[57]"],"0$1"],["(\\d{2})(\\d{5})(\\d{4})","$1-$2-$3",["5"],"0$1"]],"0",0,"0(8(?:[1-46-8]|5\\d\\d))?"],KW:["965","00","18\\d{5}|(?:[2569]\\d|41)\\d{6}",[7,8],[["(\\d{4})(\\d{3,4})","$1 $2",["[169]|2(?:[235]|4[1-35-9])|52"]],["(\\d{3})(\\d{5})","$1 $2",["[245]"]]]],KY:["1","011","(?:345|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","345$1",0,"345"],KZ:["7","810","(?:33622|8\\d{8})\\d{5}|[78]\\d{9}",[10,14],0,"8",0,0,0,0,"33|7",0,"8~10"],LA:["856","00","[23]\\d{9}|3\\d{8}|(?:[235-8]\\d|41)\\d{6}",[8,9,10],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2[13]|3[14]|[4-8]"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["30[013-9]"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[23]"],"0$1"]],"0"],LB:["961","00","[27-9]\\d{7}|[13-9]\\d{6}",[7,8],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[13-69]|7(?:[2-57]|62|8[0-7]|9[04-9])|8[02-9]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[27-9]"]]],"0"],LC:["1","011","(?:[58]\\d\\d|758|900)\\d{7}",[10],0,"1",0,"([2-8]\\d{6})$|1","758$1",0,"758"],LI:["423","00","[68]\\d{8}|(?:[2378]\\d|90)\\d{5}",[7,9],[["(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3",["[2379]|8(?:0[09]|7)","[2379]|8(?:0(?:02|9)|7)"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["69"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]]],"0",0,"(1001)|0"],LK:["94","00","[1-9]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[1-689]"],"0$1"]],"0"],LR:["231","00","(?:[245]\\d|33|77|88)\\d{7}|(?:2\\d|[4-6])\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["4[67]|[56]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[2-578]"],"0$1"]],"0"],LS:["266","00","(?:[256]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2568]"]]]],LT:["370","00","(?:[3469]\\d|52|[78]0)\\d{6}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["52[0-7]"],"(0-$1)",1],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[7-9]"],"0 $1",1],["(\\d{2})(\\d{6})","$1 $2",["37|4(?:[15]|6[1-8])"],"(0-$1)",1],["(\\d{3})(\\d{5})","$1 $2",["[3-6]"],"(0-$1)",1]],"0",0,"[08]"],LU:["352","00","35[013-9]\\d{4,8}|6\\d{8}|35\\d{2,4}|(?:[2457-9]\\d|3[0-46-9])\\d{2,9}",[4,5,6,7,8,9,10,11],[["(\\d{2})(\\d{3})","$1 $2",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["2(?:0[2-689]|[2-9])|[3-57]|8(?:0[2-9]|[13-9])|9(?:0[89]|[2-579])"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["20[2-689]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4",["2(?:[0367]|4[3-8])"]],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["80[01]|90[015]"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3 $4",["20"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{1,2})","$1 $2 $3 $4 $5",["2(?:[0367]|4[3-8])"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{1,5})","$1 $2 $3 $4",["[3-57]|8[13-9]|9(?:0[89]|[2-579])|(?:2|80)[2-9]"]]],0,0,"(15(?:0[06]|1[12]|[35]5|4[04]|6[26]|77|88|99)\\d)"],LV:["371","00","(?:[268]\\d|90)\\d{6}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[269]|8[01]"]]]],LY:["218","00","[2-9]\\d{8}",[9],[["(\\d{2})(\\d{7})","$1-$2",["[2-9]"],"0$1"]],"0"],MA:["212","00","[5-8]\\d{8}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5[45]"],"0$1"],["(\\d{4})(\\d{5})","$1-$2",["5(?:2[2-46-9]|3[3-9]|9)|8(?:0[89]|92)"],"0$1"],["(\\d{2})(\\d{7})","$1-$2",["8"],"0$1"],["(\\d{3})(\\d{6})","$1-$2",["[5-7]"],"0$1"]],"0",0,0,0,0,0,[["5(?:2(?:[0-25-79]\\d|3[1-578]|4[02-46-8]|8[0235-7])|3(?:[0-47]\\d|5[02-9]|6[02-8]|8[014-9]|9[3-9])|(?:4[067]|5[03])\\d)\\d{5}"],["(?:6(?:[0-79]\\d|8[0-247-9])|7(?:[0167]\\d|2[0-4]|5[01]|8[0-3]))\\d{6}"],["80[0-7]\\d{6}"],["89\\d{7}"],0,0,0,0,["(?:592(?:4[0-2]|93)|80[89]\\d\\d)\\d{4}"]]],MC:["377","00","(?:[3489]|6\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["4"],"0$1"],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[389]"]],["(\\d)(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4 $5",["6"],"0$1"]],"0"],MD:["373","00","(?:[235-7]\\d|[89]0)\\d{6}",[8],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["22|3"],"0$1"],["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["[25-7]"],"0$1"]],"0"],ME:["382","00","(?:20|[3-79]\\d)\\d{6}|80\\d{6,7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[2-9]"],"0$1"]],"0"],MF:["590","00","590\\d{6}|(?:69|80|9\\d)\\d{7}",[9],0,"0",0,0,0,0,0,[["590(?:0[079]|[14]3|[27][79]|3[03-7]|5[0-268]|87)\\d{4}"],["69(?:0\\d\\d|1(?:2[2-9]|3[0-5])|4(?:0[89]|1[2-6]|9\\d)|6(?:1[016-9]|5[0-4]|[67]\\d))\\d{4}"],["80[0-5]\\d{6}"],0,0,0,0,0,["9(?:(?:39[5-7]|76[018])\\d|475[0-5])\\d{4}"]]],MG:["261","00","[23]\\d{8}",[9],[["(\\d{2})(\\d{2})(\\d{3})(\\d{2})","$1 $2 $3 $4",["[23]"],"0$1"]],"0",0,"([24-9]\\d{6})$|0","20$1"],MH:["692","011","329\\d{4}|(?:[256]\\d|45)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1-$2",["[2-6]"]]],"1"],MK:["389","00","[2-578]\\d{7}",[8],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2|34[47]|4(?:[37]7|5[47]|64)"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[347]"],"0$1"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["[58]"],"0$1"]],"0"],ML:["223","00","[24-9]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24-9]"]]]],MM:["95","00","1\\d{5,7}|95\\d{6}|(?:[4-7]|9[0-46-9])\\d{6,8}|(?:2|8\\d)\\d{5,8}",[6,7,8,9,10],[["(\\d)(\\d{2})(\\d{3})","$1 $2 $3",["16|2"],"0$1"],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["[45]|6(?:0[23]|[1-689]|7[235-7])|7(?:[0-4]|5[2-7])|8[1-6]"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[4-7]|8[1-35]"],"0$1"],["(\\d)(\\d{3})(\\d{4,6})","$1 $2 $3",["9(?:2[0-4]|[35-9]|4[137-9])"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["92"],"0$1"],["(\\d)(\\d{5})(\\d{4})","$1 $2 $3",["9"],"0$1"]],"0"],MN:["976","001","[12]\\d{7,9}|[5-9]\\d{7}",[8,9,10],[["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["[12]1"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[5-9]"]],["(\\d{3})(\\d{5,6})","$1 $2",["[12]2[1-3]"],"0$1"],["(\\d{4})(\\d{5,6})","$1 $2",["[12](?:27|3[2-8]|4[2-68]|5[1-4689])","[12](?:27|3[2-8]|4[2-68]|5[1-4689])[0-3]"],"0$1"],["(\\d{5})(\\d{4,5})","$1 $2",["[12]"],"0$1"]],"0"],MO:["853","00","0800\\d{3}|(?:28|[68]\\d)\\d{6}",[7,8],[["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{4})(\\d{4})","$1 $2",["[268]"]]]],MP:["1","011","[58]\\d{9}|(?:67|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","670$1",0,"670"],MQ:["596","00","596\\d{6}|(?:69|80|9\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[569]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],MR:["222","00","(?:[2-4]\\d\\d|800)\\d{5}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-48]"]]]],MS:["1","011","(?:[58]\\d\\d|664|900)\\d{7}",[10],0,"1",0,"([34]\\d{6})$|1","664$1",0,"664"],MT:["356","00","3550\\d{4}|(?:[2579]\\d\\d|800)\\d{5}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[2357-9]"]]]],MU:["230","0(?:0|[24-7]0|3[03])","(?:[57]|8\\d\\d)\\d{7}|[2-468]\\d{6}",[7,8,10],[["(\\d{3})(\\d{4})","$1 $2",["[2-46]|8[013]"]],["(\\d{4})(\\d{4})","$1 $2",["[57]"]],["(\\d{5})(\\d{5})","$1 $2",["8"]]],0,0,0,0,0,0,0,"020"],MV:["960","0(?:0|19)","(?:800|9[0-57-9]\\d)\\d{7}|[34679]\\d{6}",[7,10],[["(\\d{3})(\\d{4})","$1-$2",["[34679]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"]]],0,0,0,0,0,0,0,"00"],MW:["265","00","(?:[1289]\\d|31|77)\\d{7}|1\\d{6}",[7,9],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["1[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[137-9]"],"0$1"]],"0"],MX:["52","0[09]","1(?:(?:22|44|7[27]|87|9[69])[1-9]|65[0-689])\\d{7}|(?:1(?:[01]\\d|2[13-9]|[35][1-9]|4[0-35-9]|6[0-46-9]|7[013-689]|8[1-69]|9[1-578])|[2-9]\\d)\\d{8}",[10,11],[["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["33|5[56]|81"],0,1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[2-9]"],0,1],["(\\d)(\\d{2})(\\d{4})(\\d{4})","$2 $3 $4",["1(?:33|5[56]|81)"],0,1],["(\\d)(\\d{3})(\\d{3})(\\d{4})","$2 $3 $4",["1"],0,1]],"01",0,"0(?:[12]|4[45])|1",0,0,0,0,"00"],MY:["60","00","1\\d{8,9}|(?:3\\d|[4-9])\\d{7}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1-$2 $3",["[4-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1-$2 $3",["1(?:[02469]|[378][1-9]|53)|8","1(?:[02469]|[37][1-9]|53|8(?:[1-46-9]|5[7-9]))|8"],"0$1"],["(\\d)(\\d{4})(\\d{4})","$1-$2 $3",["3"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{4})","$1-$2-$3-$4",["1(?:[367]|80)"]],["(\\d{3})(\\d{3})(\\d{4})","$1-$2 $3",["15"],"0$1"],["(\\d{2})(\\d{4})(\\d{4})","$1-$2 $3",["1"],"0$1"]],"0"],MZ:["258","00","(?:2|8\\d)\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2|8[2-79]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["8"]]]],NA:["264","00","[68]\\d{7,8}",[8,9],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["88"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["87"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],NC:["687","00","(?:050|[2-57-9]\\d\\d)\\d{3}",[6],[["(\\d{2})(\\d{2})(\\d{2})","$1.$2.$3",["[02-57-9]"]]]],NE:["227","00","[027-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["08"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[089]|2[013]|7[0467]"]]]],NF:["672","00","[13]\\d{5}",[6],[["(\\d{2})(\\d{4})","$1 $2",["1[0-3]"]],["(\\d)(\\d{5})","$1 $2",["[13]"]]],0,0,"([0-258]\\d{4})$","3$1"],NG:["234","009","2[0-24-9]\\d{8}|[78]\\d{10,13}|[7-9]\\d{9}|[1-9]\\d{7}|[124-7]\\d{6}",[7,8,10,11,12,13,14],[["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["78"],"0$1"],["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[12]|9(?:0[3-9]|[1-9])"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["[3-6]|7(?:0[0-689]|[1-79])|8[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[7-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["20[129]"],"0$1"],["(\\d{4})(\\d{2})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{3})(\\d{4})(\\d{4,5})","$1 $2 $3",["[78]"],"0$1"],["(\\d{3})(\\d{5})(\\d{5,6})","$1 $2 $3",["[78]"],"0$1"]],"0"],NI:["505","00","(?:1800|[25-8]\\d{3})\\d{4}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[125-8]"]]]],NL:["31","00","(?:[124-7]\\d\\d|3(?:[02-9]\\d|1[0-8]))\\d{6}|8\\d{6,9}|9\\d{6,10}|1\\d{4,5}",[5,6,7,8,9,10,11],[["(\\d{3})(\\d{4,7})","$1 $2",["[89]0"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["66"],"0$1"],["(\\d)(\\d{8})","$1 $2",["6"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["1[16-8]|2[259]|3[124]|4[17-9]|5[124679]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-578]|91"],"0$1"],["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3",["9"],"0$1"]],"0"],NO:["47","00","(?:0|[2-9]\\d{3})\\d{4}",[5,8],[["(\\d{3})(\\d{2})(\\d{3})","$1 $2 $3",["8"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2-79]"]]],0,0,0,0,0,"[02-689]|7[0-8]"],NP:["977","00","(?:1\\d|9)\\d{9}|[1-9]\\d{7}",[8,10,11],[["(\\d)(\\d{7})","$1-$2",["1[2-6]"],"0$1"],["(\\d{2})(\\d{6})","$1-$2",["1[01]|[2-8]|9(?:[1-59]|[67][2-6])"],"0$1"],["(\\d{3})(\\d{7})","$1-$2",["9"]]],"0"],NR:["674","00","(?:444|(?:55|8\\d)\\d|666)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[4-68]"]]]],NU:["683","00","(?:[4-7]|888\\d)\\d{3}",[4,7],[["(\\d{3})(\\d{4})","$1 $2",["8"]]]],NZ:["64","0(?:0|161)","[1289]\\d{9}|50\\d{5}(?:\\d{2,3})?|[27-9]\\d{7,8}|(?:[34]\\d|6[0-35-9])\\d{6}|8\\d{4,6}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,8})","$1 $2",["8[1-79]"],"0$1"],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["50[036-8]|8|90","50(?:[0367]|88)|8|90"],"0$1"],["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["24|[346]|7[2-57-9]|9[2-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:10|74)|[589]"],"0$1"],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["1|2[028]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,5})","$1 $2 $3",["2(?:[169]|7[0-35-9])|7"],"0$1"]],"0",0,0,0,0,0,0,"00"],OM:["968","00","(?:1505|[279]\\d{3}|500)\\d{4}|800\\d{5,6}",[7,8,9],[["(\\d{3})(\\d{4,6})","$1 $2",["[58]"]],["(\\d{2})(\\d{6})","$1 $2",["2"]],["(\\d{4})(\\d{4})","$1 $2",["[179]"]]]],PA:["507","00","(?:00800|8\\d{3})\\d{6}|[68]\\d{7}|[1-57-9]\\d{6}",[7,8,10,11],[["(\\d{3})(\\d{4})","$1-$2",["[1-57-9]"]],["(\\d{4})(\\d{4})","$1-$2",["[68]"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]]],PE:["51","00|19(?:1[124]|77|90)00","(?:[14-8]|9\\d)\\d{7}",[8,9],[["(\\d{3})(\\d{5})","$1 $2",["80"],"(0$1)"],["(\\d)(\\d{7})","$1 $2",["1"],"(0$1)"],["(\\d{2})(\\d{6})","$1 $2",["[4-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"]]],"0",0,0,0,0,0,0,"00"," Anexo "],PF:["689","00","4\\d{5}(?:\\d{2})?|8\\d{7,8}",[6,8,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["44"]],["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["4|8[7-9]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],PG:["675","00|140[1-3]","(?:180|[78]\\d{3})\\d{4}|(?:[2-589]\\d|64)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["18|[2-69]|85"]],["(\\d{4})(\\d{4})","$1 $2",["[78]"]]],0,0,0,0,0,0,0,"00"],PH:["63","00","(?:[2-7]|9\\d)\\d{8}|2\\d{5}|(?:1800|8)\\d{7,9}",[6,8,9,10,11,12,13],[["(\\d)(\\d{5})","$1 $2",["2"],"(0$1)"],["(\\d{4})(\\d{4,6})","$1 $2",["3(?:23|39|46)|4(?:2[3-6]|[35]9|4[26]|76)|544|88[245]|(?:52|64|86)2","3(?:230|397|461)|4(?:2(?:35|[46]4|51)|396|4(?:22|63)|59[347]|76[15])|5(?:221|446)|642[23]|8(?:622|8(?:[24]2|5[13]))"],"(0$1)"],["(\\d{5})(\\d{4})","$1 $2",["346|4(?:27|9[35])|883","3469|4(?:279|9(?:30|56))|8834"],"(0$1)"],["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["2"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|8[2-8]"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]],["(\\d{4})(\\d{1,2})(\\d{3})(\\d{4})","$1 $2 $3 $4",["1"]]],"0"],PK:["92","00","122\\d{6}|[24-8]\\d{10,11}|9(?:[013-9]\\d{8,10}|2(?:[01]\\d\\d|2(?:[06-8]\\d|1[01]))\\d{7})|(?:[2-8]\\d{3}|92(?:[0-7]\\d|8[1-9]))\\d{6}|[24-9]\\d{8}|[89]\\d{7}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,7})","$1 $2 $3",["[89]0"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["1"]],["(\\d{3})(\\d{6,7})","$1 $2",["2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:2[2-8]|3[27-9]|4[2-6]|6[3569]|9[25-8])","9(?:2[3-8]|98)|(?:2(?:3[2358]|4[2-4]|9[2-8])|45[3479]|54[2-467]|60[468]|72[236]|8(?:2[2-689]|3[23578]|4[3478]|5[2356])|9(?:22|3[27-9]|4[2-6]|6[3569]|9[25-7]))[2-9]"],"(0$1)"],["(\\d{2})(\\d{7,8})","$1 $2",["(?:2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91)[2-9]"],"(0$1)"],["(\\d{5})(\\d{5})","$1 $2",["58"],"(0$1)"],["(\\d{3})(\\d{7})","$1 $2",["3"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["2[125]|4[0-246-9]|5[1-35-7]|6[1-8]|7[14]|8[16]|91"],"(0$1)"],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[24-9]"],"(0$1)"]],"0"],PL:["48","00","(?:6|8\\d\\d)\\d{7}|[1-9]\\d{6}(?:\\d{2})?|[26]\\d{5}",[6,7,8,9,10],[["(\\d{5})","$1",["19"]],["(\\d{3})(\\d{3})","$1 $2",["11|20|64"]],["(\\d{2})(\\d{2})(\\d{3})","$1 $2 $3",["(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])1","(?:1[2-8]|2[2-69]|3[2-4]|4[1-468]|5[24-689]|6[1-3578]|7[14-7]|8[1-79]|9[145])19"]],["(\\d{3})(\\d{2})(\\d{2,3})","$1 $2 $3",["64"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["21|39|45|5[0137]|6[0469]|7[02389]|8(?:0[14]|8)"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["1[2-8]|[2-7]|8[1-79]|9[145]"]],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["8"]]]],PM:["508","00","[45]\\d{5}|(?:708|80\\d)\\d{6}",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[45]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"],"0$1"]],"0"],PR:["1","011","(?:[589]\\d\\d|787)\\d{7}",[10],0,"1",0,0,0,0,"787|939"],PS:["970","00","[2489]2\\d{6}|(?:1\\d|5)\\d{8}",[8,9,10],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["[2489]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["5"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],PT:["351","00","1693\\d{5}|(?:[26-9]\\d|30)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["2[12]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["16|[236-9]"]]]],PW:["680","01[12]","(?:[24-8]\\d\\d|345|900)\\d{4}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[2-9]"]]]],PY:["595","00","59\\d{4,6}|9\\d{5,10}|(?:[2-46-8]\\d|5[0-8])\\d{4,7}",[6,7,8,9,10,11],[["(\\d{3})(\\d{3,6})","$1 $2",["[2-9]0"],"0$1"],["(\\d{2})(\\d{5})","$1 $2",["[26]1|3[289]|4[1246-8]|7[1-3]|8[1-36]"],"(0$1)"],["(\\d{3})(\\d{4,5})","$1 $2",["2[279]|3[13-5]|4[359]|5|6(?:[34]|7[1-46-8])|7[46-8]|85"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["2[14-68]|3[26-9]|4[1246-8]|6(?:1|75)|7[1-35]|8[1-36]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["87"]],["(\\d{3})(\\d{6})","$1 $2",["9(?:[5-79]|8[1-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[2-8]"],"0$1"],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["9"]]],"0"],QA:["974","00","800\\d{4}|(?:2|800)\\d{6}|(?:0080|[3-7])\\d{7}",[7,8,9,11],[["(\\d{3})(\\d{4})","$1 $2",["2[16]|8"]],["(\\d{4})(\\d{4})","$1 $2",["[3-7]"]]]],RE:["262","00","(?:26|[689]\\d)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2689]"],"0$1"]],"0",0,0,0,0,0,[["26(?:2\\d\\d|3(?:0\\d|1[0-6]))\\d{4}"],["69(?:2\\d\\d|3(?:[06][0-6]|1[013]|2[0-2]|3[0-39]|4\\d|5[0-5]|7[0-37]|8[0-8]|9[0-479]))\\d{4}"],["80\\d{7}"],["89[1-37-9]\\d{6}"],0,0,0,0,["9(?:399[0-3]|479[0-5]|76(?:2[278]|3[0-37]))\\d{4}"],["8(?:1[019]|2[0156]|84|90)\\d{6}"]]],RO:["40","00","(?:[236-8]\\d|90)\\d{7}|[23]\\d{5}",[6,9],[["(\\d{3})(\\d{3})","$1 $2",["2[3-6]","2[3-6]\\d9"],"0$1"],["(\\d{2})(\\d{4})","$1 $2",["219|31"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[23]1"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[236-9]"],"0$1"]],"0",0,0,0,0,0,0,0," int "],RS:["381","00","38[02-9]\\d{6,9}|6\\d{7,9}|90\\d{4,8}|38\\d{5,6}|(?:7\\d\\d|800)\\d{3,9}|(?:[12]\\d|3[0-79])\\d{5,10}",[6,7,8,9,10,11,12],[["(\\d{3})(\\d{3,9})","$1 $2",["(?:2[389]|39)0|[7-9]"],"0$1"],["(\\d{2})(\\d{5,10})","$1 $2",["[1-36]"],"0$1"]],"0"],RU:["7","810","8\\d{13}|[347-9]\\d{9}",[10,14],[["(\\d{4})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-8]|2[1-9])","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:1[23]|[2-9]2))","7(?:1(?:[0-356]2|4[29]|7|8[27])|2(?:13[03-69]|62[013-9]))|72[1-57-9]2"],"8 ($1)",1],["(\\d{5})(\\d)(\\d{2})(\\d{2})","$1 $2 $3 $4",["7(?:1[0-68]|2[1-9])","7(?:1(?:[06][3-6]|[18]|2[35]|[3-5][3-5])|2(?:[13][3-5]|[24-689]|7[457]))","7(?:1(?:0(?:[356]|4[023])|[18]|2(?:3[013-9]|5)|3[45]|43[013-79]|5(?:3[1-8]|4[1-7]|5)|6(?:3[0-35-9]|[4-6]))|2(?:1(?:3[178]|[45])|[24-689]|3[35]|7[457]))|7(?:14|23)4[0-8]|71(?:33|45)[1-79]"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"8 ($1)",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2-$3-$4",["[349]|8(?:[02-7]|1[1-8])"],"8 ($1)",1],["(\\d{4})(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3 $4",["8"],"8 ($1)"]],"8",0,0,0,0,"3[04-689]|[489]",0,"8~10"],RW:["250","00","(?:06|[27]\\d\\d|[89]00)\\d{6}",[8,9],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["0"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[7-9]"],"0$1"]],"0"],SA:["966","00","92\\d{7}|(?:[15]|8\\d)\\d{8}",[9,10],[["(\\d{4})(\\d{5})","$1 $2",["9"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["1"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["5"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["81"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]]],"0"],SB:["677","0[01]","[6-9]\\d{6}|[1-6]\\d{4}",[5,7],[["(\\d{2})(\\d{5})","$1 $2",["6[89]|7|8[4-9]|9(?:[1-8]|9[0-8])"]]]],SC:["248","010|0[0-2]","800\\d{4}|(?:[249]\\d|64)\\d{5}",[7],[["(\\d)(\\d{3})(\\d{3})","$1 $2 $3",["[246]|9[57]"]]],0,0,0,0,0,0,0,"00"],SD:["249","00","[19]\\d{8}",[9],[["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[19]"],"0$1"]],"0"],SE:["46","00","(?:[26]\\d\\d|9)\\d{9}|[1-9]\\d{8}|[1-689]\\d{7}|[1-4689]\\d{6}|2\\d{5}",[6,7,8,9,10],[["(\\d{2})(\\d{2,3})(\\d{2})","$1-$2 $3",["20"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{4})","$1-$2",["9(?:00|39|44|9)"],"0$1",0,"$1 $2"],["(\\d{2})(\\d{3})(\\d{2})","$1-$2 $3",["[12][136]|3[356]|4[0246]|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3"],["(\\d)(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2,3})(\\d{2})","$1-$2 $3",["1[2457]|2(?:[247-9]|5[0138])|3[0247-9]|4[1357-9]|5[0-35-9]|6(?:[125689]|4[02-57]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3"],["(\\d{3})(\\d{2,3})(\\d{3})","$1-$2 $3",["9(?:00|39|44)"],"0$1",0,"$1 $2 $3"],["(\\d{2})(\\d{2,3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["1[13689]|2[0136]|3[1356]|4[0246]|54|6[03]|90[1-9]"],"0$1",0,"$1 $2 $3 $4"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4",["10|7"],"0$1",0,"$1 $2 $3 $4"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1-$2 $3 $4",["8"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1-$2 $3 $4",["[13-5]|2(?:[247-9]|5[0138])|6(?:[124-689]|7[0-2])|9(?:[125-8]|3[02-5]|4[0-3])"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{2})(\\d{3})","$1-$2 $3 $4",["9"],"0$1",0,"$1 $2 $3 $4"],["(\\d{3})(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1-$2 $3 $4 $5",["[26]"],"0$1",0,"$1 $2 $3 $4 $5"]],"0"],SG:["65","0[0-3]\\d","(?:(?:1\\d|8)\\d\\d|7000)\\d{7}|[3689]\\d{7}",[8,10,11],[["(\\d{4})(\\d{4})","$1 $2",["[369]|8(?:0[1-9]|[1-9])"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"]],["(\\d{4})(\\d{4})(\\d{3})","$1 $2 $3",["7"]],["(\\d{4})(\\d{3})(\\d{4})","$1 $2 $3",["1"]]]],SH:["290","00","(?:[256]\\d|8)\\d{3}",[4,5],0,0,0,0,0,0,"[256]"],SI:["386","00|10(?:22|66|88|99)","[1-7]\\d{7}|8\\d{4,7}|90\\d{4,6}",[5,6,7,8],[["(\\d{2})(\\d{3,6})","$1 $2",["8[09]|9"],"0$1"],["(\\d{3})(\\d{5})","$1 $2",["59|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[37][01]|4[0139]|51|6"],"0$1"],["(\\d)(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[1-57]"],"(0$1)"]],"0",0,0,0,0,0,0,"00"],SJ:["47","00","0\\d{4}|(?:[489]\\d|79)\\d{6}",[5,8],0,0,0,0,0,0,"79"],SK:["421","00","[2-689]\\d{8}|[2-59]\\d{6}|[2-5]\\d{5}",[6,7,9],[["(\\d)(\\d{2})(\\d{3,4})","$1 $2 $3",["21"],"0$1"],["(\\d{2})(\\d{2})(\\d{2,3})","$1 $2 $3",["[3-5][1-8]1","[3-5][1-8]1[67]"],"0$1"],["(\\d)(\\d{3})(\\d{3})(\\d{2})","$1/$2 $3 $4",["2"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[689]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1/$2 $3 $4",["[3-5]"],"0$1"]],"0"],SL:["232","00","(?:[237-9]\\d|66)\\d{6}",[8],[["(\\d{2})(\\d{6})","$1 $2",["[236-9]"],"(0$1)"]],"0"],SM:["378","00","(?:0549|[5-7]\\d)\\d{6}",[8,10],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[5-7]"]],["(\\d{4})(\\d{6})","$1 $2",["0"]]],0,0,"([89]\\d{5})$","0549$1"],SN:["221","00","(?:[378]\\d|93)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[379]"]]]],SO:["252","00","[346-9]\\d{8}|[12679]\\d{7}|[1-5]\\d{6}|[1348]\\d{5}",[6,7,8,9],[["(\\d{2})(\\d{4})","$1 $2",["8[125]"]],["(\\d{6})","$1",["[134]"]],["(\\d)(\\d{6})","$1 $2",["[15]|2[0-79]|3[0-46-8]|4[0-7]"]],["(\\d)(\\d{7})","$1 $2",["(?:2|90)4|[67]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[348]|64|79|90"]],["(\\d{2})(\\d{5,7})","$1 $2",["1|28|6[0-35-9]|77|9[2-9]"]]],"0"],SR:["597","00","(?:[2-5]|68|[78]\\d)\\d{5}",[6,7],[["(\\d{2})(\\d{2})(\\d{2})","$1-$2-$3",["56"]],["(\\d{3})(\\d{3})","$1-$2",["[2-5]"]],["(\\d{3})(\\d{4})","$1-$2",["[6-8]"]]]],SS:["211","00","[19]\\d{8}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[19]"],"0$1"]],"0"],ST:["239","00","(?:22|9\\d)\\d{5}",[7],[["(\\d{3})(\\d{4})","$1 $2",["[29]"]]]],SV:["503","00","[267]\\d{7}|(?:80\\d|900)\\d{4}(?:\\d{4})?",[7,8,11],[["(\\d{3})(\\d{4})","$1 $2",["[89]"]],["(\\d{4})(\\d{4})","$1 $2",["[267]"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["[89]"]]]],SX:["1","011","7215\\d{6}|(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"(5\\d{6})$|1","721$1",0,"721"],SY:["963","00","[1-39]\\d{8}|[1-5]\\d{7}",[8,9],[["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-5]"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1",1]],"0"],SZ:["268","00","0800\\d{4}|(?:[237]\\d|900)\\d{6}",[8,9],[["(\\d{4})(\\d{4})","$1 $2",["[0237]"]],["(\\d{5})(\\d{4})","$1 $2",["9"]]]],TA:["290","00","8\\d{3}",[4],0,0,0,0,0,0,"8"],TC:["1","011","(?:[58]\\d\\d|649|900)\\d{7}",[10],0,"1",0,"([2-479]\\d{6})$|1","649$1",0,"649"],TD:["235","00|16","(?:22|[69]\\d|77)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[2679]"]]],0,0,0,0,0,0,0,"00"],TG:["228","00","[279]\\d{7}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[279]"]]]],TH:["66","00[1-9]","(?:001800|[2-57]|[689]\\d)\\d{7}|1\\d{7,9}",[8,9,10,13],[["(\\d)(\\d{3})(\\d{4})","$1 $2 $3",["2"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[13-9]"],"0$1"],["(\\d{4})(\\d{3})(\\d{3})","$1 $2 $3",["1"]]],"0"],TJ:["992","810","[0-57-9]\\d{8}",[9],[["(\\d{6})(\\d)(\\d{2})","$1 $2 $3",["331","3317"]],["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["44[02-479]|[34]7"]],["(\\d{4})(\\d)(\\d{4})","$1 $2 $3",["3[1-5]"]],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[0-57-9]"]]],0,0,0,0,0,0,0,"8~10"],TK:["690","00","[2-47]\\d{3,6}",[4,5,6,7]],TL:["670","00","7\\d{7}|(?:[2-47]\\d|[89]0)\\d{5}",[7,8],[["(\\d{3})(\\d{4})","$1 $2",["[2-489]|70"]],["(\\d{4})(\\d{4})","$1 $2",["7"]]]],TM:["993","810","(?:[1-6]\\d|71)\\d{6}",[8],[["(\\d{2})(\\d{2})(\\d{2})(\\d{2})","$1 $2-$3-$4",["12"],"(8 $1)"],["(\\d{3})(\\d)(\\d{2})(\\d{2})","$1 $2-$3-$4",["[1-5]"],"(8 $1)"],["(\\d{2})(\\d{6})","$1 $2",["[67]"],"8 $1"]],"8",0,0,0,0,0,0,"8~10"],TN:["216","00","[2-57-9]\\d{7}",[8],[["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-57-9]"]]]],TO:["676","00","(?:0800|(?:[5-8]\\d\\d|999)\\d)\\d{3}|[2-8]\\d{4}",[5,7],[["(\\d{2})(\\d{3})","$1-$2",["[2-4]|50|6[09]|7[0-24-69]|8[05]"]],["(\\d{4})(\\d{3})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[5-9]"]]]],TR:["90","00","4\\d{6}|8\\d{11,12}|(?:[2-58]\\d\\d|900)\\d{7}",[7,10,12,13],[["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["512|8[01589]|90"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["5(?:[0-59]|61)","5(?:[0-59]|61[06])","5(?:[0-59]|61[06]1)"],"0$1",1],["(\\d{3})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[24][1-8]|3[1-9]"],"(0$1)",1],["(\\d{3})(\\d{3})(\\d{6,7})","$1 $2 $3",["80"],"0$1",1]],"0"],TT:["1","011","(?:[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-46-8]\\d{6})$|1","868$1",0,"868"],TV:["688","00","(?:2|7\\d\\d|90)\\d{4}",[5,6,7],[["(\\d{2})(\\d{3})","$1 $2",["2"]],["(\\d{2})(\\d{4})","$1 $2",["90"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],TW:["886","0(?:0[25-79]|19)","[2-689]\\d{8}|7\\d{9,10}|[2-8]\\d{7}|2\\d{6}",[7,8,9,10,11],[["(\\d{2})(\\d)(\\d{4})","$1 $2 $3",["202"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["[258]0"],"0$1"],["(\\d)(\\d{3,4})(\\d{4})","$1 $2 $3",["[23568]|4(?:0[02-48]|[1-47-9])|7[1-9]","[23568]|4(?:0[2-48]|[1-47-9])|(?:400|7)[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[49]"],"0$1"],["(\\d{2})(\\d{4})(\\d{4,5})","$1 $2 $3",["7"],"0$1"]],"0",0,0,0,0,0,0,0,"#"],TZ:["255","00[056]","(?:[25-8]\\d|41|90)\\d{7}",[9],[["(\\d{3})(\\d{2})(\\d{4})","$1 $2 $3",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[24]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["5"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[67]"],"0$1"]],"0"],UA:["380","00","[89]\\d{9}|[3-9]\\d{8}",[9,10],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["6[12][29]|(?:3[1-8]|4[136-8]|5[12457]|6[49])2|(?:56|65)[24]","6[12][29]|(?:35|4[1378]|5[12457]|6[49])2|(?:56|65)[24]|(?:3[1-46-8]|46)2[013-9]"],"0$1"],["(\\d{4})(\\d{5})","$1 $2",["3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6[0135689]|7[4-6])|6(?:[12][3-7]|[459])","3[1-8]|4(?:[1367]|[45][6-9]|8[4-6])|5(?:[1-5]|6(?:[015689]|3[02389])|7[4-6])|6(?:[12][3-7]|[459])"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[3-7]|89|9[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["[89]"],"0$1"]],"0",0,0,0,0,0,0,"0~0"],UG:["256","00[057]","800\\d{6}|(?:[29]0|[347]\\d)\\d{7}",[9],[["(\\d{4})(\\d{5})","$1 $2",["202","2024"],"0$1"],["(\\d{3})(\\d{6})","$1 $2",["[27-9]|4(?:6[45]|[7-9])"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[34]"],"0$1"]],"0"],US:["1","011","[2-9]\\d{9}|3\\d{6}",[10],[["(\\d{3})(\\d{4})","$1-$2",["310"],0,1],["(\\d{3})(\\d{3})(\\d{4})","($1) $2-$3",["[2-9]"],0,1,"$1-$2-$3"]],"1",0,0,0,0,0,[["(?:5056(?:[0-35-9]\\d|4[468])|7302[0-4]\\d)\\d{4}|(?:472[24]|505[2-57-9]|7306|983[2-47-9])\\d{6}|(?:2(?:0[1-35-9]|1[02-9]|2[03-57-9]|3[1459]|4[08]|5[1-46]|6[0279]|7[0269]|8[13])|3(?:0[1-57-9]|1[02-9]|2[013569]|3[0-24679]|4[167]|5[0-2]|6[01349]|8[056])|4(?:0[124-9]|1[02-579]|2[3-5]|3[0245]|4[023578]|58|6[349]|7[0589]|8[04])|5(?:0[1-47-9]|1[0235-8]|20|3[0149]|4[01]|5[179]|6[1-47]|7[0-5]|8[0256])|6(?:0[1-35-9]|1[024-9]|2[03689]|3[016]|4[0156]|5[01679]|6[0-279]|78|8[0-29])|7(?:0[1-46-8]|1[2-9]|2[04-8]|3[1247]|4[037]|5[47]|6[02359]|7[0-59]|8[156])|8(?:0[1-68]|1[02-8]|2[068]|3[0-2589]|4[03578]|5[046-9]|6[02-5]|7[028])|9(?:0[1346-9]|1[02-9]|2[0589]|3[0146-8]|4[01357-9]|5[12469]|7[0-389]|8[04-69]))[2-9]\\d{6}"],[""],["8(?:00|33|44|55|66|77|88)[2-9]\\d{6}"],["900[2-9]\\d{6}"],["52(?:3(?:[2-46-9][02-9]\\d|5(?:[02-46-9]\\d|5[0-46-9]))|4(?:[2-478][02-9]\\d|5(?:[034]\\d|2[024-9]|5[0-46-9])|6(?:0[1-9]|[2-9]\\d)|9(?:[05-9]\\d|2[0-5]|49)))\\d{4}|52[34][2-9]1[02-9]\\d{4}|5(?:00|2[125-9]|33|44|66|77|88)[2-9]\\d{6}"]]],UY:["598","0(?:0|1[3-9]\\d)","0004\\d{2,9}|[1249]\\d{7}|(?:[49]\\d|80)\\d{5}",[6,7,8,9,10,11,12,13],[["(\\d{3})(\\d{3,4})","$1 $2",["0"]],["(\\d{3})(\\d{4})","$1 $2",["[49]0|8"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["9"],"0$1"],["(\\d{4})(\\d{4})","$1 $2",["[124]"]],["(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3",["0"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{2,4})","$1 $2 $3 $4",["0"]]],"0",0,0,0,0,0,0,"00"," int. "],UZ:["998","00","(?:20|33|[5-79]\\d|88)\\d{7}",[9],[["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["[235-9]"]]]],VA:["39","00","0\\d{5,10}|3[0-8]\\d{7,10}|55\\d{8}|8\\d{5}(?:\\d{2,4})?|(?:1\\d|39)\\d{7,8}",[6,7,8,9,10,11],0,0,0,0,0,0,"06698"],VC:["1","011","(?:[58]\\d\\d|784|900)\\d{7}",[10],0,"1",0,"([2-7]\\d{6})$|1","784$1",0,"784"],VE:["58","00","[68]00\\d{7}|(?:[24]\\d|[59]0)\\d{8}",[10],[["(\\d{3})(\\d{7})","$1-$2",["[24-689]"],"0$1"]],"0"],VG:["1","011","(?:284|[58]\\d\\d|900)\\d{7}",[10],0,"1",0,"([2-578]\\d{6})$|1","284$1",0,"284"],VI:["1","011","[58]\\d{9}|(?:34|90)0\\d{7}",[10],0,"1",0,"([2-9]\\d{6})$|1","340$1",0,"340"],VN:["84","00","[12]\\d{9}|[135-9]\\d{8}|[16]\\d{7}|[16-8]\\d{6}",[7,8,9,10],[["(\\d{2})(\\d{5})","$1 $2",["80"],"0$1",1],["(\\d{4})(\\d{4,6})","$1 $2",["1"],0,1],["(\\d{2})(\\d{3})(\\d{2})(\\d{2})","$1 $2 $3 $4",["6"],"0$1",1],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[357-9]"],"0$1",1],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["2[48]"],"0$1",1],["(\\d{3})(\\d{4})(\\d{3})","$1 $2 $3",["2"],"0$1",1]],"0"],VU:["678","00","[57-9]\\d{6}|(?:[238]\\d|48)\\d{3}",[5,7],[["(\\d{3})(\\d{4})","$1 $2",["[57-9]"]]]],WF:["681","00","(?:40|72)\\d{4}|8\\d{5}(?:\\d{3})?",[6,9],[["(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3",["[478]"]],["(\\d{3})(\\d{2})(\\d{2})(\\d{2})","$1 $2 $3 $4",["8"]]]],WS:["685","0","(?:[2-6]|8\\d{5})\\d{4}|[78]\\d{6}|[68]\\d{5}",[5,6,7,10],[["(\\d{5})","$1",["[2-5]|6[1-9]"]],["(\\d{3})(\\d{3,7})","$1 $2",["[68]"]],["(\\d{2})(\\d{5})","$1 $2",["7"]]]],XK:["383","00","2\\d{7,8}|3\\d{7,11}|(?:4\\d\\d|[89]00)\\d{5}",[8,9,10,11,12],[["(\\d{3})(\\d{5})","$1 $2",["[89]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3})","$1 $2 $3",["[2-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["2|39"],"0$1"],["(\\d{2})(\\d{7,10})","$1 $2",["3"],"0$1"]],"0"],YE:["967","00","(?:1|7\\d)\\d{7}|[1-7]\\d{6}",[7,8,9],[["(\\d)(\\d{3})(\\d{3,4})","$1 $2 $3",["[1-6]|7(?:[24-6]|8[0-7])"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["7"],"0$1"]],"0"],YT:["262","00","(?:80|9\\d)\\d{7}|(?:26|63)9\\d{6}",[9],0,"0",0,0,0,0,0,[["269(?:0[0-467]|15|5[0-4]|6\\d|[78]0)\\d{4}"],["639(?:0[0-79]|1[019]|[267]\\d|3[09]|40|5[05-9]|9[04-79])\\d{4}"],["80\\d{7}"],0,0,0,0,0,["9(?:(?:39|47)8[01]|769\\d)\\d{4}"]]],ZA:["27","00","[1-79]\\d{8}|8\\d{4,9}",[5,6,7,8,9,10],[["(\\d{2})(\\d{3,4})","$1 $2",["8[1-4]"],"0$1"],["(\\d{2})(\\d{3})(\\d{2,3})","$1 $2 $3",["8[1-4]"],"0$1"],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["860"],"0$1"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["[1-9]"],"0$1"],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["8"],"0$1"]],"0"],ZM:["260","00","800\\d{6}|(?:21|63|[79]\\d)\\d{7}",[9],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[28]"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["[79]"],"0$1"]],"0"],ZW:["263","00","2(?:[0-57-9]\\d{6,8}|6[0-24-9]\\d{6,7})|[38]\\d{9}|[35-8]\\d{8}|[3-6]\\d{7}|[1-689]\\d{6}|[1-3569]\\d{5}|[1356]\\d{4}",[5,6,7,8,9,10],[["(\\d{3})(\\d{3,5})","$1 $2",["2(?:0[45]|2[278]|[49]8)|3(?:[09]8|17)|6(?:[29]8|37|75)|[23][78]|(?:33|5[15]|6[68])[78]"],"0$1"],["(\\d)(\\d{3})(\\d{2,4})","$1 $2 $3",["[49]"],"0$1"],["(\\d{3})(\\d{4})","$1 $2",["80"],"0$1"],["(\\d{2})(\\d{7})","$1 $2",["24|8[13-59]|(?:2[05-79]|39|5[45]|6[15-8])2","2(?:02[014]|4|[56]20|[79]2)|392|5(?:42|525)|6(?:[16-8]21|52[013])|8[13-59]"],"(0$1)"],["(\\d{2})(\\d{3})(\\d{4})","$1 $2 $3",["7"],"0$1"],["(\\d{3})(\\d{3})(\\d{3,4})","$1 $2 $3",["2(?:1[39]|2[0157]|[378]|[56][14])|3(?:12|29)","2(?:1[39]|2[0157]|[378]|[56][14])|3(?:123|29)"],"0$1"],["(\\d{4})(\\d{6})","$1 $2",["8"],"0$1"],["(\\d{2})(\\d{3,5})","$1 $2",["1|2(?:0[0-36-9]|12|29|[56])|3(?:1[0-689]|[24-6])|5(?:[0236-9]|1[2-4])|6(?:[013-59]|7[0-46-9])|(?:33|55|6[68])[0-69]|(?:29|3[09]|62)[0-79]"],"0$1"],["(\\d{2})(\\d{3})(\\d{3,4})","$1 $2 $3",["29[013-9]|39|54"],"0$1"],["(\\d{4})(\\d{3,5})","$1 $2",["(?:25|54)8","258|5483"],"0$1"]],"0"]},nonGeographic:{800:["800",0,"(?:00|[1-9]\\d)\\d{6}",[8],[["(\\d{4})(\\d{4})","$1 $2",["\\d"]]],0,0,0,0,0,0,[0,0,["(?:00|[1-9]\\d)\\d{6}"]]],808:["808",0,"[1-9]\\d{7}",[8],[["(\\d{4})(\\d{4})","$1 $2",["[1-9]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,0,["[1-9]\\d{7}"]]],870:["870",0,"7\\d{11}|[35-7]\\d{8}",[9,12],[["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["[35-7]"]]],0,0,0,0,0,0,[0,["(?:[356]|774[45])\\d{8}|7[6-8]\\d{7}"]]],878:["878",0,"10\\d{10}",[12],[["(\\d{2})(\\d{5})(\\d{5})","$1 $2 $3",["1"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["10\\d{10}"]]],881:["881",0,"6\\d{9}|[0-36-9]\\d{8}",[9,10],[["(\\d)(\\d{3})(\\d{5})","$1 $2 $3",["[0-37-9]"]],["(\\d)(\\d{3})(\\d{5,6})","$1 $2 $3",["6"]]],0,0,0,0,0,0,[0,["6\\d{9}|[0-36-9]\\d{8}"]]],882:["882",0,"[13]\\d{6}(?:\\d{2,5})?|[19]\\d{7}|(?:[25]\\d\\d|4)\\d{7}(?:\\d{2})?",[7,8,9,10,11,12],[["(\\d{2})(\\d{5})","$1 $2",["16|342"]],["(\\d{2})(\\d{6})","$1 $2",["49"]],["(\\d{2})(\\d{2})(\\d{4})","$1 $2 $3",["1[36]|9"]],["(\\d{2})(\\d{4})(\\d{3})","$1 $2 $3",["3[23]"]],["(\\d{2})(\\d{3,4})(\\d{4})","$1 $2 $3",["16"]],["(\\d{2})(\\d{4})(\\d{4})","$1 $2 $3",["10|23|3(?:[15]|4[57])|4|51"]],["(\\d{3})(\\d{4})(\\d{4})","$1 $2 $3",["34"]],["(\\d{2})(\\d{4,5})(\\d{5})","$1 $2 $3",["[1-35]"]]],0,0,0,0,0,0,[0,["342\\d{4}|(?:337|49)\\d{6}|(?:3(?:2|47|7\\d{3})|50\\d{3})\\d{7}",[7,8,9,10,12]],0,0,0,0,0,0,["1(?:3(?:0[0347]|[13][0139]|2[035]|4[013568]|6[0459]|7[06]|8[15-8]|9[0689])\\d{4}|6\\d{5,10})|(?:345\\d|9[89])\\d{6}|(?:10|2(?:3|85\\d)|3(?:[15]|[69]\\d\\d)|4[15-8]|51)\\d{8}"]]],883:["883",0,"(?:[1-4]\\d|51)\\d{6,10}",[8,9,10,11,12],[["(\\d{3})(\\d{3})(\\d{2,8})","$1 $2 $3",["[14]|2[24-689]|3[02-689]|51[24-9]"]],["(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3",["510"]],["(\\d{3})(\\d{3})(\\d{4})","$1 $2 $3",["21"]],["(\\d{4})(\\d{4})(\\d{4})","$1 $2 $3",["51[13]"]],["(\\d{3})(\\d{3})(\\d{3})(\\d{3})","$1 $2 $3 $4",["[235]"]]],0,0,0,0,0,0,[0,0,0,0,0,0,0,0,["(?:2(?:00\\d\\d|10)|(?:370[1-9]|51\\d0)\\d)\\d{7}|51(?:00\\d{5}|[24-9]0\\d{4,7})|(?:1[0-79]|2[24-689]|3[02-689]|4[0-4])0\\d{5,9}"]]],888:["888",0,"\\d{11}",[11],[["(\\d{3})(\\d{3})(\\d{5})","$1 $2 $3"]],0,0,0,0,0,0,[0,0,0,0,0,0,["\\d{11}"]]],979:["979",0,"[1359]\\d{8}",[9],[["(\\d)(\\d{4})(\\d{4})","$1 $2 $3",["[1359]"]]],0,0,0,0,0,0,[0,0,0,["[1359]\\d{8}"]]]}};function m2(e,t){var n=Array.prototype.slice.call(t);return n.push(g2),e.apply(this,n)}function La(e){"@babel/helpers - typeof";return La=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},La(e)}function C2(e,t,n){return Object.defineProperty(e,"prototype",{writable:!1}),e}function E2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S2(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vn(e,t)}function $2(e){var t=Gu();return function(){var r=gn(e),i;if(t){var a=gn(this).constructor;i=Reflect.construct(r,arguments,a)}else i=r.apply(this,arguments);return b2(this,i)}}function b2(e,t){if(t&&(La(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vu(e)}function Vu(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oa(e){var t=typeof Map=="function"?new Map:void 0;return Oa=function(r){if(r===null||!x2(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,i)}function i(){return Vn(r,arguments,gn(this).constructor)}return i.prototype=Object.create(r.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),vn(i,r)},Oa(e)}function Vn(e,t,n){return Gu()?Vn=Reflect.construct:Vn=function(i,a,s){var o=[null];o.push.apply(o,a);var l=Function.bind.apply(i,o),d=new l;return s&&vn(d,s.prototype),d},Vn.apply(null,arguments)}function Gu(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x2(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function vn(e,t){return vn=Object.setPrototypeOf||function(r,i){return r.__proto__=i,r},vn(e,t)}function gn(e){return gn=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},gn(e)}var jt=function(e){S2(n,e);var t=$2(n);function n(r){var i;return E2(this,n),i=t.call(this,r),Object.setPrototypeOf(Vu(i),n.prototype),i.name=i.constructor.name,i}return C2(n)}(Oa(Error)),Cs=2,T2=17,I2=3,It="0-9０-９٠-٩۰-۹",A2="-‐-―−ー－",w2="／/",B2="．.",R2="  ­​⁠　",_2="()（）［］\\[\\]",N2="~⁓∼～",oi="".concat(A2).concat(w2).concat(B2).concat(R2).concat(_2).concat(N2),Es="+＋";function No(e,t){e=e.split("-"),t=t.split("-");for(var n=e[0].split("."),r=t[0].split("."),i=0;i<3;i++){var a=Number(n[i]),s=Number(r[i]);if(a>s)return 1;if(s>a)return-1;if(!isNaN(a)&&isNaN(s))return 1;if(isNaN(a)&&!isNaN(s))return-1}return e[1]&&t[1]?e[1]>t[1]?1:e[1]<t[1]?-1:0:!e[1]&&t[1]?1:e[1]&&!t[1]?-1:0}var P2={}.constructor;function Gn(e){return e!=null&&e.constructor===P2}function Da(e){"@babel/helpers - typeof";return Da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Da(e)}function xi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ti(e,t,n){return t&&L2(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var O2="1.2.0",D2="1.7.35",Po=" ext. ",k2=/^\d+$/,st=function(){function e(t){xi(this,e),K2(t),this.metadata=t,Wu.call(this,t)}return Ti(e,[{key:"getCountries",value:function(){return Object.keys(this.metadata.countries).filter(function(n){return n!=="001"})}},{key:"getCountryMetadata",value:function(n){return this.metadata.countries[n]}},{key:"nonGeographic",value:function(){if(!(this.v1||this.v2||this.v3))return this.metadata.nonGeographic||this.metadata.nonGeographical}},{key:"hasCountry",value:function(n){return this.getCountryMetadata(n)!==void 0}},{key:"hasCallingCode",value:function(n){if(this.getCountryCodesForCallingCode(n))return!0;if(this.nonGeographic()){if(this.nonGeographic()[n])return!0}else{var r=this.countryCallingCodes()[n];if(r&&r.length===1&&r[0]==="001")return!0}}},{key:"isNonGeographicCallingCode",value:function(n){return this.nonGeographic()?!!this.nonGeographic()[n]:!this.getCountryCodesForCallingCode(n)}},{key:"country",value:function(n){return this.selectNumberingPlan(n)}},{key:"selectNumberingPlan",value:function(n,r){if(n&&k2.test(n)&&(r=n,n=null),n&&n!=="001"){if(!this.hasCountry(n))throw new Error("Unknown country: ".concat(n));this.numberingPlan=new Lo(this.getCountryMetadata(n),this)}else if(r){if(!this.hasCallingCode(r))throw new Error("Unknown calling code: ".concat(r));this.numberingPlan=new Lo(this.getNumberingPlanMetadata(r),this)}else this.numberingPlan=void 0;return this}},{key:"getCountryCodesForCallingCode",value:function(n){var r=this.countryCallingCodes()[n];if(r)return r.length===1&&r[0].length===3?void 0:r}},{key:"getCountryCodeForCallingCode",value:function(n){var r=this.getCountryCodesForCallingCode(n);if(r)return r[0]}},{key:"getNumberingPlanMetadata",value:function(n){var r=this.getCountryCodeForCallingCode(n);if(r)return this.getCountryMetadata(r);if(this.nonGeographic()){var i=this.nonGeographic()[n];if(i)return i}else{var a=this.countryCallingCodes()[n];if(a&&a.length===1&&a[0]==="001")return this.metadata.countries["001"]}}},{key:"countryCallingCode",value:function(){return this.numberingPlan.callingCode()}},{key:"IDDPrefix",value:function(){return this.numberingPlan.IDDPrefix()}},{key:"defaultIDDPrefix",value:function(){return this.numberingPlan.defaultIDDPrefix()}},{key:"nationalNumberPattern",value:function(){return this.numberingPlan.nationalNumberPattern()}},{key:"possibleLengths",value:function(){return this.numberingPlan.possibleLengths()}},{key:"formats",value:function(){return this.numberingPlan.formats()}},{key:"nationalPrefixForParsing",value:function(){return this.numberingPlan.nationalPrefixForParsing()}},{key:"nationalPrefixTransformRule",value:function(){return this.numberingPlan.nationalPrefixTransformRule()}},{key:"leadingDigits",value:function(){return this.numberingPlan.leadingDigits()}},{key:"hasTypes",value:function(){return this.numberingPlan.hasTypes()}},{key:"type",value:function(n){return this.numberingPlan.type(n)}},{key:"ext",value:function(){return this.numberingPlan.ext()}},{key:"countryCallingCodes",value:function(){return this.v1?this.metadata.country_phone_code_to_countries:this.metadata.country_calling_codes}},{key:"chooseCountryByCountryCallingCode",value:function(n){return this.selectNumberingPlan(n)}},{key:"hasSelectedNumberingPlan",value:function(){return this.numberingPlan!==void 0}}]),e}(),Lo=function(){function e(t,n){xi(this,e),this.globalMetadataObject=n,this.metadata=t,Wu.call(this,n.metadata)}return Ti(e,[{key:"callingCode",value:function(){return this.metadata[0]}},{key:"getDefaultCountryMetadataForRegion",value:function(){return this.globalMetadataObject.getNumberingPlanMetadata(this.callingCode())}},{key:"IDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[1]}},{key:"defaultIDDPrefix",value:function(){if(!(this.v1||this.v2))return this.metadata[12]}},{key:"nationalNumberPattern",value:function(){return this.v1||this.v2?this.metadata[1]:this.metadata[2]}},{key:"possibleLengths",value:function(){if(!this.v1)return this.metadata[this.v2?2:3]}},{key:"_getFormats",value:function(n){return n[this.v1?2:this.v2?3:4]}},{key:"formats",value:function(){var n=this,r=this._getFormats(this.metadata)||this._getFormats(this.getDefaultCountryMetadataForRegion())||[];return r.map(function(i){return new U2(i,n)})}},{key:"nationalPrefix",value:function(){return this.metadata[this.v1?3:this.v2?4:5]}},{key:"_getNationalPrefixFormattingRule",value:function(n){return n[this.v1?4:this.v2?5:6]}},{key:"nationalPrefixFormattingRule",value:function(){return this._getNationalPrefixFormattingRule(this.metadata)||this._getNationalPrefixFormattingRule(this.getDefaultCountryMetadataForRegion())}},{key:"_nationalPrefixForParsing",value:function(){return this.metadata[this.v1?5:this.v2?6:7]}},{key:"nationalPrefixForParsing",value:function(){return this._nationalPrefixForParsing()||this.nationalPrefix()}},{key:"nationalPrefixTransformRule",value:function(){return this.metadata[this.v1?6:this.v2?7:8]}},{key:"_getNationalPrefixIsOptionalWhenFormatting",value:function(){return!!this.metadata[this.v1?7:this.v2?8:9]}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return this._getNationalPrefixIsOptionalWhenFormatting(this.metadata)||this._getNationalPrefixIsOptionalWhenFormatting(this.getDefaultCountryMetadataForRegion())}},{key:"leadingDigits",value:function(){return this.metadata[this.v1?8:this.v2?9:10]}},{key:"types",value:function(){return this.metadata[this.v1?9:this.v2?10:11]}},{key:"hasTypes",value:function(){return this.types()&&this.types().length===0?!1:!!this.types()}},{key:"type",value:function(n){if(this.hasTypes()&&Oo(this.types(),n))return new M2(Oo(this.types(),n),this)}},{key:"ext",value:function(){return this.v1||this.v2?Po:this.metadata[13]||Po}}]),e}(),U2=function(){function e(t,n){xi(this,e),this._format=t,this.metadata=n}return Ti(e,[{key:"pattern",value:function(){return this._format[0]}},{key:"format",value:function(){return this._format[1]}},{key:"leadingDigitsPatterns",value:function(){return this._format[2]||[]}},{key:"nationalPrefixFormattingRule",value:function(){return this._format[3]||this.metadata.nationalPrefixFormattingRule()}},{key:"nationalPrefixIsOptionalWhenFormattingInNationalFormat",value:function(){return!!this._format[4]||this.metadata.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"nationalPrefixIsMandatoryWhenFormattingInNationalFormat",value:function(){return this.usesNationalPrefix()&&!this.nationalPrefixIsOptionalWhenFormattingInNationalFormat()}},{key:"usesNationalPrefix",value:function(){return!!(this.nationalPrefixFormattingRule()&&!F2.test(this.nationalPrefixFormattingRule()))}},{key:"internationalFormat",value:function(){return this._format[5]||this.format()}}]),e}(),F2=/^\(?\$1\)?$/,M2=function(){function e(t,n){xi(this,e),this.type=t,this.metadata=n}return Ti(e,[{key:"pattern",value:function(){return this.metadata.v1?this.type:this.type[0]}},{key:"possibleLengths",value:function(){if(!this.metadata.v1)return this.type[1]||this.metadata.possibleLengths()}}]),e}();function Oo(e,t){switch(t){case"FIXED_LINE":return e[0];case"MOBILE":return e[1];case"TOLL_FREE":return e[2];case"PREMIUM_RATE":return e[3];case"PERSONAL_NUMBER":return e[4];case"VOICEMAIL":return e[5];case"UAN":return e[6];case"PAGER":return e[7];case"VOIP":return e[8];case"SHARED_COST":return e[9]}}function K2(e){if(!e)throw new Error("[libphonenumber-js] `metadata` argument not passed. Check your arguments.");if(!Gn(e)||!Gn(e.countries))throw new Error("[libphonenumber-js] `metadata` argument was passed but it's not a valid metadata. Must be an object having `.countries` child object property. Got ".concat(Gn(e)?"an object of shape: { "+Object.keys(e).join(", ")+" }":"a "+V2(e)+": "+e,"."))}var V2=function(t){return Da(t)};function Ss(e,t){if(t=new st(t),t.hasCountry(e))return t.country(e).countryCallingCode();throw new Error("Unknown country: ".concat(e))}function G2(e,t){return t.countries.hasOwnProperty(e)}function Wu(e){var t=e.version;typeof t=="number"?(this.v1=t===1,this.v2=t===2,this.v3=t===3,this.v4=t===4):t?No(t,O2)===-1?this.v2=!0:No(t,D2)===-1?this.v3=!0:this.v4=!0:this.v1=!0}var W2=";ext=",Ar=function(t){return"([".concat(It,"]{1,").concat(t,"})")};function Hu(e){var t="20",n="15",r="9",i="6",a="[  \\t,]*",s="[:\\.．]?[  \\t,-]*",o="#?",l="(?:e?xt(?:ensi(?:ó?|ó))?n?|ｅ?ｘｔｎ?|доб|anexo)",d="(?:[xｘ#＃~～]|int|ｉｎｔ)",u="[- ]+",c="[  \\t]*",f="(?:,{2}|;)",g=W2+Ar(t),h=a+l+s+Ar(t)+o,m=a+d+s+Ar(r)+o,E=u+Ar(i)+"#",b=c+f+s+Ar(n)+o,I=c+"(?:,)+"+s+Ar(r)+o;return g+"|"+h+"|"+m+"|"+E+"|"+b+"|"+I}var H2="["+It+"]{"+Cs+"}",q2="["+Es+"]{0,1}(?:["+oi+"]*["+It+"]){3,}["+oi+It+"]*",j2=new RegExp("^["+Es+"]{0,1}(?:["+oi+"]*["+It+"]){1,2}$","i"),z2=q2+"(?:"+Hu()+")?",Q2=new RegExp("^"+H2+"$|^"+z2+"$","i");function Y2(e){return e.length>=Cs&&Q2.test(e)}function X2(e){return j2.test(e)}var Do=new RegExp("(?:"+Hu()+")$","i");function J2(e){var t=e.search(Do);if(t<0)return{};for(var n=e.slice(0,t),r=e.match(Do),i=1;i<r.length;){if(r[i])return{number:n,ext:r[i]};i++}}var Z2={0:"0",1:"1",2:"2",3:"3",4:"4",5:"5",6:"6",7:"7",8:"8",9:"9","０":"0","１":"1","２":"2","３":"3","４":"4","５":"5","６":"6","７":"7","８":"8","９":"9","٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","۰":"0","۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9"};function ey(e){return Z2[e]}function ty(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=ry(e))||t){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ry(e,t){if(e){if(typeof e=="string")return ko(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ko(e,t)}}function ko(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Uo(e){for(var t="",n=ty(e.split("")),r;!(r=n()).done;){var i=r.value;t+=ny(i,t)||""}return t}function ny(e,t,n){return e==="+"?t?void 0:"+":ey(e)}function $s(e,t){return iy(e,void 0,t)}function iy(e,t,n){var r=n.type(t),i=r&&r.possibleLengths()||n.possibleLengths();if(!i)return"IS_POSSIBLE";var a=e.length,s=i[0];return s===a?"IS_POSSIBLE":s>a?"TOO_SHORT":i[i.length-1]<a?"TOO_LONG":i.indexOf(a,1)>=0?"IS_POSSIBLE":"INVALID_LENGTH"}function ay(e,t,n){if(t===void 0&&(t={}),n=new st(n),t.v2){if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");n.selectNumberingPlan(e.countryCallingCode)}else{if(!e.phone)return!1;if(e.country){if(!n.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));n.country(e.country)}else{if(!e.countryCallingCode)throw new Error("Invalid phone number object passed");n.selectNumberingPlan(e.countryCallingCode)}}if(n.possibleLengths())return qu(e.phone||e.nationalNumber,n);if(e.countryCallingCode&&n.isNonGeographicCallingCode(e.countryCallingCode))return!0;throw new Error('Missing "possibleLengths" in metadata. Perhaps the metadata has been generated before v1.0.18.')}function qu(e,t){switch($s(e,t)){case"IS_POSSIBLE":return!0;default:return!1}}function Yt(e,t){return e=e||"",new RegExp("^(?:"+t+")$").test(e)}function sy(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=oy(e))||t){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oy(e,t){if(e){if(typeof e=="string")return Fo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fo(e,t)}}function Fo(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var uy=["MOBILE","PREMIUM_RATE","TOLL_FREE","SHARED_COST","VOIP","PERSONAL_NUMBER","PAGER","UAN","VOICEMAIL"];function bs(e,t,n){if(t=t||{},!(!e.country&&!e.countryCallingCode)){n=new st(n),n.selectNumberingPlan(e.country,e.countryCallingCode);var r=t.v2?e.nationalNumber:e.phone;if(Yt(r,n.nationalNumberPattern())){if(Yi(r,"FIXED_LINE",n))return n.type("MOBILE")&&n.type("MOBILE").pattern()===""||!n.type("MOBILE")||Yi(r,"MOBILE",n)?"FIXED_LINE_OR_MOBILE":"FIXED_LINE";for(var i=sy(uy),a;!(a=i()).done;){var s=a.value;if(Yi(r,s,n))return s}}}}function Yi(e,t,n){return t=n.type(t),!t||!t.pattern()||t.possibleLengths()&&t.possibleLengths().indexOf(e.length)<0?!1:Yt(e,t.pattern())}function ly(e,t,n){if(t=t||{},n=new st(n),n.selectNumberingPlan(e.country,e.countryCallingCode),n.hasTypes())return bs(e,t,n.metadata)!==void 0;var r=t.v2?e.nationalNumber:e.phone;return Yt(r,n.nationalNumberPattern())}function dy(e,t,n){var r=new st(n),i=r.getCountryCodesForCallingCode(e);return i?i.filter(function(a){return cy(t,a,n)}):[]}function cy(e,t,n){var r=new st(n);return r.selectNumberingPlan(t),r.numberingPlan.possibleLengths().indexOf(e.length)>=0}function fy(e){return e.replace(new RegExp("[".concat(oi,"]+"),"g")," ").trim()}var hy=/(\$\d)/;function py(e,t,n){var r=n.useInternationalFormat,i=n.withNationalPrefix,a=e.replace(new RegExp(t.pattern()),r?t.internationalFormat():i&&t.nationalPrefixFormattingRule()?t.format().replace(hy,t.nationalPrefixFormattingRule()):t.format());return r?fy(a):a}var yy=/^[\d]+(?:[~\u2053\u223C\uFF5E][\d]+)?$/;function vy(e,t,n){var r=new st(n);if(r.selectNumberingPlan(e,t),r.defaultIDDPrefix())return r.defaultIDDPrefix();if(yy.test(r.IDDPrefix()))return r.IDDPrefix()}function gy(e){var t=e.number,n=e.ext;if(!t)return"";if(t[0]!=="+")throw new Error('"formatRFC3966()" expects "number" to be in E.164 format.');return"tel:".concat(t).concat(n?";ext="+n:"")}function my(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=Cy(e))||t){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cy(e,t){if(e){if(typeof e=="string")return Mo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mo(e,t)}}function Mo(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ko(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ko(Object(n),!0).forEach(function(r){Ey(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ko(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ey(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Go={formatExtension:function(t,n,r){return"".concat(t).concat(r.ext()).concat(n)}};function Sy(e,t,n,r){if(n?n=Vo(Vo({},Go),n):n=Go,r=new st(r),e.country&&e.country!=="001"){if(!r.hasCountry(e.country))throw new Error("Unknown country: ".concat(e.country));r.country(e.country)}else if(e.countryCallingCode)r.selectNumberingPlan(e.countryCallingCode);else return e.phone||"";var i=r.countryCallingCode(),a=n.v2?e.nationalNumber:e.phone,s;switch(t){case"NATIONAL":return a?(s=ui(a,e.carrierCode,"NATIONAL",r,n),Xi(s,e.ext,r,n.formatExtension)):"";case"INTERNATIONAL":return a?(s=ui(a,null,"INTERNATIONAL",r,n),s="+".concat(i," ").concat(s),Xi(s,e.ext,r,n.formatExtension)):"+".concat(i);case"E.164":return"+".concat(i).concat(a);case"RFC3966":return gy({number:"+".concat(i).concat(a),ext:e.ext});case"IDD":if(!n.fromCountry)return;var o=by(a,e.carrierCode,i,n.fromCountry,r);return Xi(o,e.ext,r,n.formatExtension);default:throw new Error('Unknown "format" argument passed to "formatNumber()": "'.concat(t,'"'))}}function ui(e,t,n,r,i){var a=$y(r.formats(),e);return a?py(e,a,{useInternationalFormat:n==="INTERNATIONAL",withNationalPrefix:!(a.nationalPrefixIsOptionalWhenFormattingInNationalFormat()&&i&&i.nationalPrefix===!1),carrierCode:t,metadata:r}):e}function $y(e,t){for(var n=my(e),r;!(r=n()).done;){var i=r.value;if(i.leadingDigitsPatterns().length>0){var a=i.leadingDigitsPatterns()[i.leadingDigitsPatterns().length-1];if(t.search(a)!==0)continue}if(Yt(t,i.pattern()))return i}}function Xi(e,t,n,r){return t?r(e,t,n):e}function by(e,t,n,r,i){var a=Ss(r,i.metadata);if(a===n){var s=ui(e,t,"NATIONAL",i);return n==="1"?n+" "+s:s}var o=vy(r,void 0,i.metadata);if(o)return"".concat(o," ").concat(n," ").concat(ui(e,null,"INTERNATIONAL",i))}function Wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Ho(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wo(Object(n),!0).forEach(function(r){xy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wo(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xy(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ty(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Iy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ay(e,t,n){return t&&Iy(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var wy=function(){function e(t,n,r){if(Ty(this,e),!t)throw new TypeError("`country` or `countryCallingCode` not passed");if(!n)throw new TypeError("`nationalNumber` not passed");if(!r)throw new TypeError("`metadata` not passed");var i=Ry(t,r),a=i.country,s=i.countryCallingCode;this.country=a,this.countryCallingCode=s,this.nationalNumber=n,this.number="+"+this.countryCallingCode+this.nationalNumber,this.getMetadata=function(){return r}}return Ay(e,[{key:"setExt",value:function(n){this.ext=n}},{key:"getPossibleCountries",value:function(){return this.country?[this.country]:dy(this.countryCallingCode,this.nationalNumber,this.getMetadata())}},{key:"isPossible",value:function(){return ay(this,{v2:!0},this.getMetadata())}},{key:"isValid",value:function(){return ly(this,{v2:!0},this.getMetadata())}},{key:"isNonGeographic",value:function(){var n=new st(this.getMetadata());return n.isNonGeographicCallingCode(this.countryCallingCode)}},{key:"isEqual",value:function(n){return this.number===n.number&&this.ext===n.ext}},{key:"getType",value:function(){return bs(this,{v2:!0},this.getMetadata())}},{key:"format",value:function(n,r){return Sy(this,n,r?Ho(Ho({},r),{},{v2:!0}):{v2:!0},this.getMetadata())}},{key:"formatNational",value:function(n){return this.format("NATIONAL",n)}},{key:"formatInternational",value:function(n){return this.format("INTERNATIONAL",n)}},{key:"getURI",value:function(n){return this.format("RFC3966",n)}}]),e}(),By=function(t){return/^[A-Z]{2}$/.test(t)};function Ry(e,t){var n,r,i=new st(t);return By(e)?(n=e,i.selectNumberingPlan(n),r=i.countryCallingCode()):r=e,{country:n,countryCallingCode:r}}var _y=new RegExp("(["+It+"])");function Ny(e,t,n,r){if(t){var i=new st(r);i.selectNumberingPlan(t,n);var a=new RegExp(i.IDDPrefix());if(e.search(a)===0){e=e.slice(e.match(a)[0].length);var s=e.match(_y);if(!(s&&s[1]!=null&&s[1].length>0&&s[1]==="0"))return e}}}function Py(e,t){if(e&&t.numberingPlan.nationalPrefixForParsing()){var n=new RegExp("^(?:"+t.numberingPlan.nationalPrefixForParsing()+")"),r=n.exec(e);if(r){var i,a,s=r.length-1,o=s>0&&r[s];if(t.nationalPrefixTransformRule()&&o)i=e.replace(n,t.nationalPrefixTransformRule()),s>1&&(a=r[1]);else{var l=r[0];i=e.slice(l.length),o&&(a=r[1])}var d;if(o){var u=e.indexOf(r[1]),c=e.slice(0,u);c===t.numberingPlan.nationalPrefix()&&(d=t.numberingPlan.nationalPrefix())}else d=r[0];return{nationalNumber:i,nationalPrefix:d,carrierCode:a}}}return{nationalNumber:e}}function ka(e,t){var n=Py(e,t),r=n.carrierCode,i=n.nationalNumber;if(i!==e){if(!Ly(e,i,t))return{nationalNumber:e};if(t.possibleLengths()&&!Oy(i,t))return{nationalNumber:e}}return{nationalNumber:i,carrierCode:r}}function Ly(e,t,n){return!(Yt(e,n.nationalNumberPattern())&&!Yt(t,n.nationalNumberPattern()))}function Oy(e,t){switch($s(e,t)){case"TOO_SHORT":case"INVALID_LENGTH":return!1;default:return!0}}function Dy(e,t,n,r){var i=t?Ss(t,r):n;if(e.indexOf(i)===0){r=new st(r),r.selectNumberingPlan(t,n);var a=e.slice(i.length),s=ka(a,r),o=s.nationalNumber,l=ka(e,r),d=l.nationalNumber;if(!Yt(d,r.nationalNumberPattern())&&Yt(o,r.nationalNumberPattern())||$s(d,r)==="TOO_LONG")return{countryCallingCode:i,number:a}}return{number:e}}function ky(e,t,n,r){if(!e)return{};var i;if(e[0]!=="+"){var a=Ny(e,t,n,r);if(a&&a!==e)i=!0,e="+"+a;else{if(t||n){var s=Dy(e,t,n,r),o=s.countryCallingCode,l=s.number;if(o)return{countryCallingCodeSource:"FROM_NUMBER_WITHOUT_PLUS_SIGN",countryCallingCode:o,number:l}}return{number:e}}}if(e[1]==="0")return{};r=new st(r);for(var d=2;d-1<=I2&&d<=e.length;){var u=e.slice(1,d);if(r.hasCallingCode(u))return r.selectNumberingPlan(u),{countryCallingCodeSource:i?"FROM_NUMBER_WITH_IDD":"FROM_NUMBER_WITH_PLUS_SIGN",countryCallingCode:u,number:e.slice(d)};d++}return{}}function Uy(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=Fy(e))||t){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fy(e,t){if(e){if(typeof e=="string")return qo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qo(e,t)}}function qo(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function My(e,t){var n=t.countries,r=t.defaultCountry,i=t.metadata;i=new st(i);for(var a=[],s=Uy(n),o;!(o=s()).done;){var l=o.value;if(i.country(l),i.leadingDigits()){if(e&&e.search(i.leadingDigits())===0)return l}else if(bs({phone:e,country:l},void 0,i.metadata))if(r){if(l===r)return l;a.push(l)}else return l}if(a.length>0)return a[0]}function Ky(e,t){var n=t.nationalNumber,r=t.defaultCountry,i=t.metadata,a=i.getCountryCodesForCallingCode(e);if(a)return a.length===1?a[0]:My(n,{countries:a,defaultCountry:r,metadata:i.metadata})}var ju="+",Vy="[\\-\\.\\(\\)]?",jo="(["+It+"]|"+Vy+")",Gy="^\\"+ju+jo+"*["+It+"]"+jo+"*$",Wy=new RegExp(Gy,"g"),Ua=It,Hy="["+Ua+"]+((\\-)*["+Ua+"])*",qy="a-zA-Z",jy="["+qy+"]+((\\-)*["+Ua+"])*",zy="^("+Hy+"\\.)*"+jy+"\\.?$",Qy=new RegExp(zy,"g"),zo="tel:",Fa=";phone-context=",Yy=";isub=";function Xy(e){var t=e.indexOf(Fa);if(t<0)return null;var n=t+Fa.length;if(n>=e.length)return"";var r=e.indexOf(";",n);return r>=0?e.substring(n,r):e.substring(n)}function Jy(e){return e===null?!0:e.length===0?!1:Wy.test(e)||Qy.test(e)}function Zy(e,t){var n=t.extractFormattedPhoneNumber,r=Xy(e);if(!Jy(r))throw new jt("NOT_A_NUMBER");var i;if(r===null)i=n(e)||"";else{i="",r.charAt(0)===ju&&(i+=r);var a=e.indexOf(zo),s;a>=0?s=a+zo.length:s=0;var o=e.indexOf(Fa);i+=e.substring(s,o)}var l=i.indexOf(Yy);if(l>0&&(i=i.substring(0,l)),i!=="")return i}var ev=250,tv=new RegExp("["+Es+It+"]"),rv=new RegExp("[^"+It+"#]+$");function nv(e,t,n){if(t=t||{},n=new st(n),t.defaultCountry&&!n.hasCountry(t.defaultCountry))throw t.v2?new jt("INVALID_COUNTRY"):new Error("Unknown country: ".concat(t.defaultCountry));var r=av(e,t.v2,t.extract),i=r.number,a=r.ext,s=r.error;if(!i){if(t.v2)throw s==="TOO_SHORT"?new jt("TOO_SHORT"):new jt("NOT_A_NUMBER");return{}}var o=ov(i,t.defaultCountry,t.defaultCallingCode,n),l=o.country,d=o.nationalNumber,u=o.countryCallingCode,c=o.countryCallingCodeSource,f=o.carrierCode;if(!n.hasSelectedNumberingPlan()){if(t.v2)throw new jt("INVALID_COUNTRY");return{}}if(!d||d.length<Cs){if(t.v2)throw new jt("TOO_SHORT");return{}}if(d.length>T2){if(t.v2)throw new jt("TOO_LONG");return{}}if(t.v2){var g=new wy(u,d,n.metadata);return l&&(g.country=l),f&&(g.carrierCode=f),a&&(g.ext=a),g.__countryCallingCodeSource=c,g}var h=(t.extended?n.hasSelectedNumberingPlan():l)?Yt(d,n.nationalNumberPattern()):!1;return t.extended?{country:l,countryCallingCode:u,carrierCode:f,valid:h,possible:h?!0:!!(t.extended===!0&&n.possibleLengths()&&qu(d,n)),phone:d,ext:a}:h?sv(l,d,a):{}}function iv(e,t,n){if(e){if(e.length>ev){if(n)throw new jt("TOO_LONG");return}if(t===!1)return e;var r=e.search(tv);if(!(r<0))return e.slice(r).replace(rv,"")}}function av(e,t,n){var r=Zy(e,{extractFormattedPhoneNumber:function(s){return iv(s,n,t)}});if(!r)return{};if(!Y2(r))return X2(r)?{error:"TOO_SHORT"}:{};var i=J2(r);return i.ext?i:{number:r}}function sv(e,t,n){var r={country:e,phone:t};return n&&(r.ext=n),r}function ov(e,t,n,r){var i=ky(Uo(e),t,n,r.metadata),a=i.countryCallingCodeSource,s=i.countryCallingCode,o=i.number,l;if(s)r.selectNumberingPlan(s);else if(o&&(t||n))r.selectNumberingPlan(t,n),t&&(l=t),s=n||Ss(t,r.metadata);else return{};if(!o)return{countryCallingCodeSource:a,countryCallingCode:s};var d=ka(Uo(o),r),u=d.nationalNumber,c=d.carrierCode,f=Ky(s,{nationalNumber:u,defaultCountry:t,metadata:r});return f&&(l=f,f==="001"||r.country(l)),{country:l,countryCallingCode:s,countryCallingCodeSource:a,nationalNumber:u,carrierCode:c}}function Qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Yo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Qo(Object(n),!0).forEach(function(r){uv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qo(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function uv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lv(e,t,n){return nv(e,Yo(Yo({},t),{},{v2:!0}),n)}function Xo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function dv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xo(Object(n),!0).forEach(function(r){cv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xo(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fv(e,t){return vv(e)||yv(e,t)||pv(e,t)||hv()}function hv(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pv(e,t){if(e){if(typeof e=="string")return Jo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jo(e,t)}}function Jo(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yv(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],i=!0,a=!1,s,o;try{for(n=n.call(e);!(i=(s=n.next()).done)&&(r.push(s.value),!(t&&r.length===t));i=!0);}catch(l){a=!0,o=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(a)throw o}}return r}}function vv(e){if(Array.isArray(e))return e}function gv(e){var t=Array.prototype.slice.call(e),n=fv(t,4),r=n[0],i=n[1],a=n[2],s=n[3],o,l,d;if(typeof r=="string")o=r;else throw new TypeError("A text for parsing must be a string.");if(!i||typeof i=="string")s?(l=a,d=s):(l=void 0,d=a),i&&(l=dv({defaultCountry:i},l));else if(Gn(i))a?(l=i,d=a):d=i;else throw new Error("Invalid second argument: ".concat(i));return{text:o,options:l,metadata:d}}function Zo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function e0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zo(Object(n),!0).forEach(function(r){mv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zo(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cv(e,t,n){t&&t.defaultCountry&&!G2(t.defaultCountry,n)&&(t=e0(e0({},t),{},{defaultCountry:void 0}));try{return lv(e,t,n)}catch(r){if(!(r instanceof jt))throw r}}function Ev(){var e=gv(arguments),t=e.text,n=e.options,r=e.metadata;return Cv(t,n,r)}function t0(){return m2(Ev,arguments)}var F=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})};const Sv=30*60*1e3,$v=60*60*1e3;var ct;(function(e){e.CGGMP="CGGMP",e.DKLS="DKLS",e.ED25519="ED25519"})(ct||(ct={}));var Ot;(function(e){e.EVM="EVM",e.SOLANA="SOLANA"})(Ot||(Ot={}));var r0;(function(e){e.INITIATED="INITIATED",e.READY="READY",e.EXPIRED="EXPIRED",e.FINISHED="FINISHED",e.CANCELLED="CANCELLED"})(r0||(r0={}));var nt;(function(e){e.EMAIL="EMAIL",e.PHONE="PHONE"})(nt||(nt={}));(function(e){e.USER="USER",e.PREGEN="PREGEN"})(Ot||(Ot={}));const St="@CAPSULE/",Ji=`${St}e-mail`,bv=`${St}phone`,xv=`${St}countryCode`,Tv=`${St}farcasterUsername`,Zi=`${St}userId`,wr=`${St}wallets`,Br=`${St}ed25519Wallets`,Jr=`${St}sessionCookie`,Pn=`${St}loginEncryptionKeyPair`,Ln=2e3,n0=1e3;function Iv(e,t){return e.env!==Fe.PROD?Date.now()-t<=$v:Date.now()-t<=Sv}class Av{convertBigInt(t){const n=new un.jsbn.BigInteger(null);return n.data=t.data,n.s=t.s,n.t=t.t,n}convertEncryptionKeyPair(t){return{privateKey:un.pki.setRsaPrivateKey(this.convertBigInt(t.privateKey.n),this.convertBigInt(t.privateKey.e),this.convertBigInt(t.privateKey.d),this.convertBigInt(t.privateKey.p),this.convertBigInt(t.privateKey.q),this.convertBigInt(t.privateKey.dP),this.convertBigInt(t.privateKey.dQ),this.convertBigInt(t.privateKey.qInv)),publicKey:un.pki.setRsaPublicKey(this.convertBigInt(t.publicKey.n),this.convertBigInt(t.publicKey.e))}}requireApiKey(){if(!this.ctx.apiKey)throw new Error(`in order to create a wallet or user with Capsule, you
        must provide an API key to the capsule instance`)}constructor(t,n,r){if(this.localStorageGetItem=o=>this.platformUtils.localStorage.get(o),this.localStorageSetItem=(o,l)=>this.platformUtils.localStorage.set(o,l),this.sessionStorageGetItem=o=>this.platformUtils.sessionStorage.get(o),this.sessionStorageSetItem=(o,l)=>this.platformUtils.sessionStorage.set(o,l),this.sessionStorageRemoveItem=o=>this.platformUtils.sessionStorage.removeItem(o),this.retrieveSessionCookie=()=>this.sessionCookie,this.persistSessionCookie=o=>{this.sessionCookie=o,this.localStorageSetItem(Jr,o)},this.clearStorage=()=>F(this,void 0,void 0,function*(){this.platformUtils.localStorage.clear(St),this.platformUtils.sessionStorage.clear(St),this.platformUtils.secureStorage&&this.platformUtils.secureStorage.clear(St)}),r||(r={}),this.emailPrimaryColor=r.emailPrimaryColor,this.emailTheme=r.emailTheme,this.homepageUrl=r.homepageUrl,this.supportUrl=r.supportUrl,this.xUrl=r.xUrl,this.githubUrl=r.githubUrl,this.linkedinUrl=r.linkedinUrl,this.portalBackgroundColor=r.portalBackgroundColor,this.portalPrimaryButtonColor=r.portalPrimaryButtonColor,this.portalTextColor=r.portalTextColor,this.portalPrimaryButtonTextColor=r.portalPrimaryButtonTextColor,this.portalTheme=r.portalTheme,this.platformUtils=this.getPlatformUtils(),this.disableProviderModal=this.platformUtils.disableProviderModal,this.supportedWalletTypes=r.supportedWalletTypes||[Ot.EVM],r.useStorageOverrides&&(this.localStorageGetItem=r.localStorageGetItemOverride,this.localStorageSetItem=r.localStorageSetItemOverride,this.sessionStorageGetItem=r.sessionStorageGetItemOverride,this.sessionStorageSetItem=r.sessionStorageSetItemOverride,this.sessionStorageRemoveItem=r.sessionStorageRemoveItemOverride,this.clearStorage=r.clearStorageOverride),this.ctx={env:t,apiKey:n,capsuleClient:Mu(t,n,r.disableWorkers,this.retrieveSessionCookie,this.persistSessionCookie),disableWorkers:r.disableWorkers,offloadMPCComputationURL:r.offloadMPCComputationURL,useLocalFiles:r.useLocalFiles,useDKLS:r.useDKLSForCreation||!r.offloadMPCComputationURL,disableWebSockets:!!r.disableWebSockets,wasmOverride:r.wasmOverride},r.offloadMPCComputationURL&&(this.ctx.mpcComputationClient=Ku(r.offloadMPCComputationURL,r.disableWorkers)),!this.platformUtils.isSyncStorage||r.useStorageOverrides)return;this.email=this.localStorageGetItem(Ji)||void 0,this.userId=this.localStorageGetItem(Zi)||void 0,this.sessionCookie=this.localStorageGetItem(Jr)||this.sessionStorageGetItem(Jr)||void 0;const i=this.platformUtils.secureStorage?this.platformUtils.secureStorage.get(wr):this.localStorageGetItem(wr);this.wallets=JSON.parse(i||"{}");const a=this.platformUtils.secureStorage?this.platformUtils.secureStorage.get(Br):this.localStorageGetItem(Br);this.ed25519Wallets=JSON.parse(a||"{}");const s=this.sessionStorageGetItem(Pn);s&&s!=="undefined"&&(this.loginEncryptionKeyPair=this.convertEncryptionKeyPair(JSON.parse(s)))}getVerificationEmailProps(){return{brandColor:this.emailPrimaryColor,theme:this.emailTheme,supportUrl:this.supportUrl,homepageUrl:this.homepageUrl,xUrl:this.xUrl,githubUrl:this.githubUrl,linkedinUrl:this.linkedinUrl}}getBackupKitEmailProps(){return{brandColor:this.emailPrimaryColor,theme:this.emailTheme,homepageUrl:this.homepageUrl,xUrl:this.xUrl,linkedinUrl:this.linkedinUrl,githubUrl:this.githubUrl,supportUrl:this.supportUrl}}init(){return F(this,void 0,void 0,function*(){this.email=(yield this.localStorageGetItem(Ji))||void 0,this.userId=(yield this.localStorageGetItem(Zi))||void 0,this.sessionCookie=(yield this.localStorageGetItem(Jr))||(yield this.sessionStorageGetItem(Jr))||void 0;const t=this.platformUtils.secureStorage?yield this.platformUtils.secureStorage.get(wr):yield this.localStorageGetItem(wr);this.wallets=JSON.parse(t||"{}");const n=this.platformUtils.secureStorage?yield this.platformUtils.secureStorage.get(Br):yield this.localStorageGetItem(Br);this.ed25519Wallets=JSON.parse(n||"{}");const r=yield this.sessionStorageGetItem(Pn);r&&r!=="undefined"&&(this.loginEncryptionKeyPair=this.convertEncryptionKeyPair(JSON.parse(r)))})}setEmail(t){return F(this,void 0,void 0,function*(){this.email=t,yield this.localStorageSetItem(Ji,t)})}setPhoneNumber(t,n){return F(this,void 0,void 0,function*(){this.phone=t,this.countryCode=n,yield this.localStorageSetItem(bv,t),yield this.localStorageSetItem(xv,n)})}setFarcasterUsername(t){return F(this,void 0,void 0,function*(){this.farcasterUsername=t,yield this.localStorageSetItem(Tv,t)})}setUserId(t){return F(this,void 0,void 0,function*(){this.userId=t,yield this.localStorageSetItem(Zi,t)})}setWallets(t){return F(this,void 0,void 0,function*(){if(this.wallets=t,this.platformUtils.secureStorage){yield this.platformUtils.secureStorage.set(wr,JSON.stringify(t));return}yield this.localStorageSetItem(wr,JSON.stringify(t))})}setEd25519Wallets(t){return F(this,void 0,void 0,function*(){if(this.ed25519Wallets=t,this.platformUtils.secureStorage){yield this.platformUtils.secureStorage.set(Br,JSON.stringify(t));return}yield this.localStorageSetItem(Br,JSON.stringify(t))})}setLoginEncryptionKeyPair(t){return F(this,void 0,void 0,function*(){this.loginEncryptionKeyPair=t,yield this.sessionStorageSetItem(Pn,JSON.stringify(t))})}deleteLoginEncryptionKeyPair(){return F(this,void 0,void 0,function*(){this.loginEncryptionKeyPair=void 0,yield this.sessionStorageRemoveItem(Pn)})}getUserId(){return this.userId}getEmail(){return this.email}getWallets(){return this.wallets}getED25519Wallets(){return this.ed25519Wallets}getAddress(t){var n,r;return t?this.wallets[t].address:(r=(n=Object.values(this.wallets))===null||n===void 0?void 0:n[0])===null||r===void 0?void 0:r.address}getPartnerURL(t){return F(this,void 0,void 0,function*(){return(yield this.ctx.capsuleClient.getPartner(t)).data.partner.portalUrl})}getPortalURL(t){return F(this,void 0,void 0,function*(){return t&&(yield this.getPartnerURL(t))||qt(this.ctx)})}getCommonLoginQueryParams(t,n){return F(this,void 0,void 0,function*(){const r=t?`&newDeviceSessionId=${t}`:"",i=n?`&newDeviceEncryptionKey=${n}`:"";return`${r}${i}`})}getCommonQueryParams(t,n){var r,i,a,s,o,l;return F(this,void 0,void 0,function*(){const d=(yield this.ctx.capsuleClient.getPartner(t)).data,u=t?`&partnerId=${t}`:"",c=d.font?`&portalFont=${encodeURIComponent(d.font)}`:"",f=!((r=this.portalTheme)===null||r===void 0)&&r.borderRadius?`&portalBorderRadius=${encodeURIComponent(this.portalTheme.borderRadius)}`:"",g=d.foregroundColor||!((i=this.portalTheme)===null||i===void 0)&&i.foregroundColor?`&portalForegroundColor=${encodeURIComponent((a=d.foregroundColor)!==null&&a!==void 0?a:this.portalTheme.foregroundColor)}`:"",h=d.backgroundColor||this.portalBackgroundColor||!((s=this.portalTheme)===null||s===void 0)&&s.backgroundColor?`&portalBackgroundColor=${encodeURIComponent((l=(o=d.backgroundColor)!==null&&o!==void 0?o:this.portalBackgroundColor)!==null&&l!==void 0?l:this.portalTheme.backgroundColor)}`:"",m=this.portalPrimaryButtonColor?`&portalPrimaryButtonColor=${encodeURIComponent(this.portalPrimaryButtonColor)}`:"",E=this.portalTextColor?`&portalTextColor=${encodeURIComponent(this.portalTextColor)}`:"",b=this.portalPrimaryButtonTextColor?`&portalPrimaryButtonTextColor=${encodeURIComponent(this.portalPrimaryButtonTextColor)}`:"",I=n?`&isForNewDevice=${n}`:"";return`${u}${c}${f}${g}${h}${m}${E}${b}${I}`})}getWebAuthURLForCreate(t,n,r,i){return F(this,void 0,void 0,function*(){const a=yield this.getCommonQueryParams(r,i),s={email:`email=${encodeURIComponent(this.email)}`,phone:`phone=${encodeURIComponent(this.phone)}&countryCode=${encodeURIComponent(this.countryCode)}`,farcaster:`farcasterUsername=${encodeURIComponent(this.farcasterUsername)}`}[t];return`${r&&(yield this.getPartnerURL(r))||qt(this.ctx)}/web/users/${this.userId}/biometrics/${n}?${s}${a}`})}getShortUrl(t){return`${qt(this.ctx)}/short/${t}`}shortenLoginLink(t){return F(this,void 0,void 0,function*(){const n=yield v2(t,this.ctx.capsuleClient);return this.getShortUrl(n)})}getWebAuthURLForLogin(t,n,r,i,a,s="email"){return F(this,void 0,void 0,function*(){const o=yield this.getCommonQueryParams(r),l=yield this.getCommonLoginQueryParams(i,a),d={email:`email=${encodeURIComponent(this.email)}`,phone:`phone=${encodeURIComponent(this.phone)}&countryCode=${encodeURIComponent(this.countryCode)}`,farcaster:`farcasterUsername=${encodeURIComponent(this.farcasterUsername)}`}[s];return`${r&&(yield this.getPartnerURL(r))||qt(this.ctx)}/web/biometrics/login?${d}&sessionId=${t}&encryptionKey=${n}${l}${o}`})}getWebAuthURLForLoginForPhone(t,n,r,i,a){return F(this,void 0,void 0,function*(){const s=yield this.getCommonQueryParams(r),o=yield this.getCommonLoginQueryParams(i,a);return`${r&&(yield this.getPartnerURL(r))||qt(this.ctx)}/web/biometrics/login?phone=${encodeURIComponent(this.phone)}&countryCode=${encodeURIComponent(this.countryCode)}&sessionId=${t}&encryptionKey=${n}${o}${s}`})}getPrivateKey(t){return F(this,void 0,void 0,function*(){const n=Object.values(this.wallets),r=t?this.wallets[t]:n==null?void 0:n[0];if(!r)throw new Error("wallet not found");if(r.scheme!==ct.DKLS)throw new Error("invalid wallet scheme");return yield this.platformUtils.getPrivateKey(this.ctx,this.userId,r.id,r.signer,this.retrieveSessionCookie())})}fetchWallets(){return F(this,void 0,void 0,function*(){return(yield this.ctx.capsuleClient.getWallets(this.userId)).data.wallets})}populateWalletAddresses(){return F(this,void 0,void 0,function*(){(yield this.ctx.capsuleClient.getWallets(this.userId)).data.wallets.forEach(r=>{r.scheme===ct.ED25519&&this.ed25519Wallets[r.id]?(this.ed25519Wallets[r.id].address=r.address,this.ed25519Wallets[r.id].publicKey=r.publicKey,this.ed25519Wallets[r.id].scheme=r.scheme,this.ed25519Wallets[r.id].partnerId=r.partnerId,this.ed25519Wallets[r.id].userId=r.userId,delete this.wallets[r.id]):this.wallets[r.id]&&(this.wallets[r.id].address=r.address,this.wallets[r.id].publicKey=r.publicKey,this.wallets[r.id].scheme=r.scheme,this.wallets[r.id].partnerId=r.partnerId,this.wallets[r.id].userId=r.userId,delete this.ed25519Wallets[r.id])}),yield this.setWallets(this.wallets),yield this.setEd25519Wallets(this.ed25519Wallets)})}populatePregenWalletAddresses(t,n){return F(this,void 0,void 0,function*(){(yield this.ctx.capsuleClient.getPregenWallets(t,n)).wallets.forEach(a=>{a.scheme===ct.ED25519&&this.ed25519Wallets[a.id]?(this.ed25519Wallets[a.id].address=a.address,this.ed25519Wallets[a.id].publicKey=a.publicKey,this.ed25519Wallets[a.id].scheme=a.scheme,this.ed25519Wallets[a.id].partnerId=a.partnerId,this.ed25519Wallets[a.id].userId=a.userId,this.ed25519Wallets[a.id].type=a.type,delete this.wallets[a.id]):this.wallets[a.id]&&(this.wallets[a.id].address=a.address,this.wallets[a.id].publicKey=a.publicKey,this.wallets[a.id].scheme=a.scheme,this.wallets[a.id].partnerId=a.partnerId,this.wallets[a.id].userId=a.userId,this.wallets[a.id].type=a.type,delete this.ed25519Wallets[a.id])}),yield this.setWallets(this.wallets),yield this.setEd25519Wallets(this.ed25519Wallets)})}checkIfUserExists(t){return F(this,void 0,void 0,function*(){return(yield this.ctx.capsuleClient.checkUserExists(t,null,null)).data.exists})}checkIfUserExistsByPhone(t,n){return F(this,void 0,void 0,function*(){return(yield this.ctx.capsuleClient.checkUserExists(null,t,n)).data.exists})}createUser(t){return F(this,void 0,void 0,function*(){this.requireApiKey(),yield this.setEmail(t);const{userId:n}=yield this.ctx.capsuleClient.createUser(Object.assign({email:this.email},this.getVerificationEmailProps()));yield this.setUserId(n)})}createUserByPhone(t,n){return F(this,void 0,void 0,function*(){this.requireApiKey(),yield this.setPhoneNumber(t,n);const{userId:r}=yield this.ctx.capsuleClient.createUser({phone:this.phone,countryCode:this.countryCode});yield this.setUserId(r)})}verifyEmail(t){return F(this,void 0,void 0,function*(){return yield this.ctx.capsuleClient.verifyEmail(this.userId,{verificationCode:t}),this.getSetUpBiometricsURL(!1)})}verifyPhone(t){return F(this,void 0,void 0,function*(){return yield this.ctx.capsuleClient.verifyPhone(this.userId,{verificationCode:t}),this.getSetUpBiometricsURLForPhone(!1)})}verify2FA(t,n){return F(this,void 0,void 0,function*(){const r=yield this.ctx.capsuleClient.verify2FA(t,n);return{address:r.data.address,initiatedAt:r.data.initiatedAt,status:r.data.status,userId:r.data.userId,walletId:r.data.walletId}})}verify2FAForPhone(t,n,r){return F(this,void 0,void 0,function*(){const i=yield this.ctx.capsuleClient.verify2FAForPhone(t,n,r);return{address:i.data.address,initiatedAt:i.data.initiatedAt,status:i.data.status,userId:i.data.userId,walletId:i.data.walletId}})}setup2FA(){return F(this,void 0,void 0,function*(){return{uri:(yield this.ctx.capsuleClient.setup2FA(this.userId)).data.uri}})}enable2FA(t){return F(this,void 0,void 0,function*(){yield this.ctx.capsuleClient.enable2FA(this.userId,t)})}check2FAStatus(){return F(this,void 0,void 0,function*(){return this.userId?{isSetup:(yield this.ctx.capsuleClient.check2FAStatus(this.userId)).data.isSetup}:{isSetup:!1}})}resendVerificationCode(){return F(this,void 0,void 0,function*(){yield this.ctx.capsuleClient.resendVerificationCode(Object.assign({userId:this.userId},this.getVerificationEmailProps()))})}resendVerificationCodeByPhone(){return F(this,void 0,void 0,function*(){yield this.ctx.capsuleClient.resendVerificationCodeByPhone({userId:this.userId})})}getSetUpBiometricsURL(t,n="email"){return F(this,void 0,void 0,function*(){const r=yield this.ctx.capsuleClient.addSessionPublicKey(this.userId,{status:Qn.PENDING,type:Yn.WEB});return this.getWebAuthURLForCreate(n,r.data.id,r.data.partnerId,t)})}getSetUpBiometricsURLForPhone(t){return F(this,void 0,void 0,function*(){const n=yield this.ctx.capsuleClient.addSessionPublicKey(this.userId,{status:Qn.PENDING,type:Yn.WEB});return this.getWebAuthURLForCreate("phone",n.data.id,n.data.partnerId,t)})}isSessionActive(){return F(this,void 0,void 0,function*(){const t=yield this.ctx.capsuleClient.touchSession();return t.data.biometricVerifiedAt&&Iv(this.ctx,t.data.biometricVerifiedAt)})}isFullyLoggedIn(){var t,n,r,i;return F(this,void 0,void 0,function*(){const a=yield this.isSessionActive(),s=(n=(t=Object.values(this.getWallets()))===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.address,o=(i=(r=Object.values(this.getED25519Wallets()))===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.address;return a&&!!(s||o)})}initiateUserLogin(t,n,r="email",i){return F(this,void 0,void 0,function*(){r==="email"?yield this.setEmail(t):r==="phone"?yield this.setPhoneNumber(t,i):r==="farcaster"&&(yield this.setFarcasterUsername(t));const a=yield this.ctx.capsuleClient.touchSession(!0);if(!this.loginEncryptionKeyPair){const o=yield Qi(this.ctx);yield this.setLoginEncryptionKeyPair(o)}const s=yield this.getWebAuthURLForLogin(a.data.sessionId,zi(this.loginEncryptionKeyPair),a.data.partnerId,void 0,void 0,r);return n?this.shortenLoginLink(s):s})}initiateUserLoginForPhone(t,n,r){return F(this,void 0,void 0,function*(){yield this.setPhoneNumber(t,n);const i=yield this.ctx.capsuleClient.touchSession(!0);if(!this.loginEncryptionKeyPair){const s=yield Qi(this.ctx);yield this.setLoginEncryptionKeyPair(s)}const a=yield this.getWebAuthURLForLoginForPhone(i.data.sessionId,zi(this.loginEncryptionKeyPair),i.data.partnerId);return r?this.shortenLoginLink(a):a})}waitForAccountCreation(){return F(this,void 0,void 0,function*(){for(;;)try{if(yield new Promise(t=>setTimeout(t,Ln)),yield this.isSessionActive())return}catch(t){console.error(t)}})}waitForPasskeyAndCreateWallet(){return F(this,void 0,void 0,function*(){yield this.waitForAccountCreation();let t,n;if(this.email!=null?(t=this.email,n=nt.EMAIL):(t=t0(`${this.countryCode}${this.phone}`).formatInternational(),n=nt.PHONE),(yield this.ctx.capsuleClient.getPregenWallets(t,n)).wallets[0])return yield this.claimPregenWallets(t,n);{const{recoverySecret:a}=yield this.createWalletPerMissingType();return a}})}getFarcasterConnectURL(){return F(this,void 0,void 0,function*(){yield this.logout(),yield this.ctx.capsuleClient.touchSession(!0);const{data:{connect_uri:t}}=yield this.ctx.capsuleClient.initializeFarcasterLogin();return t})}waitForFarcasterStatus(){return F(this,void 0,void 0,function*(){for(;;)try{yield new Promise(n=>setTimeout(n,Ln));const t=yield this.ctx.capsuleClient.getFarcasterAuthStatus();if(t.data.state==="completed"){const{userId:n,userExists:r,username:i}=t.data;return yield this.setUserId(n),yield this.setFarcasterUsername(i),{userExists:r,username:i}}}catch(t){console.error(t)}})}getOAuthURL(t){return F(this,void 0,void 0,function*(){yield this.logout();const n=yield this.ctx.capsuleClient.touchSession(!0);return`${Fu(this.ctx.env)}auth/${t.toLowerCase()}?sessionLookupId=${encodeURIComponent(n.data.sessionLookupId)}`})}waitForOAuth(){return F(this,void 0,void 0,function*(){for(;;)try{yield new Promise(n=>setTimeout(n,Ln));const t=yield this.ctx.capsuleClient.touchSession();if(t.data.userId){const{userId:n,email:r}=t.data;return yield this.setUserId(n),yield this.setEmail(r),{userExists:yield this.checkIfUserExists(r),email:r}}}catch(t){console.error(t)}})}waitForLoginAndSetup(t){return F(this,void 0,void 0,function*(){for(;;)try{if(yield new Promise(i=>setTimeout(i,Ln)),!(yield this.isSessionActive()))continue;yield this.userSetupAfterLogin();const n=(yield this.fetchWallets()).filter(i=>!!i.address),r=yield this.getTransmissionKeyShares();if(r.data.temporaryShares.length===n.length){yield this.setupAfterLogin(r.data.temporaryShares,t);const i=Object.keys(this.wallets).length===0&&this.supportedWalletTypes.includes(Ot.EVM),a=Object.keys(this.ed25519Wallets).length===0&&this.supportedWalletTypes.includes(Ot.SOLANA);return{needsWallet:i||a}}}catch(n){console.error(n)}})}refreshSession(t){return F(this,void 0,void 0,function*(){const n=yield this.ctx.capsuleClient.touchSession(!0);if(!this.loginEncryptionKeyPair){const i=yield Qi(this.ctx);yield this.setLoginEncryptionKeyPair(i)}const r=yield this.getWebAuthURLForLogin(n.data.sessionId,zi(this.loginEncryptionKeyPair));return t&&this.platformUtils.openPopup(r),r})}userSetupAfterLogin(){return F(this,void 0,void 0,function*(){const t=yield this.ctx.capsuleClient.touchSession();yield this.setUserId(t.data.userId)})}getTransmissionKeyShares(t){return F(this,void 0,void 0,function*(){const n=yield this.ctx.capsuleClient.touchSession(),r=t?`${n.data.sessionLookupId}-new-device`:n.data.sessionLookupId;return this.ctx.capsuleClient.getTransmissionKeyshares(this.userId,r)})}setupAfterLogin(t,n){return F(this,void 0,void 0,function*(){t||(t=(yield this.getTransmissionKeyShares()).data.temporaryShares),yield this.setWallets({}),yield this.setEd25519Wallets({}),t.forEach(r=>{const i=d2(this.loginEncryptionKeyPair.privateKey,r.encryptedShare,r.encryptedKey);this.wallets[r.walletId]={id:r.walletId,signer:i},this.ed25519Wallets[r.walletId]={id:r.walletId,signer:i}}),yield this.deleteLoginEncryptionKeyPair(),yield this.populateWalletAddresses(),yield this.ctx.capsuleClient.touchSession(!n)})}distributeNewWalletShare(t,n,r){return F(this,void 0,void 0,function*(){let i=n;return i||(i=this.wallets[t].signer),r?yield Uu(this.ctx,this.userId,t,[],i,!1,this.getBackupKitEmailProps()):yield Kn(this.ctx,this.userId,t,i,!1,this.getBackupKitEmailProps())})}waitForWalletAddress(t){return F(this,void 0,void 0,function*(){let n=0;for(;;)try{if(n===10)break;++n;const i=(yield this.ctx.capsuleClient.getWallets(this.userId)).data.wallets.find(a=>a.id===t);if(i&&i.address)return;yield new Promise(a=>setTimeout(a,n0))}catch(r){console.error(r)}throw new Error("timed out waiting for wallet address")})}waitForPregenWalletAddress(t,n=nt.EMAIL,r){return F(this,void 0,void 0,function*(){let i=0;for(;;)try{if(i===10)break;++i;const s=(yield this.ctx.capsuleClient.getPregenWallets(t,n)).wallets.find(o=>o.id===r);if(s&&s.address)return;yield new Promise(o=>setTimeout(o,n0))}catch(a){console.error(a)}throw new Error("timed out waiting for wallet address")})}createWalletPerMissingType(t=!1){return F(this,void 0,void 0,function*(){const n=[];let r;if(Object.keys(this.wallets).length===0&&this.supportedWalletTypes.includes(Ot.EVM)){const[i,a]=yield this.createWallet(t);n.push(i),a&&(r=a)}if(Object.keys(this.ed25519Wallets).length===0&&this.supportedWalletTypes.includes(Ot.SOLANA)){const[i,a]=yield this.createWallet(t,void 0,!0);n.push(i),a&&(r=a)}return{wallets:n,recoverySecret:r}})}createWallet(t=!1,n,r){return F(this,void 0,void 0,function*(){this.requireApiKey();let i,a;if(r){const o=yield this.platformUtils.ed25519Keygen(this.ctx,this.userId,this.retrieveSessionCookie(),this.getBackupKitEmailProps()),l=o.walletId;i=o.signer,this.ed25519Wallets[l]={id:l,signer:i},a=this.ed25519Wallets[l]}else{const o=yield this.platformUtils.keygen(this.ctx,this.userId,null,this.retrieveSessionCookie(),this.getBackupKitEmailProps()),l=o.walletId;i=o.signer,this.wallets[l]={id:l,signer:i},a=this.wallets[l]}yield this.waitForWalletAddress(a.id),yield this.populateWalletAddresses();let s=null;return t||(s=yield Kn(this.ctx,this.userId,a.id,i,!1,this.getBackupKitEmailProps())),[a,s]})}createWalletPreGen(t,n,r=nt.EMAIL){return F(this,void 0,void 0,function*(){this.requireApiKey();let i;if(n){const{signer:a,walletId:s}=yield this.platformUtils.ed25519PreKeygen(this.ctx,t,r,this.retrieveSessionCookie());i=s,this.ed25519Wallets[i]={id:i,signer:a}}else{const{signer:a,walletId:s}=yield this.platformUtils.preKeygen(this.ctx,void 0,t,r,null,this.retrieveSessionCookie());i=s,this.wallets[i]={id:i,signer:a}}return yield this.waitForPregenWalletAddress(t,r,i),yield this.populatePregenWalletAddresses(t,r),n?this.ed25519Wallets[i]:this.wallets[i]})}claimPregenWallets(t,n=nt.EMAIL){return F(this,void 0,void 0,function*(){if(this.requireApiKey(),n===nt.EMAIL){if(!(yield this.checkIfUserExists(t)))throw new Error("user does not exist")}else{const a=t0(t),s=a.formatNational(),o=`+${a.countryCallingCode}`;if(!(yield this.checkIfUserExistsByPhone(s,o)))throw new Error("user does not exist")}const r=yield this.ctx.capsuleClient.getPregenWallets(t,n);if(r.wallets.length===0)throw new Error("wallets not found");let i;for(const a of r.wallets){yield this.ctx.capsuleClient.claimPregenWallet({userId:this.userId,walletId:a.id});const s=a.scheme===ct.ED25519?this.ed25519Wallets[a.id].signer:this.wallets[a.id].signer,o=yield Kn(this.ctx,this.userId,a.id,s,!1,this.getBackupKitEmailProps());o&&(i=o),a.scheme===ct.ED25519?(this.ed25519Wallets[a.id].userId=this.userId,yield this.setEd25519Wallets(this.ed25519Wallets)):(this.wallets[a.id].userId=this.userId,yield this.setWallets(this.wallets))}return i})}updateWalletIdentifierPreGen(t,n,r=nt.EMAIL){return F(this,void 0,void 0,function*(){this.requireApiKey();const i=n||Object.keys(this.wallets)[0];yield this.ctx.capsuleClient.updatePregenWallet(i,{pregenIdentifier:t,pregenIdentifierType:r})})}hasPregenWallet(t,n=nt.EMAIL){return F(this,void 0,void 0,function*(){return this.requireApiKey(),!!(yield this.ctx.capsuleClient.getPregenWallets(t,n)).wallets[0]})}getPregenWallets(t,n=nt.EMAIL){return F(this,void 0,void 0,function*(){return this.requireApiKey(),(yield this.ctx.capsuleClient.getPregenWallets(t,n)).wallets})}encodeWalletBase64(t){const n=JSON.stringify(t);return W.Buffer.from(n).toString("base64")}getUserShare(){const t=Object.values(this.wallets)[0],n=Object.values(this.ed25519Wallets)[0];return t&&n?`${this.encodeWalletBase64(t)}-${this.encodeWalletBase64(n)}`:t||n?this.encodeWalletBase64(t||n):null}setUserShare(t){return F(this,void 0,void 0,function*(){const n=t.split("-");for(const r of n){const i=W.Buffer.from(r,"base64").toString(),a=JSON.parse(i);a.scheme===ct.ED25519?(this.ed25519Wallets[a.id]=a,yield this.setEd25519Wallets(this.ed25519Wallets)):(this.wallets[a.id]=a,yield this.setWallets(this.wallets))}})}getTransactionReviewUrl(t){return`${qt(this.ctx)}/web/users/${this.userId}/transaction-review/${t}?email=${encodeURIComponent(this.email)}`}signMessage(t,n){return F(this,void 0,void 0,function*(){const r=this.wallets[t]||this.ed25519Wallets[t];let i=this.userId;if(r.partnerId&&!r.userId&&(i=r.partnerId),r.scheme===ct.ED25519){const s=yield this.platformUtils.ed25519Sign(this.ctx,i,t,r.signer,n,this.retrieveSessionCookie());return s.pendingTransactionId?Object.assign(Object.assign({},s),{transactionReviewUrl:this.getTransactionReviewUrl(s.pendingTransactionId)}):s}const a=yield this.platformUtils.signMessage(this.ctx,i,t,this.wallets[t].signer,n,this.retrieveSessionCookie(),r.scheme===ct.DKLS);return a.pendingTransactionId?Object.assign(Object.assign({},a),{transactionReviewUrl:this.getTransactionReviewUrl(a.pendingTransactionId)}):a})}signTransaction(t,n,r){return F(this,void 0,void 0,function*(){const i=this.wallets[t];let a=this.userId;i.partnerId&&!i.userId&&(a=i.partnerId);const s=yield this.platformUtils.signTransaction(this.ctx,a,t,this.wallets[t].signer,n,r,this.retrieveSessionCookie(),i.scheme===ct.DKLS);return s.pendingTransactionId?Object.assign(Object.assign({},s),{transactionReviewUrl:this.getTransactionReviewUrl(s.pendingTransactionId)}):s})}sendTransaction(t,n,r){return F(this,void 0,void 0,function*(){const i=this.wallets[t],a=yield this.platformUtils.sendTransaction(this.ctx,this.userId,t,this.wallets[t].signer,n,r,this.retrieveSessionCookie(),i.scheme===ct.DKLS);return a.pendingTransactionId?Object.assign(Object.assign({},a),{transactionReviewUrl:this.getTransactionReviewUrl(a.pendingTransactionId)}):a})}isProviderModalDisabled(){return!!this.disableProviderModal}createOnRampPurchase(t,n,r,i=!1,a=Object.keys(this.wallets)[0]){return F(this,void 0,void 0,function*(){return(yield this.ctx.capsuleClient.createOnRampPurchase(this.getUserId(),a,df(t),ff(n),cf(r),i)).data})}updateOnRampPurchase(t,n,r){return F(this,void 0,void 0,function*(){return(yield this.ctx.capsuleClient.updateOnRampPurchase(this.getUserId(),t,n,r)).data})}getOnRampPurchase(t,n){return F(this,void 0,void 0,function*(){return(yield this.ctx.capsuleClient.getOnRampPurchase(this.getUserId(),t,n)).data})}keepSessionAlive(){return F(this,void 0,void 0,function*(){try{return yield this.ctx.capsuleClient.keepSessionAlive(this.userId),!0}catch{return!1}})}exportSession(){const t={email:this.email,userId:this.userId,wallets:this.wallets,ed25519Wallets:this.ed25519Wallets,sessionCookie:this.sessionCookie};return W.Buffer.from(JSON.stringify(t)).toString("base64")}importSession(t){return F(this,void 0,void 0,function*(){const n=W.Buffer.from(t,"base64").toString("utf8"),r=JSON.parse(n);yield this.setEmail(r.email),yield this.setUserId(r.userId),yield this.setWallets(r.wallets),yield this.setEd25519Wallets(r.ed25519Wallets),this.persistSessionCookie(r.sessionCookie)})}logout(t){return F(this,void 0,void 0,function*(){if(yield this.ctx.capsuleClient.logout(),yield this.clearStorage(),t){const n=Object.assign(Object.assign({},this.wallets),this.ed25519Wallets);Object.entries(n).forEach(([r,i])=>{i.type!==Ot.PREGEN&&(i.scheme===ct.ED25519?delete this.ed25519Wallets[r]:delete this.wallets[r])}),yield this.setWallets(this.wallets),yield this.setEd25519Wallets(this.ed25519Wallets)}else this.wallets={},this.ed25519Wallets={};this.loginEncryptionKeyPair=void 0,this.email=void 0,this.userId=void 0,this.sessionCookie=void 0})}toString(){const t=Object.keys(this.wallets).reduce((r,i)=>Object.assign(Object.assign({},r),{[i]:{id:i,address:this.wallets[i].address,signer:this.wallets[i].signer?"[REDACTED]":void 0}}),{}),n={email:this.email,userId:this.userId,wallets:t,loginEncryptionKeyPair:this.loginEncryptionKeyPair?"[REDACTED]":void 0};return`Capsule ${JSON.stringify(n)}`}}var wv=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})};function Ii(e,t,n){return wv(this,void 0,void 0,function*(){const r=Date.now();for(;Date.now()-r<t;){if(yield e())return!0;yield new Promise(i=>setTimeout(i,n))}return!1})}function zu(e){return{r:`0x${e.slice(2,66)}`,s:`0x${e.slice(66,130)}`,v:BigInt(e.slice(130,132))}}function mn(e){return e.startsWith("0x")&&(e=e.slice(2)),new Uint8Array(W.Buffer.from(e,"hex"))}class Bv{constructor(){this.get=t=>typeof window<"u"&&localStorage.getItem(t)||null,this.set=(t,n)=>{typeof window<"u"&&localStorage.setItem(t,n)},this.removeItem=t=>{typeof window<"u"&&localStorage.removeItem(t)},this.clear=t=>{if(typeof window<"u")for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);r&&r.startsWith(t)&&(localStorage.removeItem(r),n--)}}}}class Rv{constructor(){this.get=t=>typeof window<"u"&&sessionStorage.getItem(t)||null,this.set=(t,n)=>{typeof window<"u"&&sessionStorage.setItem(t,n)},this.removeItem=t=>{typeof window<"u"&&sessionStorage.removeItem(t)},this.clear=t=>{if(typeof window<"u")for(let n=0;n<sessionStorage.length;n++){const r=sessionStorage.key(n);r&&r.startsWith(t)&&(sessionStorage.removeItem(r),n--)}}}}var _v=dn&&dn.__awaiter||function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})};(()=>{const e=()=>{const r=new Error("not implemented");return r.code="ENOSYS",r};if(!globalThis.fs){let r="";globalThis.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(i,a){r+=n.decode(a);const s=r.lastIndexOf(`
`);return s!=-1&&(console.log(r.substring(0,s)),r=r.substring(s+1)),a.length},write(i,a,s,o,l,d){if(s!==0||o!==a.length||l!==null){d(e());return}const u=this.writeSync(i,a);d(null,u)},chmod(i,a,s){s(e())},chown(i,a,s,o){o(e())},close(i,a){a(e())},fchmod(i,a,s){s(e())},fchown(i,a,s,o){o(e())},fstat(i,a){a(e())},fsync(i,a){a(null)},ftruncate(i,a,s){s(e())},lchown(i,a,s,o){o(e())},link(i,a,s){s(e())},lstat(i,a){a(e())},mkdir(i,a,s){s(e())},open(i,a,s,o){o(e())},read(i,a,s,o,l,d){d(e())},readdir(i,a){a(e())},readlink(i,a){a(e())},rename(i,a,s){s(e())},rmdir(i,a){a(e())},stat(i,a){a(e())},symlink(i,a,s){s(e())},truncate(i,a,s){s(e())},unlink(i,a){a(e())},utimes(i,a,s,o){o(e())}}}if(globalThis.process||(globalThis.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw e()},pid:-1,ppid:-1,umask(){throw e()},cwd(){throw e()},chdir(){throw e()}}),!globalThis.crypto)throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(globalThis.performance||(globalThis.performance=Date),!globalThis.TextEncoder)throw new Error("globalThis.TextEncoder is not available, polyfill required");if(!globalThis.TextDecoder)throw new Error("globalThis.TextDecoder is not available, polyfill required");const t=new TextEncoder("utf-8"),n=new TextDecoder("utf-8");globalThis.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=c=>{c!==0&&console.warn("exit code:",c)},this._exitPromise=new Promise(c=>{this._resolveExitPromise=c}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const r=(c,f)=>{this.mem.setUint32(c+0,f,!0),this.mem.setUint32(c+4,Math.floor(f/4294967296),!0)},i=c=>{const f=this.mem.getUint32(c+0,!0),g=this.mem.getInt32(c+4,!0);return f+g*4294967296},a=c=>{const f=this.mem.getFloat64(c,!0);if(f===0)return;if(!isNaN(f))return f;const g=this.mem.getUint32(c,!0);return this._values[g]},s=(c,f)=>{if(typeof f=="number"&&f!==0){if(isNaN(f)){this.mem.setUint32(c+4,2146959360,!0),this.mem.setUint32(c,0,!0);return}this.mem.setFloat64(c,f,!0);return}if(f===void 0){this.mem.setFloat64(c,0,!0);return}let h=this._ids.get(f);h===void 0&&(h=this._idPool.pop(),h===void 0&&(h=this._values.length),this._values[h]=f,this._goRefCounts[h]=0,this._ids.set(f,h)),this._goRefCounts[h]++;let m=0;switch(typeof f){case"object":f!==null&&(m=1);break;case"string":m=2;break;case"symbol":m=3;break;case"function":m=4;break}this.mem.setUint32(c+4,2146959360|m,!0),this.mem.setUint32(c,h,!0)},o=c=>{const f=i(c+0),g=i(c+8);return new Uint8Array(this._inst.exports.mem.buffer,f,g)},l=c=>{const f=i(c+0),g=i(c+8),h=new Array(g);for(let m=0;m<g;m++)h[m]=a(f+m*8);return h},d=c=>{const f=i(c+0),g=i(c+8);return n.decode(new DataView(this._inst.exports.mem.buffer,f,g))},u=Date.now()-performance.now();this.importObject={_gotest:{add:(c,f)=>c+f},gojs:{"runtime.wasmExit":c=>{c>>>=0;const f=this.mem.getInt32(c+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(f)},"runtime.wasmWrite":c=>{c>>>=0;const f=i(c+8),g=i(c+16),h=this.mem.getInt32(c+24,!0);fs.writeSync(f,new Uint8Array(this._inst.exports.mem.buffer,g,h))},"runtime.resetMemoryDataView":c=>{this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":c=>{c>>>=0,r(c+8,(u+performance.now())*1e6)},"runtime.walltime":c=>{c>>>=0;const f=new Date().getTime();r(c+8,f/1e3),this.mem.setInt32(c+16,f%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":c=>{c>>>=0;const f=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(f,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(f);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},i(c+8))),this.mem.setInt32(c+16,f,!0)},"runtime.clearTimeoutEvent":c=>{c>>>=0;const f=this.mem.getInt32(c+8,!0);clearTimeout(this._scheduledTimeouts.get(f)),this._scheduledTimeouts.delete(f)},"runtime.getRandomData":c=>{c>>>=0,crypto.getRandomValues(o(c+8))},"syscall/js.finalizeRef":c=>{c>>>=0;const f=this.mem.getUint32(c+8,!0);if(this._goRefCounts[f]--,this._goRefCounts[f]===0){const g=this._values[f];this._values[f]=null,this._ids.delete(g),this._idPool.push(f)}},"syscall/js.stringVal":c=>{c>>>=0,s(c+24,d(c+8))},"syscall/js.valueGet":c=>{c>>>=0;const f=Reflect.get(a(c+8),d(c+16));c=this._inst.exports.getsp()>>>0,s(c+32,f)},"syscall/js.valueSet":c=>{c>>>=0,Reflect.set(a(c+8),d(c+16),a(c+32))},"syscall/js.valueDelete":c=>{c>>>=0,Reflect.deleteProperty(a(c+8),d(c+16))},"syscall/js.valueIndex":c=>{c>>>=0,s(c+24,Reflect.get(a(c+8),i(c+16)))},"syscall/js.valueSetIndex":c=>{c>>>=0,Reflect.set(a(c+8),i(c+16),a(c+24))},"syscall/js.valueCall":c=>{c>>>=0;try{const f=a(c+8),g=Reflect.get(f,d(c+16)),h=l(c+32),m=Reflect.apply(g,f,h);c=this._inst.exports.getsp()>>>0,s(c+56,m),this.mem.setUint8(c+64,1)}catch(f){c=this._inst.exports.getsp()>>>0,s(c+56,f),this.mem.setUint8(c+64,0)}},"syscall/js.valueInvoke":c=>{c>>>=0;try{const f=a(c+8),g=l(c+16),h=Reflect.apply(f,void 0,g);c=this._inst.exports.getsp()>>>0,s(c+40,h),this.mem.setUint8(c+48,1)}catch(f){c=this._inst.exports.getsp()>>>0,s(c+40,f),this.mem.setUint8(c+48,0)}},"syscall/js.valueNew":c=>{c>>>=0;try{const f=a(c+8),g=l(c+16),h=Reflect.construct(f,g);c=this._inst.exports.getsp()>>>0,s(c+40,h),this.mem.setUint8(c+48,1)}catch(f){c=this._inst.exports.getsp()>>>0,s(c+40,f),this.mem.setUint8(c+48,0)}},"syscall/js.valueLength":c=>{c>>>=0,r(c+16,parseInt(a(c+8).length))},"syscall/js.valuePrepareString":c=>{c>>>=0;const f=t.encode(String(a(c+8)));s(c+16,f),r(c+24,f.length)},"syscall/js.valueLoadString":c=>{c>>>=0;const f=a(c+8);o(c+16).set(f)},"syscall/js.valueInstanceOf":c=>{c>>>=0,this.mem.setUint8(c+24,a(c+8)instanceof a(c+16)?1:0)},"syscall/js.copyBytesToGo":c=>{c>>>=0;const f=o(c+8),g=a(c+32);if(!(g instanceof Uint8Array||g instanceof Uint8ClampedArray)){this.mem.setUint8(c+48,0);return}const h=g.subarray(0,f.length);f.set(h),r(c+40,h.length),this.mem.setUint8(c+48,1)},"syscall/js.copyBytesToJS":c=>{c>>>=0;const f=a(c+8),g=o(c+16);if(!(f instanceof Uint8Array||f instanceof Uint8ClampedArray)){this.mem.setUint8(c+48,0);return}const h=g.subarray(0,f.length);f.set(h),r(c+40,h.length),this.mem.setUint8(c+48,1)},debug:c=>{console.log(c)}}}}run(r){return _v(this,void 0,void 0,function*(){if(!(r instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=r,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,globalThis,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[globalThis,5],[this,6]]),this._idPool=[],this.exited=!1;let i=4096;const a=c=>{const f=i,g=t.encode(c+"\0");return new Uint8Array(this.mem.buffer,i,g.length).set(g),i+=g.length,i%8!==0&&(i+=8-i%8),f},s=this.argv.length,o=[];this.argv.forEach(c=>{o.push(a(c))}),o.push(0),Object.keys(this.env).sort().forEach(c=>{o.push(a(`${c}=${this.env[c]}`))}),o.push(0);const d=i;if(o.forEach(c=>{this.mem.setUint32(i,c,!0),this.mem.setUint32(i+4,0,!0),i+=8}),i>=12288)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(s,d),this.exited&&this._resolveExitPromise(),yield this._exitPromise})}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(r){const i=this;return function(){const a={id:r,this:this,args:arguments};return i._pendingEvent=a,i._resume(),a.result}}}})();var pt=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})};const Nv=(e,t,n)=>`{"ServerUrl":"${e}", "WalletId": "${t}", "Id":"${n}", "Ids":["USER","CAPSULE"], "Threshold":1}`,Qu=(e,t,n)=>`{"walletId": "${e}", "id":"${t}", "otherId":"CAPSULE", "isReceiver": false, "disableWebSockets": ${n}}`;function Pv(e,t,n,r){return pt(this,void 0,void 0,function*(){const{data:i}=yield e.mpcComputationClient.post("/wallets",{userId:t,walletId:n,protocolId:r});return i})}function Lv(e,t,n,r,i,a){return pt(this,void 0,void 0,function*(){const{data:s}=yield e.mpcComputationClient.post(`/wallets/${n}/messages/sign`,{userId:t,protocolId:r,message:i,signer:a});return s})}function Yu(e,t,n,r,i,a,s){return pt(this,void 0,void 0,function*(){const{data:o}=yield e.mpcComputationClient.post(`/wallets/${n}/transactions/send`,{userId:t,protocolId:r,transaction:i,signer:a,chainId:s});return o})}function Ov(e,t){return pt(this,void 0,void 0,function*(){const{walletId:n,protocolId:r}=yield e.capsuleClient.createWallet(t,{scheme:br.ED25519}),i=hr(e.env,!e.disableWebSockets);return{signer:yield new Promise((s,o)=>Ne.ed25519CreateAccount(i,n,r,(l,d)=>{l&&o(l),s(d)})),walletId:n}})}function Dv(e,t,n){return pt(this,void 0,void 0,function*(){const{walletId:r,protocolId:i}=yield e.capsuleClient.createPregenWallet({pregenIdentifier:t,pregenIdentifierType:n,scheme:br.ED25519}),a=hr(e.env,!e.disableWebSockets);return{signer:yield new Promise((o,l)=>Ne.ed25519CreateAccount(a,r,i,(d,u)=>{d&&l(d),o(u)})),walletId:r}})}function kv(e,t,n,r,i){return pt(this,void 0,void 0,function*(){const{protocolId:a}=yield e.capsuleClient.preSignMessage(n,r,i,br.ED25519);return{signature:yield new Promise((o,l)=>Ne.ed25519Sign(t,a,i,(d,u)=>{d&&l(d),o(u)}))}})}function Uv(e,t,n){return pt(this,void 0,void 0,function*(){const{walletId:r,protocolId:i}=yield e.capsuleClient.createWallet(t,{useTwoSigners:!0,scheme:e.useDKLS?br.DKLS:br.CGGMP});if(e.offloadMPCComputationURL&&!e.useDKLS)return{signer:(yield Pv(e,t,r,i)).signer,walletId:r};const a=hr(e.env,!e.disableWebSockets),s=e.useDKLS?Qu(r,"USER",e.disableWebSockets):Nv(a,r,"USER"),o=e.useDKLS?Ne.dklsCreateAccount:Ne.createAccountV2;return{signer:yield new Promise((d,u)=>o(s,a,i,n,()=>{},(c,f)=>{c&&u(c),d(f)})),walletId:r}})}function Fv(e,t,n,r,i){return pt(this,void 0,void 0,function*(){const{walletId:a,protocolId:s}=yield e.capsuleClient.createPregenWallet({pregenIdentifier:n,pregenIdentifierType:r}),o=hr(e.env,!e.disableWebSockets),l=Qu(a,"USER",e.disableWebSockets);return{signer:yield new Promise((u,c)=>Ne.dklsCreateAccount(l,o,s,i,()=>{},(f,g)=>{f&&c(f),u(g)})),walletId:a}})}function Mv(e,t,n,r,i){return pt(this,void 0,void 0,function*(){const{protocolId:a,pendingTransactionId:s}=yield e.capsuleClient.preSignMessage(r,n,i);if(s)return console.error("sign message denied"),{pendingTransactionId:s};if(e.offloadMPCComputationURL&&!e.useDKLS)return Lv(e,r,n,a,i,t);const o=hr(e.env,!e.disableWebSockets),l=e.useDKLS?Ne.dklsSignMessage:Ne.signMessage,d=JSON.parse(t);return!d.disableWebSockets!=!e.disableWebSockets&&(d.disableWebSockets=e.disableWebSockets),t=JSON.stringify(d),new Promise((u,c)=>l(t,o,i,a,(f,g)=>{f&&c(f),u({signature:g})}))})}function Kv(e,t,n,r,i,a){return pt(this,void 0,void 0,function*(){const{data:{protocolId:s,pendingTransactionId:o}}=yield e.capsuleClient.signTransaction(r,n,{transaction:i,chainId:a});if(o)return console.error("send transaction denied"),{pendingTransactionId:o};if(e.offloadMPCComputationURL&&!e.useDKLS)return Yu(e,r,n,s,i,t,a);const l=hr(e.env,!e.disableWebSockets),d=e.useDKLS?Ne.dklsSendTransaction:Ne.sendTransaction,u=JSON.parse(t);return!u.disableWebSockets!=!e.disableWebSockets&&(u.disableWebSockets=e.disableWebSockets),t=JSON.stringify(u),new Promise((c,f)=>d(t,l,i,a,s,(g,h)=>{g&&f(g),c({signature:h})}))})}function Vv(e,t,n,r,i,a){return pt(this,void 0,void 0,function*(){const{data:{protocolId:s,pendingTransactionId:o}}=yield e.capsuleClient.sendTransaction(r,n,{transaction:i,chainId:a});if(o)return console.error("send transaction denied"),{pendingTransactionId:o};if(e.offloadMPCComputationURL&&!e.useDKLS)return Yu(e,r,n,s,i,t,a);const l=hr(e.env,!e.disableWebSockets),d=e.useDKLS?Ne.dklsSendTransaction:Ne.sendTransaction,u=JSON.parse(t);return!u.disableWebSockets!=!e.disableWebSockets&&(u.disableWebSockets=e.disableWebSockets),t=JSON.stringify(u),new Promise((c,f)=>d(t,l,i,a,s,(g,h)=>{g&&f(g),c({signature:h})}))})}function Gv(e,t,n,r){return pt(this,void 0,void 0,function*(){const{data:{protocolId:i}}=yield e.capsuleClient.refreshKeys(r,n),a=hr(e.env,!e.disableWebSockets),s=e.useDKLS?Ne.dklsRefresh:Ne.refresh,o=JSON.parse(t);return!o.disableWebSockets!=!e.disableWebSockets&&(o.disableWebSockets=e.disableWebSockets),t=JSON.stringify(o),new Promise((l,d)=>s(t,a,i,(u,c)=>{u&&d(u),l(c)}))})}function Wv(e,t,n,r){return pt(this,void 0,void 0,function*(){const i=yield e.capsuleClient.getCapsuleShare(r,n);return i?new Promise((a,s)=>Ne.getPrivateKey(t,i,(o,l)=>{o&&s(o),a(l)})):""})}var Hv={},xs=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,[])).next())})};function qv(e,t){return xs(this,void 0,void 0,function*(){const n=new self.Go;let r=t;if(!r){if(Hv.DISABLE_WASM_FETCH==="true")throw new Error("fetching wasm file is disabled");r=yield(yield fetch(`${qt(e)}/static/js/main.wasm`,{mode:"cors"})).arrayBuffer()}const i=yield WebAssembly.instantiate(r,n.importObject);n.run(i.instance)})}function jv(e,t){return xs(this,void 0,void 0,function*(){const{functionType:n,params:r}=t;switch(n){case"KEYGEN":{const{userId:i,secretKey:a}=r;return yield Uv(e,i,a)}case"SIGN_TRANSACTION":{const{share:i,walletId:a,userId:s,tx:o,chainId:l}=r;return Kv(e,i,a,s,o,l)}case"SEND_TRANSACTION":{const{share:i,walletId:a,userId:s,tx:o,chainId:l}=r;return Vv(e,i,a,s,o,l)}case"SIGN_MESSAGE":{const{share:i,walletId:a,userId:s,message:o}=r;return Mv(e,i,a,s,o)}case"REFRESH":{const{share:i,walletId:a,userId:s}=r;return Gv(e,i,a,s)}case"PREKEYGEN":{const{email:i,partnerId:a,secretKey:s}=r;let{pregenIdentifier:o,pregenIdentifierType:l}=r;return i!=="null"&&i!=="undefined"&&i!==""&&i!=null&&(o=i,l=nt.EMAIL),yield Fv(e,a,o,l,s)}case"GET_PRIVATE_KEY":{const{share:i,walletId:a,userId:s}=r;return yield Wv(e,i,a,s)}case"ED25519_KEYGEN":{const{userId:i}=r;return Ov(e,i)}case"ED25519_SIGN":{const{share:i,walletId:a,userId:s,base64Bytes:o}=r;return kv(e,i,s,a,o)}case"ED25519_PREKEYGEN":{const{email:i}=r;let{pregenIdentifier:a,pregenIdentifierType:s}=r;return i!=="null"&&i!=="undefined"&&i!==""&&i!=null&&(a=i,s=nt.EMAIL),Dv(e,a,s)}default:throw new Error(`functionType: ${n} not supported`)}})}function zv(e,t,n){return xs(this,void 0,void 0,function*(){const{env:r,apiKey:i,offloadMPCComputationURL:a,disableWorkers:s,sessionCookie:o,useDKLS:l,disableWebSockets:d,wasmOverride:u}=e.data;if(!r)return!0;const c={env:r,apiKey:i,capsuleClient:Mu(r,i,n,()=>o),offloadMPCComputationURL:a,mpcComputationClient:a?Ku(a,!!s):void 0,useDKLS:l,disableWebSockets:!!d,wasmOverride:u};(!c.offloadMPCComputationURL||c.useDKLS)&&(yield qv(c,u));const f=yield jv(c,e.data);return t(f),!1})}var i0=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})};function Xt(e,t){return i0(this,void 0,void 0,function*(){const n=i=>{i.data.functionType!=="CUSTOM"&&t(i.data)};if(e.disableWorkers)return{postMessage:function(a){(function(){return i0(this,void 0,void 0,function*(){yield zv({data:a},s=>n({data:s}),e.disableWorkers)})})()},terminate:()=>{}};let r;if(e.useLocalFiles)throw new Error("useLocalFiles only supported locally");{const i=yield fetch(`${qt(e)}/static/js/mpcWorker-bundle.js`),a=new Blob([yield i.text()],{type:"application/javascript"}),s=URL.createObjectURL(a);r=new Worker(s)}return r.onmessage=n,r})}var lt=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})};function Xu(e,t,n){return lt(this,void 0,void 0,function*(){return!!(yield e.capsuleClient.getWallets(t)).data.wallets.find(a=>a.id===n).address})}function Ju(e,t,n,r){return lt(this,void 0,void 0,function*(){return!!(yield e.capsuleClient.getPregenWallets(t,n)).wallets.find(s=>s.id===r).address})}function Qv(e,t,n,r=!1,i,a={}){return new Promise(s=>lt(this,void 0,void 0,function*(){const o=yield Xt(e,l=>lt(this,void 0,void 0,function*(){if(yield Ii(()=>lt(this,void 0,void 0,function*(){return Xu(e,t,l.walletId)}),15e3,1e3),r){s({signer:l.signer,walletId:l.walletId,recoveryShare:null}),o.terminate();return}const d=yield Kn(e,t,l.walletId,l.signer,!1,a);s({signer:l.signer,walletId:l.walletId,recoveryShare:d}),o.terminate()}));o.postMessage({env:e.env,apiKey:e.apiKey,params:{userId:t,secretKey:n},functionType:"KEYGEN",offloadMPCComputationURL:e.offloadMPCComputationURL,disableWorkers:e.disableWorkers,sessionCookie:i,useDKLS:e.useDKLS,disableWebSockets:e.disableWebSockets,wasmOverride:e.wasmOverride})}))}function Yv(e,t,n,r,i=!1,a,s){return new Promise(o=>lt(this,void 0,void 0,function*(){const l=yield Xt(e,c=>lt(this,void 0,void 0,function*(){yield Ii(()=>lt(this,void 0,void 0,function*(){return Ju(e,t,n,c.walletId)}),15e3,1e3),o({signer:c.signer,walletId:c.walletId,recoveryShare:null}),l.terminate()})),u={pregenIdentifier:t,pregenIdentifierType:n,secretKey:r,partnerId:a,email:void 0};n===nt.EMAIL&&(u.email=t),l.postMessage({env:e.env,apiKey:e.apiKey,params:u,functionType:"PREKEYGEN",offloadMPCComputationURL:e.offloadMPCComputationURL,disableWorkers:e.disableWorkers,sessionCookie:s,useDKLS:e.useDKLS,disableWebSockets:e.disableWebSockets,wasmOverride:e.wasmOverride})}))}function Xv(e,t,n,r={}){return new Promise(i=>lt(this,void 0,void 0,function*(){const a=yield Xt(e,s=>lt(this,void 0,void 0,function*(){yield Ii(()=>lt(this,void 0,void 0,function*(){return Xu(e,t,s.walletId)}),15e3,1e3),i({signer:s.signer,walletId:s.walletId,recoveryShare:null}),a.terminate()}));a.postMessage({env:e.env,apiKey:e.apiKey,params:{userId:t},functionType:"ED25519_KEYGEN",disableWorkers:e.disableWorkers,sessionCookie:n,disableWebSockets:e.disableWebSockets,wasmOverride:e.wasmOverride})}))}function Jv(e,t,n,r){return new Promise(i=>lt(this,void 0,void 0,function*(){const a=yield Xt(e,l=>lt(this,void 0,void 0,function*(){yield Ii(()=>lt(this,void 0,void 0,function*(){return Ju(e,t,n,l.walletId)}),15e3,1e3),i({signer:l.signer,walletId:l.walletId,recoveryShare:null}),a.terminate()})),o={pregenIdentifier:t,pregenIdentifierType:n,email:void 0};n===nt.EMAIL&&(o.email=t),a.postMessage({env:e.env,apiKey:e.apiKey,params:o,functionType:"ED25519_PREKEYGEN",disableWorkers:e.disableWorkers,sessionCookie:r,disableWebSockets:e.disableWebSockets,wasmOverride:e.wasmOverride})}))}var $t=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})};function Zv(e,t,n,r,i,a,s,o){return $t(this,void 0,void 0,function*(){return yield new Promise(l=>$t(this,void 0,void 0,function*(){const d=yield Xt(e,u=>$t(this,void 0,void 0,function*(){l(u),d.terminate()}));d.postMessage({env:e.env,apiKey:e.apiKey,params:{share:r,walletId:n,userId:t,tx:i,chainId:a},functionType:"SIGN_TRANSACTION",offloadMPCComputationURL:e.offloadMPCComputationURL,disableWorkers:e.disableWorkers,sessionCookie:s,useDKLS:o,disableWebSockets:e.disableWebSockets,wasmOverride:e.wasmOverride})}))})}function eg(e,t,n,r,i,a,s,o){return $t(this,void 0,void 0,function*(){return yield new Promise(l=>$t(this,void 0,void 0,function*(){const d=yield Xt(e,u=>$t(this,void 0,void 0,function*(){l(u),d.terminate()}));d.postMessage({env:e.env,apiKey:e.apiKey,params:{share:r,walletId:n,userId:t,tx:i,chainId:a},functionType:"SEND_TRANSACTION",offloadMPCComputationURL:e.offloadMPCComputationURL,disableWorkers:e.disableWorkers,sessionCookie:s,useDKLS:o,disableWebSockets:e.disableWebSockets,wasmOverride:e.wasmOverride})}))})}function tg(e,t,n,r,i,a,s){return $t(this,void 0,void 0,function*(){return yield new Promise(o=>$t(this,void 0,void 0,function*(){const l=yield Xt(e,d=>$t(this,void 0,void 0,function*(){o(d),l.terminate()}));l.postMessage({env:e.env,apiKey:e.apiKey,params:{share:r,walletId:n,userId:t,message:i},functionType:"SIGN_MESSAGE",offloadMPCComputationURL:e.offloadMPCComputationURL,disableWorkers:e.disableWorkers,sessionCookie:a,useDKLS:s,disableWebSockets:e.disableWebSockets,wasmOverride:e.wasmOverride})}))})}function rg(e,t,n,r,i,a){return $t(this,void 0,void 0,function*(){return yield new Promise(s=>$t(this,void 0,void 0,function*(){const o=yield Xt(e,l=>$t(this,void 0,void 0,function*(){s(l),o.terminate()}));o.postMessage({env:e.env,apiKey:e.apiKey,params:{share:r,walletId:n,userId:t,base64Bytes:i},functionType:"ED25519_SIGN",disableWorkers:e.disableWorkers,sessionCookie:a,disableWebSockets:e.disableWebSockets,wasmOverride:e.wasmOverride})}))})}var ea=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})};function ng(e,t,n,r,i){return ea(this,void 0,void 0,function*(){return yield new Promise(a=>ea(this,void 0,void 0,function*(){const s=yield Xt(e,o=>ea(this,void 0,void 0,function*(){a(o),s.terminate()}));s.postMessage({env:e.env,apiKey:e.apiKey,params:{share:r,walletId:n,userId:t},functionType:"GET_PRIVATE_KEY",offloadMPCComputationURL:e.offloadMPCComputationURL,disableWorkers:e.disableWorkers,sessionCookie:i,useDKLS:e.useDKLS,disableWebSockets:e.disableWebSockets,wasmOverride:e.wasmOverride})}))})}class ig{constructor(){this.localStorage=new Bv,this.sessionStorage=new Rv,this.secureStorage=null,this.isSyncStorage=!0,this.disableProviderModal=!1}getPrivateKey(t,n,r,i,a){return ng(t,n,r,i,a)}keygen(t,n,r,i,a={}){return Qv(t,n,r,!0,i,a)}preKeygen(t,n,r,i,a,s){return Yv(t,r,i,a,!1,n,s)}signMessage(t,n,r,i,a,s,o){return tg(t,n,r,i,a,s,o)}signTransaction(t,n,r,i,a,s,o,l){return Zv(t,n,r,i,a,s,o,l)}sendTransaction(t,n,r,i,a,s,o,l){return eg(t,n,r,i,a,s,o,l)}signHash(t,n){throw new Error("not implemented")}ed25519Keygen(t,n,r,i){return Xv(t,n,r,i)}ed25519PreKeygen(t,n,r,i){return Jv(t,n,r,i)}ed25519Sign(t,n,r,i,a,s){return rg(t,n,r,i,a,s)}openPopup(t){window.open(t,"popup","popup=true,width=400,height=500")||setTimeout(()=>{window.open(t,"_blank")},0)}}class ag extends Av{getPlatformUtils(){return new ig}}var Ts=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})};class Zu{constructor(t,n="cosmos",r){this.capsule=t,this.prefix=n,this._currentWalletId=r}get publicKey(){const t=this.capsule.getWallets()[this.currentWalletId],n=mn(t.publicKey);return cn.Secp256k1.compressPubkey(n)}set currentWalletId(t){this._currentWalletId=t}get currentWalletId(){var t;return this._currentWalletId||((t=Object.values(this.capsule.getWallets())[0])===null||t===void 0?void 0:t.id)}get address(){return ul.toBech32(this.prefix,Wn.rawSecp256k1PubkeyToRawAddress(this.publicKey))}getAccounts(){return Ts(this,void 0,void 0,function*(){return[{algo:"secp256k1",address:this.address,pubkey:this.publicKey}]})}}class el extends Zu{signDirect(t,n){return Ts(this,void 0,void 0,function*(){const r=ll.makeSignBytes(n);if(t!==this.address)throw new Error(`Address ${t} not found in wallet`);const i=cn.sha256(r),a=yield this.capsule.signMessage(this.currentWalletId,W.Buffer.from(i.buffer).toString("base64")),s=zu(`0x${a.signature}`),o=new cn.ExtendedSecp256k1Signature(mn(s.r),mn(s.s),Number(s.v)),l=new Uint8Array([...o.r(32),...o.s(32)]);return{signed:n,signature:Wn.encodeSecp256k1Signature(this.publicKey,l)}})}}class tl extends Zu{signAmino(t,n){return Ts(this,void 0,void 0,function*(){if(t!==this.address)throw new Error(`Address ${t} not found in wallet`);const r=new cn.Sha256(Wn.serializeSignDoc(n)).digest(),i=yield this.capsule.signMessage(this.currentWalletId,W.Buffer.from(r.buffer).toString("base64")),a=zu(`0x${i.signature}`),s=new cn.ExtendedSecp256k1Signature(mn(a.r),mn(a.s),Number(a.v)),o=new Uint8Array([...s.r(32),...s.s(32)]);return{signed:n,signature:Wn.encodeSecp256k1Signature(this.publicKey,o)}})}}var Fr=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})};const Ai={"phoenix-1":"terra","loyal-main-02":"loyal","empowerchain-1":"empower","kichain-2":"ki","neutron-1":"neutron","akashnet-2":"akash","pacific-1":"sei","quicksilver-2":"quick","injective-1":"inj","umee-1":"umee",darchub:"darc","secret-4":"secret","chihuahua-1":"chihuahua","osmosis-1":"osmo","passage-2":"pasg","agoric-3":"agoric","passage-1":"pasg","xstaxy-1":"aura","nois-1":"nois","crescent-1":"cre",nyx:"n","fetchhub-4":"fetch","noble-1":"noble","gravity-bridge-3":"gravity","bitsong-2b":"bitsong","dydx-mainnet-1":"dydx","cronosmainnet_25-1":"crc",celestia:"celestia","jackal-1":"jkl","pirin-1":"nolus","meme-1":"meme","dimension_37-1":"xpla","centauri-1":"centauri","mantle-1":"mantle","quasar-1":"quasar","evmos_9001-2":"evmos","planq_7070-2":"plq","sifchain-1":"sif","bitcanna-1":"bcna","eightball-1":"8ball",gitopia:"gitopia","lum-network-1":"lum","ununifi-beta-v1":"ununifi","canto_7700-1":"canto","archway-1":"archway","mars-1":"mars","teritori-1":"tori","migaloo-1":"migaloo","comdex-1":"comdex","omniflixhub-1":"omniflix","core-1":"persistence","shentu-2.2":"shentu","columbus-5":"terra","axelar-dojo-1":"axelar","stride-1":"stride","kaiyo-1":"kujira","cosmoshub-4":"cosmos","kava_2222-10":"kava","sommelier-3":"somm","crypto-org-chain-mainnet-1":"cro","stargaze-1":"stars","juno-1":"juno","theta-testnet-001":"cosmos","uni-5":"juno","osmo-test-5":"osmo","pulsar-2":"secret","constantine-3":"archway","axelar-testnet-lisbon-3":"axelar","carbon-1":"swth","perun-1":"c4e","babajaga-1":"c4e","cheqd-mainnet-1":"cheqd","coreum-mainnet-1":"core","coreum-testnet-1":"testcore","cudos-1":"cudos","mainnet-3":"decentr","desmos-mainnet":"desmos","dydx-testnet-1":"dydx","emoney-3":"emoney","circulus-1":"empower","injective-888":"inj","irishub-1":"iaa","ixo-5":"ixo","pandora-8":"ixo","kyve-1":"kyve","kaon-1":"kyve","likecoin-mainnet-2":"like","ares-1":"mars","mayachain-mainnet-v1":"maya","pion-1":"neutron","nibiru-itn-1":"nibi","grand-1":"noble","nolus-rila":"nolus","nomic-stakenet-3":"nomic","nomic-testnet-4d":"nomic","onomy-mainnet-1":"onomy","test-core-1":"persistence","planq_7000-4":"plq","qsr-questnet-04":"quasar","atlantic-1":"sei","atlantic-2":"sei","elgafar-1":"stars","iov-mainnet-ibc":"star"},Cn=e=>Fr(void 0,void 0,void 0,function*(){return new Promise((t,n)=>{var r,i;const a=(i=(r=Object.values(e.getWallets()))===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.address;e.isSessionActive().then(s=>{if(s&&a)return t(!0);if(window.successFromCapsuleModal=()=>{t(!0)},window.failureFromCapsuleModal=()=>{n()},!window.openCapsuleModal){console.log("Social login UI package missing."),console.log("Consider adding @leapwallet/cosmos-social-login-capsule-provider-ui");return}window.openCapsuleModal(e)})})}),a0=(e,t,n,r,i)=>Fr(void 0,void 0,void 0,function*(){if(!(yield e.isSessionActive()))throw yield Cn(e),new Error("Wallet is not connected, please connect again");return yield new Promise((o,l)=>{window.successFromTransactionSigningModal=d=>Fr(void 0,void 0,void 0,function*(){var u,c;const f=(c=Object.values((u=e.getWallets())!==null&&u!==void 0?u:{}))===null||c===void 0?void 0:c[0],h=yield new tl(e,Ai[t],f==null?void 0:f.id).signAmino(n,r),m={signature:h.signature,signed:h.signed};o(m)}),window.failureFromTransactionSigningModal=d=>{l(d)},window.openTransactionSigningModal?window.openTransactionSigningModal(e,t,n,r,Object.assign({isAmino:!0},i??{})):window.successFromTransactionSigningModal({capsule:e,chainId:t,signerAddress:n,signDoc:r})})}),rl=(e,t,n,r)=>Fr(void 0,void 0,void 0,function*(){if(!(yield e.isSessionActive()))throw yield Cn(e),new Error("Wallet is not connected, please connect again");return yield new Promise((s,o)=>{window.successFromTransactionSigningModal=l=>Fr(void 0,void 0,void 0,function*(){var d,u;const c=(u=Object.values((d=e.getWallets())!==null&&d!==void 0?d:{}))===null||u===void 0?void 0:u[0],g=yield new el(e,Ai[t],c==null?void 0:c.id).signDirect(n,r),h={signature:g.signature,signed:g.signed};s(h)}),window.failureFromTransactionSigningModal=l=>{o(l)},window.openTransactionSigningModal?window.openTransactionSigningModal(e,t,n,r):window.successFromTransactionSigningModal({capsule:e,chainId:t,signerAddress:n,signDoc:r})})}),Ma=(e,t)=>Fr(void 0,void 0,void 0,function*(){var n,r;const i=Object.values((n=e==null?void 0:e.getWallets())!==null&&n!==void 0?n:{});if(i.length<1)throw yield Cn(e),Error("Not possible");const s=(yield new el(e,Ai[t],(r=i==null?void 0:i[0])===null||r===void 0?void 0:r.id).getAccounts())[0];if(!s)throw new Error("No account data found");return s});var s0=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})};class sg{constructor(t,n){this.chainId=t,this.capsule=n,this.chainId=t,this.capsule=n}getAccounts(){return s0(this,void 0,void 0,function*(){const t=yield Ma(this.capsule,this.chainId);return[{address:t.address,algo:"secp256k1",pubkey:t.pubkey}]})}signDirect(t,n){return s0(this,void 0,void 0,function*(){if(this.chainId!==n.chainId)throw new Error("Chain ID does not match signer chain ID");const r=yield this.getAccounts();if(console.log("logging accounts",r),r.find(i=>i.address!==t))throw new Error("Signer address does not match wallet address");return rl(this.capsule,this.chainId,t,n)})}}const ug={name:"leap-capsule-social-login",prettyName:"Sign In with Email",logo:"https://leap-wallet-assets.s3.amazonaws.com/social-login/mail.svg",mode:"extension",mobileDisabled:!1,rejectMessage:{source:"Request rejected"},downloads:[{device:"desktop",browser:"chrome",link:"https://chrome.google.com/webstore/detail/metamask-flask-developmen/ljfoeinjpaedjfecbmggjgodbgkmjkjk"}],connectEventNamesOnWindow:["leap_keystorechange"]};var Bt=function(e,t,n,r){function i(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(u){try{d(r.next(u))}catch(c){s(c)}}function l(u){try{d(r.throw(u))}catch(c){s(c)}}function d(u){u.done?a(u.value):i(u.value).then(o,l)}d((r=r.apply(e,t||[])).next())})};class lg{constructor(t={}){var n;const r=t.env||Fe.BETA,i={emailPrimaryColor:"#29a873",homepageUrl:"https://leapwallet.io",portalTheme:{backgroundColor:"#141414",foregroundColor:"#29a873",borderRadius:"sm"}};window.capsule=new ag(r,t.apiKey,(n=t.opts)!==null&&n!==void 0?n:i)}getClient(){return window.capsule}getKey(t){return Bt(this,void 0,void 0,function*(){return Ma(window.capsule,t)})}enable(){return Bt(this,void 0,void 0,function*(){return this.handleConnect()})}disconnect(){return Bt(this,void 0,void 0,function*(){window.capsuleLogout?window.capsuleLogout():window.capsule.logout()})}getSimpleAccount(t){return Bt(this,void 0,void 0,function*(){const{address:n,username:r}=yield this.getAccount(t);return{namespace:"cosmos",chainId:t,address:n,username:r}})}handleConnect(){return Bt(this,void 0,void 0,function*(){yield Cn(window.capsule)})}connect(){return Bt(this,void 0,void 0,function*(){yield Cn(window.capsule)})}getAccount(t){return Bt(this,void 0,void 0,function*(){var n;yield this.handleConnect();const r=yield Ma(window.capsule,t);return{username:(n=window==null?void 0:window.capsule)===null||n===void 0?void 0:n.getEmail(),address:r.address,algo:r.algo,pubkey:r.pubkey}})}getOfflineSigner(t,n){switch(n){case"amino":return this.getOfflineSignerAmino(t);case"direct":return this.getOfflineSignerDirect(t);default:return this.getOfflineSignerAmino(t)}}getOfflineSignerAmino(t){var n,r;const i=(r=Object.values((n=window.capsule)===null||n===void 0?void 0:n.getWallets()))===null||r===void 0?void 0:r[0];return new tl(window.capsule,Ai[t],i==null?void 0:i.id)}getOfflineSignerDirect(t){return new sg(t,window.capsule)}signAmino(t,n,r,i){return Bt(this,void 0,void 0,function*(){return a0(window.capsule,t,n,r)})}signArbitrary(t,n,r,i){return Bt(this,void 0,void 0,function*(){let a=!1;[r,a]=this.getDataForADR36(r);const s=this.getADR36SignDoc(n,r);return(yield a0(window.capsule,t,n,s,{isADR36WithString:a,isSignArbitrary:!0})).signature})}signDirect(t,n,r){return Bt(this,void 0,void 0,function*(){return rl(window.capsule,t,n,r)})}getDataForADR36(t){let n=!1;return typeof t=="string"?(t=W.Buffer.from(t).toString("base64"),n=!0):t=W.Buffer.from(t).toString("base64"),[t,n]}getADR36SignDoc(t,n){return{chain_id:"",account_number:"0",sequence:"0",fee:{gas:"0",amount:[]},msgs:[{type:"sign/MsgSignData",value:{signer:t,data:n}}],memo:""}}}export{lg as CapsuleProvider,ug as LeapCapsuleInfo,ro as OAuthMethod};
